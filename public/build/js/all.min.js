!function(){"use strict";var o=$('<div class="modal-body"><input type="text" class="form-control" placeholder="Message"></div>');$(document).on("click",".js-msgGroup",function(){$(".js-msgGroup, .js-newMsg").addClass("d-none"),$(".js-conversation").removeClass("d-none"),$(".modal-title").html('<a href="#" class="js-gotoMsgs">Back</a>'),o.insertBefore(".js-modalBody")}),$(function(){function o(){return $('[data-toggle="popover"]').length?$(window).width()-($('[data-toggle="popover"]').offset().left+$('[data-toggle="popover"]').outerWidth()):0}$(window).on("resize",function(){var t=$('[data-toggle="popover"]').data("bs.popover");t&&(t.config.viewport.padding=o())}),$('[data-toggle="popover"]').popover({template:'<div class="popover" role="tooltip"><div class="arrow"></div><div class="popover-body popover-content px-0"></div></div>',title:"",html:!0,trigger:"manual",placement:"bottom",viewport:{selector:"body",padding:o()},content:function(){return'<ul class="nav nav-pills nav-stacked flex-column" style="width: 120px">'+$("#js-popoverContent").clone().html()+"</ul>"}}),$('[data-toggle="popover"]').on("click",function(o){o.stopPropagation(),$($('[data-toggle="popover"]').data("bs.popover").getTipElement()).hasClass("in")?($('[data-toggle="popover"]').popover("hide"),$(document).off("click.app.popover")):($('[data-toggle="popover"]').popover("show"),setTimeout(function(){$(document).one("click.app.popover",function(){$('[data-toggle="popover"]').popover("hide")})},1))})}),$(document).on("click",".js-gotoMsgs",function(){o.remove(),$(".js-conversation").addClass("d-none"),$(".js-msgGroup, .js-newMsg").removeClass("d-none"),$(".modal-title").html("Messages")}),$(document).on("click","[data-action=growl]",function(o){o.preventDefault(),$("#app-growl").append('<div class="alert alert-dark alert-dismissible fade show" role="alert"><button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">×</span></button>Click the x on the upper right to dismiss this little thing. Or click growl again to show more growls</div>')}),$(document).on("focus",'[data-action="grow"]',function(){$(window).width()>1e3&&$(this).animate({width:300})}),$(document).on("blur",'[data-action="grow"]',function(){$(window).width()>1e3&&$(this).animate({width:180})}),$(function(){function o(){$(window).scrollTop()>$(window).height()?$(".docs-top").fadeIn():$(".docs-top").fadeOut()}$(".docs-top").length&&(o(),$(window).on("scroll",o))}),$(function(){function o(){e.width()>768?function(){function o(){a.containerTop=$(".docs-content").offset().top-40,a.containerRight=$(".docs-content").offset().left+$(".docs-content").width()+45,n()}function n(){var o=e.scrollTop(),n=Math.max(o-a.containerTop,0);return n?void t.css({position:"fixed",left:a.containerRight,top:40}):($(t.find("li a")[1]).addClass("active"),t.css({position:"",left:"",top:""}))}var a={};o(),$(window).on("resize.theme.nav",o).on("scroll.theme.nav",n),$("body").scrollspy({target:"#markdown-toc"}),setTimeout(function(){$("body").scrollspy("refresh")},1e3)}():(e.off("resize.theme.nav"),e.off("scroll.theme.nav"),t.css({position:"",left:"",top:""}))}var t=$("#markdown-toc");$("#markdown-toc li").addClass("nav-item"),$("#markdown-toc li > a").addClass("nav-link"),$("#markdown-toc li > ul").addClass("nav");var e=$(window);t[0]&&(o(),e.on("resize",o))})}();
var router=function(){"use strict";class t{constructor(){}static showView(t){t.forEach(t=>{t.classList.remove("d-none")})}static hideView(t){t.forEach(function(t){t.classList.add("d-none")})}static navigateTo(t){window.location.hash="#"+t}static initTemplate(t,e){let s=document.querySelector(`#${e}`).content.cloneNode(!0);t.innerHTML="",t.appendChild(s)}static modifyDate(t){return new Date(parseInt(t)).toLocaleDateString()}static modifyDateandTime(t){let e=new Date(parseInt(t));return e.toLocaleDateString()+" | "+e.toLocaleTimeString("ru-RU")}static howTimePassed(t){let e=new Date(parseInt(t));return(new Date).getFullYear()-e.getFullYear()}static checkData(t){return t||""}}class e{constructor(){this.reg=/^[a-z]+([-_]?[a-z0-9]+){0,2}$/i,this.error=null}isValid(t,e){return""==t.value||""==e.value?(this.error="Заполните пустые поля!",!1):t.value.match(this.reg)?!(e.value.length<8)||(this.error="Пароль должен быть от 8 символов!",!1):(this.error="Логин имеет некоректный формат!",!1)}getAlertMsg(){return this.error}}class s{constructor(){this.url="http://localhost:3000/users/"}requestUserLoginData(t,e){return fetch(this.url).then(t=>t.json()).then(s=>{for(let i=0;i<s.length;i++)if(s[i].loginData.login==t&&s[i].loginData.password==e)return s[i];return s.loginData})}getLoginOptions(t,e){let s={login:t,pass:e};return{method:"post",headers:{"Content-type":"application/json; charset=utf-8"},body:JSON.stringify(s)}}getUserInfo(){return localStorage.getItem("userInfo")}saveUserData(t,e){let s={userId:e,isLogged:t};this.setUserInfo(s)}setUserInfo(t){localStorage.setItem("userInfo",JSON.stringify(t))}}class i{constructor(t,e,s,i){this.view=e,this.model=t,this.validator=i,this.utils=s,this.currentLogin=null,this.currentpass=null,this.userMenuSelector="#userMenu"}init(){this.view.init(),this.initListeners(),this.isLogged()&&this.logged()}initListeners(){this.view.goLoginBtn.addEventListener("click",this.goLogin.bind(this))}validateUserData(){this.validator.isValid(this.view.inputLogin,this.view.inputPass)?this.checkLoginData():this.view.showErrorMsg(this.validator.getAlertMsg())}checkLoginData(){let t=this.view.inputLogin.value,e=this.view.inputPass.value;this.model.requestUserLoginData(t,e).then(t=>{t?(this.model.saveUserData(!0,t.userId),this.logged()):this.view.showErrorMsg("Вы ввели несуществующий логин или неверный пароль!")})}goLogin(t){t.preventDefault(),this.view.hideErrorsMsg(),this.validateUserData()}logged(){document.location.href="",this.utils.hideView([this.userMenu])}logout(){this.model.saveUserData(!1),document.location.href="#login"}isLogged(){let t=this.model.getUserInfo();return t&&JSON.parse(t).isLogged}}class a{constructor(t){this.utils=t,this.template=document.querySelector("#login"),this.wrapper=document.querySelector("#wrapper"),this.inputLogin=document.querySelector(".input-login"),this.inputPass=document.querySelector(".input-pass"),this.errorDiv=document.querySelector(".alert"),this.goLoginBtn=document.querySelector(".goLogin"),this.logoutBtn=document.querySelector(".logout"),this.userMenu=document.querySelector("#userMenu")}init(){this.utils.hideView([this.userMenu])}showErrorMsg(t){this.errorDiv.innerHTML=t}hideErrorsMsg(){this.errorDiv.innerHTML=""}}let r=document.querySelector("#wrapper"),n=()=>{let t=localStorage.getItem("userInfo");return t&&JSON.parse(t).isLogged},l={"":{init:()=>{new class{constructor(t,e,s){this.model=t,this.view=e,this.utils=s,this.user=null,this.template=this.view.template.innerHTML}async getAllData(){await this.getMainUserInfo(this.user),await this.getPosts(this.user)}getMainUserInfo(t){return this.model.requestUserInfo(t).then(t=>{this.makeUserDataTemplate(t)})}makeUserDataTemplate(t){let e=this.view.photosTemplate(t.photos);this.template=this.model.makeUserData(this.template,e,t)}getPosts(t){let e="";this.model.requestDashboardPosts(t).then(t=>{t.forEach(t=>{this.model.requestUserInfo(t.userId).then(s=>{e+=this.view.postsTemplate(s.userInfo,this.utils.modifyDateandTime(t.date),t.text),this.view.printPostsAfterLoad(e)})})})}init(){this.user=this.model.getCurrentUser(),this.getAllData().then(t=>{this.view.printUserData(this.template),this.utils.initTemplate(this.view.wrapper,"dashboard"),this.view.init()})}}(new class{constructor(t){this.url="http://localhost:3000/users/",this.utils=t}requestUserInfo(t){return fetch(this.url+t).then(t=>t.json()).then(t=>({userInfo:t.mainInfo,photos:t.photos}))}requestDashboardPosts(t){return fetch(this.url+t).then(t=>t.json()).then(t=>t.dashboardPosts)}makeUserData(t,e,s){return t.replace("{name}",s.userInfo.firstname+" "+s.userInfo.lastname).replace("{avatar}",this.utils.checkData(s.userInfo.avatar)).replace("{wallpaper}",this.utils.checkData(s.userInfo.wallpaper)).replace("{friends}",this.utils.checkData(s.userInfo.friends.length)).replace("{status}",this.utils.checkData(s.userInfo.status)).replace("{city}",this.utils.checkData(s.userInfo.contacts.city)).replace("{job}",this.utils.checkData(s.userInfo.job)).replace("{photos}",this.utils.checkData(e))}getCurrentUser(){return JSON.parse(localStorage.getItem("userInfo")).userId}}(t),new class{constructor(t){this.utils=t,this.wrapper=document.querySelector("#wrapper"),this.template=document.querySelector("#dashboard"),this.postsDivId="posts",this.userMenu=document.querySelector("#userMenu")}init(){this.utils.showView([this.userMenu])}printUserData(t){this.template.innerHTML=t}printPostsAfterLoad(t){document.querySelector("#"+this.postsDivId).innerHTML=t}postsTemplate(t,e,s){return`\n        <li class="rv b agz">\n            <img class="bos vb yb aff" src="${t.avatar}">\n            <div class="rw">\n                <div class="bpb">\n                    <small class="acx axc">${e}</small>\n                    <h6>${t.firstname} ${t.lastname}</h6>\n                </div>\n                <p>${s}</p>\n        </div>\n      </li>`}imagesTemplate(t){return`<div>${t}</div>`}photosTemplate(t){let e="";for(let s=0;s<2;s++)e+=`\n            <div class="fm">\n                <small>${t[s].title}</small>\n                <img src = ${t[s].url} data-width="640" data-height="640" data-action="zoom">\n            </div>\n            `;return e}}(t),t).init()},initied:!1},profile:{init:()=>{new class{constructor(t,e,s){this.model=t,this.view=e,this.utils=s,this.user=null,this.template=this.view.template.innerHTML}async getAllData(){await this.getMainUserInfo(this.user),await this.getFriendsInfo(this.user)}getMainUserInfo(t){return this.model.requestAllUserInfo(t).then(t=>{this.makeUserDataTemplate(t)})}makeUserDataTemplate(t){let e=this.view.languagesTemplate(t.otherInfo.languages),s=this.view.interestsTemplate(t.otherInfo.interests),i=this.view.photosTemplate(t.photos);this.template=this.model.makeUserData(this.template,t,s,e,i)}getFriendsInfo(t){let e="";this.model.requestFriends(t).then(t=>{t.forEach(t=>{this.model.requestAllUserInfo(t).then(t=>{e+=this.view.userTemplate(t.mainInfo),this.view.printFriendsAfterLoad(e)})})})}init(){this.user=this.model.getCurrentUser(),this.getAllData().then(t=>{this.view.printUserData(this.template),this.utils.initTemplate(this.view.wrapper,"profile"),this.view.init()})}}(new class{constructor(t){this.utils=t,this.url="http://localhost:3000/users/"}requestAllUserInfo(t){return fetch(this.url+t).then(t=>t.json())}requestFriends(t){return fetch(this.url+t).then(t=>t.json()).then(t=>t.mainInfo.friends)}makeUserData(t,e,s,i,a){let r=` (${this.utils.howTimePassed(e.mainInfo.birthday)})`;return t.replace("{name}",e.mainInfo.firstname+" "+e.mainInfo.lastname).replace("{avatar}",this.utils.checkData(e.mainInfo.avatar)).replace("{wallpaper}",this.utils.checkData(e.mainInfo.wallpaper)).replace("{status}",this.utils.checkData(e.mainInfo.status)).replace("{birthday}",this.utils.modifyDate(e.mainInfo.birthday)+r).replace("{gender}",this.utils.checkData(e.mainInfo.gender)).replace("{job}",this.utils.checkData(e.mainInfo.job)).replace("{education}",this.utils.checkData(e.otherInfo.education)).replace("{email}",this.utils.checkData(e.mainInfo.contacts.email)).replace("{city}",this.utils.checkData(e.mainInfo.contacts.city)).replace("{telegram}",this.utils.checkData(e.mainInfo.contacts.telegram)).replace("{skype}",this.utils.checkData(e.mainInfo.contacts.skype)).replace("{about}",this.utils.checkData(e.otherInfo.about)).replace("{interests}",this.utils.checkData(s)).replace("{languages}",this.utils.checkData(i)).replace("{photos}",this.utils.checkData(a))}getCurrentUser(){return JSON.parse(localStorage.getItem("userInfo")).userId}}(t),new class{constructor(t){this.utils=t,this.wrapper=document.querySelector("#wrapper"),this.template=document.querySelector("#profile"),this.friendsDivId="friends",this.userMenu=document.querySelector("#userMenu")}init(){this.utils.showView([this.userMenu])}photosTemplate(t){for(let e=0;e<t.length;e++)photosTemplate+=`\n            <div class="fm">\n                <small>${t[e].title}</small>\n                <img src = ${t[e].url} data-width="640" data-height="640" data-action="zoom">\n            </div>\n            `;return""}userTemplate(t){return`<li class="b">\n            <div class="rv ady">\n                <img class="bos us aff" src="${t.avatar}">\n                <div class="rw yd">\n                    <button class="cg nz ok acx">\n                    <span class="h bju"></span> Unfollow\n                    </button>\n                    <strong>${t.firstname} ${t.lastname}</strong> |\n                    <small>${t.contacts.city}</small>\n                </div>\n            </div>\n      </li>`}printFriendsAfterLoad(t){document.querySelector("#"+this.friendsDivId).innerHTML=t}languagesTemplate(t){let e="";for(let s=0;s<t.length;s++)e+=`<li class="cg"><img width = "18" title=" ${t[s].title}" src ="${t[s].ico}"></li>`;return e}interestsTemplate(t){let e="";for(let s=0;s<t.length;s++)e+=`<li class="cg"><img width = "18" src ="${t[s].ico}"> ${t[s].title}</li>`;return e}photosTemplate(t){let e="";for(let s=0;s<t.length;s++)e+=`\n            <div style="width: 49%;margin-bottom: 10px;  display: inline-block; vertical-align: bottom;">\n            <h5>${t[s].title}</h5>\n            <img data-width="640" data-height="400" data-action="zoom" src="${t[s].url}" style="width: 405px; height: 254px;">\n          </div>\n            `;return e}printUserData(t){this.template.innerHTML=t}}(t),t).init()},initied:!1},login:{init:()=>{t.initTemplate(r,"login");let n=new s(t),l=new a(t),o=new e;new i(n,l,t,o).init()},initied:!1},logout:{init:()=>{t.initTemplate(r,"login");let n=new s(t),l=new a(t),o=new e;new i(n,l,t,o).logout()},initied:!1}};return function(){let t=document.location.hash.replace("#","");n()?l[t]&&(l[t].init(),l[t].initied=!0):l.login.init()}}();
var utils=function(){"use strict";return class{constructor(){}static showView(t){t.forEach(t=>{t.classList.remove("d-none")})}static hideView(t){t.forEach(function(t){t.classList.add("d-none")})}static navigateTo(t){window.location.hash="#"+t}static initTemplate(t,e){let a=document.querySelector(`#${e}`).content.cloneNode(!0);t.innerHTML="",t.appendChild(a)}static modifyDate(t){return new Date(parseInt(t)).toLocaleDateString()}static modifyDateandTime(t){let e=new Date(parseInt(t));return e.toLocaleDateString()+" | "+e.toLocaleTimeString("ru-RU")}static howTimePassed(t){let e=new Date(parseInt(t));return(new Date).getFullYear()-e.getFullYear()}static checkData(t){return t||""}}}();
var validator=function(){"use strict";return class{constructor(){this.reg=/^[a-z]+([-_]?[a-z0-9]+){0,2}$/i,this.error=null}isValid(r,t){return""==r.value||""==t.value?(this.error="Заполните пустые поля!",!1):r.value.match(this.reg)?!(t.value.length<8&&(this.error="Пароль должен быть от 8 символов!",1)):(this.error="Логин имеет некоректный формат!",!1)}getAlertMsg(){return this.error}}}();
var dashboardController=function(){"use strict";return class{constructor(t,e,s){this.model=t,this.view=e,this.utils=s,this.user=null,this.template=this.view.template.innerHTML}async getAllData(){await this.getMainUserInfo(this.user),await this.getPosts(this.user)}getMainUserInfo(t){return this.model.requestUserInfo(t).then(t=>{this.makeUserDataTemplate(t)})}makeUserDataTemplate(t){let e=this.view.photosTemplate(t.photos);this.template=this.model.makeUserData(this.template,e,t)}getPosts(t){let e="";this.model.requestDashboardPosts(t).then(t=>{t.forEach(t=>{this.model.requestUserInfo(t.userId).then(s=>{e+=this.view.postsTemplate(s.userInfo,this.utils.modifyDateandTime(t.date),t.text),this.view.printPostsAfterLoad(e)})})})}init(){this.user=this.model.getCurrentUser(),this.getAllData().then(t=>{this.view.printUserData(this.template),this.utils.initTemplate(this.view.wrapper,"dashboard"),this.view.init()})}}}();
var dashboardModel=function(){"use strict";return class{constructor(t){this.url="http://localhost:3000/users/",this.utils=t}requestUserInfo(t){return fetch(this.url+t).then(t=>t.json()).then(t=>({userInfo:t.mainInfo,photos:t.photos}))}requestDashboardPosts(t){return fetch(this.url+t).then(t=>t.json()).then(t=>t.dashboardPosts)}makeUserData(t,e,s){return t.replace("{name}",s.userInfo.firstname+" "+s.userInfo.lastname).replace("{avatar}",this.utils.checkData(s.userInfo.avatar)).replace("{wallpaper}",this.utils.checkData(s.userInfo.wallpaper)).replace("{friends}",this.utils.checkData(s.userInfo.friends.length)).replace("{status}",this.utils.checkData(s.userInfo.status)).replace("{city}",this.utils.checkData(s.userInfo.contacts.city)).replace("{job}",this.utils.checkData(s.userInfo.job)).replace("{photos}",this.utils.checkData(e))}getCurrentUser(){return JSON.parse(localStorage.getItem("userInfo")).userId}}}();
var dashboardView=function(){"use strict";return class{constructor(t){this.utils=t,this.wrapper=document.querySelector("#wrapper"),this.template=document.querySelector("#dashboard"),this.postsDivId="posts",this.userMenu=document.querySelector("#userMenu")}init(){this.utils.showView([this.userMenu])}printUserData(t){this.template.innerHTML=t}printPostsAfterLoad(t){document.querySelector("#"+this.postsDivId).innerHTML=t}postsTemplate(t,s,e){return`\n        <li class="rv b agz">\n            <img class="bos vb yb aff" src="${t.avatar}">\n            <div class="rw">\n                <div class="bpb">\n                    <small class="acx axc">${s}</small>\n                    <h6>${t.firstname} ${t.lastname}</h6>\n                </div>\n                <p>${e}</p>\n        </div>\n      </li>`}imagesTemplate(t){return`<div>${t}</div>`}photosTemplate(t){let s="";for(let e=0;e<2;e++)s+=`\n            <div class="fm">\n                <small>${t[e].title}</small>\n                <img src = ${t[e].url} data-width="640" data-height="640" data-action="zoom">\n            </div>\n            `;return s}}}();
var loginController=function(){"use strict";return class{constructor(i,t,e,s){this.view=t,this.model=i,this.validator=s,this.utils=e,this.currentLogin=null,this.currentpass=null,this.userMenuSelector="#userMenu"}init(){this.view.init(),this.initListeners(),this.isLogged()&&this.logged()}initListeners(){this.view.goLoginBtn.addEventListener("click",this.goLogin.bind(this))}validateUserData(){this.validator.isValid(this.view.inputLogin,this.view.inputPass)?this.checkLoginData():this.view.showErrorMsg(this.validator.getAlertMsg())}checkLoginData(){let i=this.view.inputLogin.value,t=this.view.inputPass.value;this.model.requestUserLoginData(i,t).then(i=>{i?(this.model.saveUserData(!0,i.userId),this.logged()):this.view.showErrorMsg("Вы ввели несуществующий логин или неверный пароль!")})}goLogin(i){i.preventDefault(),this.view.hideErrorsMsg(),this.validateUserData()}logged(){document.location.href="",this.utils.hideView([this.userMenu])}logout(){this.model.saveUserData(!1),document.location.href="#login"}isLogged(){let i=this.model.getUserInfo();return i&&JSON.parse(i).isLogged}}}();
var loginModel=function(){"use strict";return class{constructor(){this.url="http://localhost:3000/users/"}requestUserLoginData(t,e){return fetch(this.url).then(t=>t.json()).then(s=>{for(let r=0;r<s.length;r++)if(s[r].loginData.login==t&&s[r].loginData.password==e)return s[r];return s.loginData})}getLoginOptions(t,e){let s={login:t,pass:e};return{method:"post",headers:{"Content-type":"application/json; charset=utf-8"},body:JSON.stringify(s)}}getUserInfo(){return localStorage.getItem("userInfo")}saveUserData(t,e){let s={userId:e,isLogged:t};this.setUserInfo(s)}setUserInfo(t){localStorage.setItem("userInfo",JSON.stringify(t))}}}();
var loginView=function(){"use strict";return class{constructor(e){this.utils=e,this.template=document.querySelector("#login"),this.wrapper=document.querySelector("#wrapper"),this.inputLogin=document.querySelector(".input-login"),this.inputPass=document.querySelector(".input-pass"),this.errorDiv=document.querySelector(".alert"),this.goLoginBtn=document.querySelector(".goLogin"),this.logoutBtn=document.querySelector(".logout"),this.userMenu=document.querySelector("#userMenu")}init(){this.utils.hideView([this.userMenu])}showErrorMsg(e){this.errorDiv.innerHTML=e}hideErrorsMsg(){this.errorDiv.innerHTML=""}}}();
var profileController=function(){"use strict";return class{constructor(e,t,s){this.model=e,this.view=t,this.utils=s,this.user=null,this.template=this.view.template.innerHTML}async getAllData(){await this.getMainUserInfo(this.user),await this.getFriendsInfo(this.user)}getMainUserInfo(e){return this.model.requestAllUserInfo(e).then(e=>{this.makeUserDataTemplate(e)})}makeUserDataTemplate(e){let t=this.view.languagesTemplate(e.otherInfo.languages),s=this.view.interestsTemplate(e.otherInfo.interests),i=this.view.photosTemplate(e.photos);this.template=this.model.makeUserData(this.template,e,s,t,i)}getFriendsInfo(e){let t="";this.model.requestFriends(e).then(e=>{e.forEach(e=>{this.model.requestAllUserInfo(e).then(e=>{t+=this.view.userTemplate(e.mainInfo),this.view.printFriendsAfterLoad(t)})})})}init(){this.user=this.model.getCurrentUser(),this.getAllData().then(e=>{this.view.printUserData(this.template),this.utils.initTemplate(this.view.wrapper,"profile"),this.view.init()})}}}();
var profileModel=function(){"use strict";return class{constructor(t){this.utils=t,this.url="http://localhost:3000/users/"}requestAllUserInfo(t){return fetch(this.url+t).then(t=>t.json())}requestFriends(t){return fetch(this.url+t).then(t=>t.json()).then(t=>t.mainInfo.friends)}makeUserData(t,e,a,s,i){let c=` (${this.utils.howTimePassed(e.mainInfo.birthday)})`;return t.replace("{name}",e.mainInfo.firstname+" "+e.mainInfo.lastname).replace("{avatar}",this.utils.checkData(e.mainInfo.avatar)).replace("{wallpaper}",this.utils.checkData(e.mainInfo.wallpaper)).replace("{status}",this.utils.checkData(e.mainInfo.status)).replace("{birthday}",this.utils.modifyDate(e.mainInfo.birthday)+c).replace("{gender}",this.utils.checkData(e.mainInfo.gender)).replace("{job}",this.utils.checkData(e.mainInfo.job)).replace("{education}",this.utils.checkData(e.otherInfo.education)).replace("{email}",this.utils.checkData(e.mainInfo.contacts.email)).replace("{city}",this.utils.checkData(e.mainInfo.contacts.city)).replace("{telegram}",this.utils.checkData(e.mainInfo.contacts.telegram)).replace("{skype}",this.utils.checkData(e.mainInfo.contacts.skype)).replace("{about}",this.utils.checkData(e.otherInfo.about)).replace("{interests}",this.utils.checkData(a)).replace("{languages}",this.utils.checkData(s)).replace("{photos}",this.utils.checkData(i))}getCurrentUser(){return JSON.parse(localStorage.getItem("userInfo")).userId}}}();
var profileView=function(){"use strict";return class{constructor(t){this.utils=t,this.wrapper=document.querySelector("#wrapper"),this.template=document.querySelector("#profile"),this.friendsDivId="friends",this.userMenu=document.querySelector("#userMenu")}init(){this.utils.showView([this.userMenu])}photosTemplate(t){for(let e=0;e<t.length;e++)photosTemplate+=`\n            <div class="fm">\n                <small>${t[e].title}</small>\n                <img src = ${t[e].url} data-width="640" data-height="640" data-action="zoom">\n            </div>\n            `;return""}userTemplate(t){return`<li class="b">\n            <div class="rv ady">\n                <img class="bos us aff" src="${t.avatar}">\n                <div class="rw yd">\n                    <button class="cg nz ok acx">\n                    <span class="h bju"></span> Unfollow\n                    </button>\n                    <strong>${t.firstname} ${t.lastname}</strong> |\n                    <small>${t.contacts.city}</small>\n                </div>\n            </div>\n      </li>`}printFriendsAfterLoad(t){document.querySelector("#"+this.friendsDivId).innerHTML=t}languagesTemplate(t){let e="";for(let i=0;i<t.length;i++)e+=`<li class="cg"><img width = "18" title=" ${t[i].title}" src ="${t[i].ico}"></li>`;return e}interestsTemplate(t){let e="";for(let i=0;i<t.length;i++)e+=`<li class="cg"><img width = "18" src ="${t[i].ico}"> ${t[i].title}</li>`;return e}photosTemplate(t){let e="";for(let i=0;i<t.length;i++)e+=`\n            <div style="width: 49%;margin-bottom: 10px;  display: inline-block; vertical-align: bottom;">\n            <h5>${t[i].title}</h5>\n            <img data-width="640" data-height="400" data-action="zoom" src="${t[i].url}" style="width: 405px; height: 254px;">\n          </div>\n            `;return e}printUserData(t){this.template.innerHTML=t}}}();
!function(){"use strict";class t{constructor(){}static showView(t){t.forEach(t=>{t.classList.remove("d-none")})}static hideView(t){t.forEach(function(t){t.classList.add("d-none")})}static navigateTo(t){window.location.hash="#"+t}static initTemplate(t,e){let s=document.querySelector(`#${e}`).content.cloneNode(!0);t.innerHTML="",t.appendChild(s)}static modifyDate(t){return new Date(parseInt(t)).toLocaleDateString()}static modifyDateandTime(t){let e=new Date(parseInt(t));return e.toLocaleDateString()+" | "+e.toLocaleTimeString("ru-RU")}static howTimePassed(t){let e=new Date(parseInt(t));return(new Date).getFullYear()-e.getFullYear()}static checkData(t){return t||""}}class e{constructor(){this.reg=/^[a-z]+([-_]?[a-z0-9]+){0,2}$/i,this.error=null}isValid(t,e){return""==t.value||""==e.value?(this.error="Заполните пустые поля!",!1):t.value.match(this.reg)?!(e.value.length<8)||(this.error="Пароль должен быть от 8 символов!",!1):(this.error="Логин имеет некоректный формат!",!1)}getAlertMsg(){return this.error}}class s{constructor(){this.url="http://localhost:3000/users/"}requestUserLoginData(t,e){return fetch(this.url).then(t=>t.json()).then(s=>{for(let i=0;i<s.length;i++)if(s[i].loginData.login==t&&s[i].loginData.password==e)return s[i];return s.loginData})}getLoginOptions(t,e){let s={login:t,pass:e};return{method:"post",headers:{"Content-type":"application/json; charset=utf-8"},body:JSON.stringify(s)}}getUserInfo(){return localStorage.getItem("userInfo")}saveUserData(t,e){let s={userId:e,isLogged:t};this.setUserInfo(s)}setUserInfo(t){localStorage.setItem("userInfo",JSON.stringify(t))}}class i{constructor(t,e,s,i){this.view=e,this.model=t,this.validator=i,this.utils=s,this.currentLogin=null,this.currentpass=null,this.userMenuSelector="#userMenu"}init(){this.view.init(),this.initListeners(),this.isLogged()&&this.logged()}initListeners(){this.view.goLoginBtn.addEventListener("click",this.goLogin.bind(this))}validateUserData(){this.validator.isValid(this.view.inputLogin,this.view.inputPass)?this.checkLoginData():this.view.showErrorMsg(this.validator.getAlertMsg())}checkLoginData(){let t=this.view.inputLogin.value,e=this.view.inputPass.value;this.model.requestUserLoginData(t,e).then(t=>{t?(this.model.saveUserData(!0,t.userId),this.logged()):this.view.showErrorMsg("Вы ввели несуществующий логин или неверный пароль!")})}goLogin(t){t.preventDefault(),this.view.hideErrorsMsg(),this.validateUserData()}logged(){document.location.href="",this.utils.hideView([this.userMenu])}logout(){this.model.saveUserData(!1),document.location.href="#login"}isLogged(){let t=this.model.getUserInfo();return t&&JSON.parse(t).isLogged}}class a{constructor(t){this.utils=t,this.template=document.querySelector("#login"),this.wrapper=document.querySelector("#wrapper"),this.inputLogin=document.querySelector(".input-login"),this.inputPass=document.querySelector(".input-pass"),this.errorDiv=document.querySelector(".alert"),this.goLoginBtn=document.querySelector(".goLogin"),this.logoutBtn=document.querySelector(".logout"),this.userMenu=document.querySelector("#userMenu")}init(){this.utils.hideView([this.userMenu])}showErrorMsg(t){this.errorDiv.innerHTML=t}hideErrorsMsg(){this.errorDiv.innerHTML=""}}let r=document.querySelector("#wrapper"),n=()=>{let t=localStorage.getItem("userInfo");return t&&JSON.parse(t).isLogged},l={"":{init:()=>{new class{constructor(t,e,s){this.model=t,this.view=e,this.utils=s,this.user=null,this.template=this.view.template.innerHTML}async getAllData(){await this.getMainUserInfo(this.user),await this.getPosts(this.user)}getMainUserInfo(t){return this.model.requestUserInfo(t).then(t=>{this.makeUserDataTemplate(t)})}makeUserDataTemplate(t){let e=this.view.photosTemplate(t.photos);this.template=this.model.makeUserData(this.template,e,t)}getPosts(t){let e="";this.model.requestDashboardPosts(t).then(t=>{t.forEach(t=>{this.model.requestUserInfo(t.userId).then(s=>{e+=this.view.postsTemplate(s.userInfo,this.utils.modifyDateandTime(t.date),t.text),this.view.printPostsAfterLoad(e)})})})}init(){this.user=this.model.getCurrentUser(),this.getAllData().then(t=>{this.view.printUserData(this.template),this.utils.initTemplate(this.view.wrapper,"dashboard"),this.view.init()})}}(new class{constructor(t){this.url="http://localhost:3000/users/",this.utils=t}requestUserInfo(t){return fetch(this.url+t).then(t=>t.json()).then(t=>({userInfo:t.mainInfo,photos:t.photos}))}requestDashboardPosts(t){return fetch(this.url+t).then(t=>t.json()).then(t=>t.dashboardPosts)}makeUserData(t,e,s){return t.replace("{name}",s.userInfo.firstname+" "+s.userInfo.lastname).replace("{avatar}",this.utils.checkData(s.userInfo.avatar)).replace("{wallpaper}",this.utils.checkData(s.userInfo.wallpaper)).replace("{friends}",this.utils.checkData(s.userInfo.friends.length)).replace("{status}",this.utils.checkData(s.userInfo.status)).replace("{city}",this.utils.checkData(s.userInfo.contacts.city)).replace("{job}",this.utils.checkData(s.userInfo.job)).replace("{photos}",this.utils.checkData(e))}getCurrentUser(){return JSON.parse(localStorage.getItem("userInfo")).userId}}(t),new class{constructor(t){this.utils=t,this.wrapper=document.querySelector("#wrapper"),this.template=document.querySelector("#dashboard"),this.postsDivId="posts",this.userMenu=document.querySelector("#userMenu")}init(){this.utils.showView([this.userMenu])}printUserData(t){this.template.innerHTML=t}printPostsAfterLoad(t){document.querySelector("#"+this.postsDivId).innerHTML=t}postsTemplate(t,e,s){return`\n        <li class="rv b agz">\n            <img class="bos vb yb aff" src="${t.avatar}">\n            <div class="rw">\n                <div class="bpb">\n                    <small class="acx axc">${e}</small>\n                    <h6>${t.firstname} ${t.lastname}</h6>\n                </div>\n                <p>${s}</p>\n        </div>\n      </li>`}imagesTemplate(t){return`<div>${t}</div>`}photosTemplate(t){let e="";for(let s=0;s<2;s++)e+=`\n            <div class="fm">\n                <small>${t[s].title}</small>\n                <img src = ${t[s].url} data-width="640" data-height="640" data-action="zoom">\n            </div>\n            `;return e}}(t),t).init()},initied:!1},profile:{init:()=>{new class{constructor(t,e,s){this.model=t,this.view=e,this.utils=s,this.user=null,this.template=this.view.template.innerHTML}async getAllData(){await this.getMainUserInfo(this.user),await this.getFriendsInfo(this.user)}getMainUserInfo(t){return this.model.requestAllUserInfo(t).then(t=>{this.makeUserDataTemplate(t)})}makeUserDataTemplate(t){let e=this.view.languagesTemplate(t.otherInfo.languages),s=this.view.interestsTemplate(t.otherInfo.interests),i=this.view.photosTemplate(t.photos);this.template=this.model.makeUserData(this.template,t,s,e,i)}getFriendsInfo(t){let e="";this.model.requestFriends(t).then(t=>{t.forEach(t=>{this.model.requestAllUserInfo(t).then(t=>{e+=this.view.userTemplate(t.mainInfo),this.view.printFriendsAfterLoad(e)})})})}init(){this.user=this.model.getCurrentUser(),this.getAllData().then(t=>{this.view.printUserData(this.template),this.utils.initTemplate(this.view.wrapper,"profile"),this.view.init()})}}(new class{constructor(t){this.utils=t,this.url="http://localhost:3000/users/"}requestAllUserInfo(t){return fetch(this.url+t).then(t=>t.json())}requestFriends(t){return fetch(this.url+t).then(t=>t.json()).then(t=>t.mainInfo.friends)}makeUserData(t,e,s,i,a){let r=` (${this.utils.howTimePassed(e.mainInfo.birthday)})`;return t.replace("{name}",e.mainInfo.firstname+" "+e.mainInfo.lastname).replace("{avatar}",this.utils.checkData(e.mainInfo.avatar)).replace("{wallpaper}",this.utils.checkData(e.mainInfo.wallpaper)).replace("{status}",this.utils.checkData(e.mainInfo.status)).replace("{birthday}",this.utils.modifyDate(e.mainInfo.birthday)+r).replace("{gender}",this.utils.checkData(e.mainInfo.gender)).replace("{job}",this.utils.checkData(e.mainInfo.job)).replace("{education}",this.utils.checkData(e.otherInfo.education)).replace("{email}",this.utils.checkData(e.mainInfo.contacts.email)).replace("{city}",this.utils.checkData(e.mainInfo.contacts.city)).replace("{telegram}",this.utils.checkData(e.mainInfo.contacts.telegram)).replace("{skype}",this.utils.checkData(e.mainInfo.contacts.skype)).replace("{about}",this.utils.checkData(e.otherInfo.about)).replace("{interests}",this.utils.checkData(s)).replace("{languages}",this.utils.checkData(i)).replace("{photos}",this.utils.checkData(a))}getCurrentUser(){return JSON.parse(localStorage.getItem("userInfo")).userId}}(t),new class{constructor(t){this.utils=t,this.wrapper=document.querySelector("#wrapper"),this.template=document.querySelector("#profile"),this.friendsDivId="friends",this.userMenu=document.querySelector("#userMenu")}init(){this.utils.showView([this.userMenu])}photosTemplate(t){for(let e=0;e<t.length;e++)photosTemplate+=`\n            <div class="fm">\n                <small>${t[e].title}</small>\n                <img src = ${t[e].url} data-width="640" data-height="640" data-action="zoom">\n            </div>\n            `;return""}userTemplate(t){return`<li class="b">\n            <div class="rv ady">\n                <img class="bos us aff" src="${t.avatar}">\n                <div class="rw yd">\n                    <button class="cg nz ok acx">\n                    <span class="h bju"></span> Unfollow\n                    </button>\n                    <strong>${t.firstname} ${t.lastname}</strong> |\n                    <small>${t.contacts.city}</small>\n                </div>\n            </div>\n      </li>`}printFriendsAfterLoad(t){document.querySelector("#"+this.friendsDivId).innerHTML=t}languagesTemplate(t){let e="";for(let s=0;s<t.length;s++)e+=`<li class="cg"><img width = "18" title=" ${t[s].title}" src ="${t[s].ico}"></li>`;return e}interestsTemplate(t){let e="";for(let s=0;s<t.length;s++)e+=`<li class="cg"><img width = "18" src ="${t[s].ico}"> ${t[s].title}</li>`;return e}photosTemplate(t){let e="";for(let s=0;s<t.length;s++)e+=`\n            <div style="width: 49%;margin-bottom: 10px;  display: inline-block; vertical-align: bottom;">\n            <h5>${t[s].title}</h5>\n            <img data-width="640" data-height="400" data-action="zoom" src="${t[s].url}" style="width: 405px; height: 254px;">\n          </div>\n            `;return e}printUserData(t){this.template.innerHTML=t}}(t),t).init()},initied:!1},login:{init:()=>{t.initTemplate(r,"login");let n=new s(t),l=new a(t),o=new e;new i(n,l,t,o).init()},initied:!1},logout:{init:()=>{t.initTemplate(r,"login");let n=new s(t),l=new a(t),o=new e;new i(n,l,t,o).logout()},initied:!1}};function o(){let t=document.location.hash.replace("#","");n()?l[t]&&(l[t].init(),l[t].initied=!0):l.login.init()}window.addEventListener("load",o),window.addEventListener("hashchange",o)}();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcGxpY2F0aW9uLmpzIiwidXRpbHMuanMiLCJ2YWxpZGF0b3IuanMiLCIuLi9sb2dpbi9sb2dpbi5tb2RlbC5qcyIsIi4uL2xvZ2luL2xvZ2luLmNvbnRyb2xsZXIuanMiLCIuLi9sb2dpbi9sb2dpbi52aWV3LmpzIiwicm91dGVyLmpzIiwiLi4vZGFzaGJvYXJkL2Rhc2hib2FyZC5jb250cm9sbGVyLmpzIiwiLi4vZGFzaGJvYXJkL2Rhc2hib2FyZC5tb2RlbC5qcyIsIi4uL2Rhc2hib2FyZC9kYXNoYm9hcmQudmlldy5qcyIsIi4uL3Byb2ZpbGUvcHJvZmlsZS5jb250cm9sbGVyLmpzIiwiLi4vcHJvZmlsZS9wcm9maWxlLm1vZGVsLmpzIiwiLi4vcHJvZmlsZS9wcm9maWxlLnZpZXcuanMiLCJkYXNoYm9hcmQuY29udHJvbGxlci5qcyIsImRhc2hib2FyZC5tb2RlbC5qcyIsImRhc2hib2FyZC52aWV3LmpzIiwibG9naW4uY29udHJvbGxlci5qcyIsImxvZ2luLm1vZGVsLmpzIiwibG9naW4udmlldy5qcyIsInByb2ZpbGUuY29udHJvbGxlci5qcyIsInByb2ZpbGUubW9kZWwuanMiLCJwcm9maWxlLnZpZXcuanMiLCJnZW5lcmFsL3V0aWxzLmpzIiwiZ2VuZXJhbC92YWxpZGF0b3IuanMiLCJsb2dpbi9sb2dpbi5tb2RlbC5qcyIsImxvZ2luL2xvZ2luLmNvbnRyb2xsZXIuanMiLCJsb2dpbi9sb2dpbi52aWV3LmpzIiwiZ2VuZXJhbC9yb3V0ZXIuanMiLCJkYXNoYm9hcmQvZGFzaGJvYXJkLmNvbnRyb2xsZXIuanMiLCJkYXNoYm9hcmQvZGFzaGJvYXJkLm1vZGVsLmpzIiwiZGFzaGJvYXJkL2Rhc2hib2FyZC52aWV3LmpzIiwicHJvZmlsZS9wcm9maWxlLmNvbnRyb2xsZXIuanMiLCJwcm9maWxlL3Byb2ZpbGUubW9kZWwuanMiLCJwcm9maWxlL3Byb2ZpbGUudmlldy5qcyIsImFwcC5qcyJdLCJuYW1lcyI6WyIkaW5wdXQiLCIkIiwiZG9jdW1lbnQiLCJvbiIsImFkZENsYXNzIiwicmVtb3ZlQ2xhc3MiLCJodG1sIiwiaW5zZXJ0QmVmb3JlIiwibyIsImxlbmd0aCIsIndpbmRvdyIsIndpZHRoIiwib2Zmc2V0IiwibGVmdCIsIm91dGVyV2lkdGgiLCJ0IiwiZGF0YSIsImNvbmZpZyIsInZpZXdwb3J0IiwicGFkZGluZyIsInBvcG92ZXIiLCJjbG9uZSIsInN0b3BQcm9wYWdhdGlvbiIsImdldFRpcEVsZW1lbnQiLCJoYXNDbGFzcyIsIm9mZiIsInNldFRpbWVvdXQiLCJvbmUiLCJyZW1vdmUiLCJwcmV2ZW50RGVmYXVsdCIsImFwcGVuZCIsInRoaXMiLCJhbmltYXRlIiwic2Nyb2xsVG9wIiwiaGVpZ2h0IiwiZmFkZUluIiwiZmFkZU91dCIsImNvbnRhaW5lclRvcCIsInRvcCIsImUiLCJjb250YWluZXJSaWdodCIsImEiLCJNYXRoIiwibWF4IiwibiIsImNzcyIsImZpbmQiLCJzY3JvbGxzcHkiLCJVdGlscyIsImVsZW0iLCJmb3JFYWNoIiwiaXRlbSIsImNsYXNzTGlzdCIsImFkZCIsInJvdXRlTmFtZSIsImxvY2F0aW9uIiwiaGFzaCIsIndyYXBwZXJEaXYiLCJ0ZW1wbGF0ZUlkIiwidGVtcENsb25lIiwicXVlcnlTZWxlY3RvciIsImNvbnRlbnQiLCJjbG9uZU5vZGUiLCJpbm5lckhUTUwiLCJhcHBlbmRDaGlsZCIsInNlY29uZHMiLCJEYXRlIiwicGFyc2VJbnQiLCJ0b0xvY2FsZURhdGVTdHJpbmciLCJkYXRlIiwidG9Mb2NhbGVUaW1lU3RyaW5nIiwiZ2V0RnVsbFllYXIiLCJWYWxpZGF0b3IiLCJyZWciLCJlcnJvciIsImxvZ2luIiwicGFzcyIsInZhbHVlIiwibWF0Y2giLCJMb2dpbk1vZGVsIiwidXJsIiwiZmV0Y2giLCJ0aGVuIiwicmVzcG9uY2UiLCJqc29uIiwidXNlcnMiLCJpIiwibG9naW5EYXRhIiwicGFzc3dvcmQiLCJib2R5IiwiSlNPTiIsInN0cmluZ2lmeSIsImxvY2FsU3RvcmFnZSIsImdldEl0ZW0iLCJsb2dnZWRTdGF0dXMiLCJ1c2VySWQiLCJzZXRVc2VySW5mbyIsInNldEl0ZW0iLCJMb2dpbkNvbnRyb2xsZXIiLCJtb2RlbCIsInZpZXciLCJ1dGlscyIsInZhbGlkYXRvciIsImN1cnJlbnRMb2dpbiIsImN1cnJlbnRwYXNzIiwidXNlck1lbnVTZWxlY3RvciIsImluaXQiLCJpbml0TGlzdGVuZXJzIiwiaXNMb2dnZWQiLCJsb2dnZWQiLCJnb0xvZ2luQnRuIiwiYWRkRXZlbnRMaXN0ZW5lciIsImdvTG9naW4iLCJiaW5kIiwiaXNWYWxpZCIsImlucHV0TG9naW4iLCJpbnB1dFBhc3MiLCJjaGVja0xvZ2luRGF0YSIsInNob3dFcnJvck1zZyIsImdldEFsZXJ0TXNnIiwicmVxdWVzdFVzZXJMb2dpbkRhdGEiLCJ1c2VyIiwic2F2ZVVzZXJEYXRhIiwiaGlkZUVycm9yc01zZyIsInZhbGlkYXRlVXNlckRhdGEiLCJocmVmIiwiaGlkZVZpZXciLCJ1c2VyTWVudSIsImdldFVzZXJJbmZvIiwicGFyc2UiLCJMb2dpblZpZXciLCJ0ZW1wbGF0ZSIsIndyYXBwZXIiLCJlcnJvckRpdiIsImxvZ291dEJ0biIsIm1zZyIsInJvdXRlQ29uZmlnIiwiZ2V0TWFpblVzZXJJbmZvIiwiZ2V0UG9zdHMiLCJyZXF1ZXN0VXNlckluZm8iLCJtYWtlVXNlckRhdGFUZW1wbGF0ZSIsInVzZXJEYXRhIiwicGhvdG9zVGVtcCIsInBob3Rvc1RlbXBsYXRlIiwicGhvdG9zIiwibWFrZVVzZXJEYXRhIiwicG9zdHNUZW1wIiwicmVxdWVzdERhc2hib2FyZFBvc3RzIiwicG9zdCIsInBvc3RzVGVtcGxhdGUiLCJ1c2VySW5mbyIsIm1vZGlmeURhdGVhbmRUaW1lIiwidGV4dCIsInByaW50UG9zdHNBZnRlckxvYWQiLCJnZXRDdXJyZW50VXNlciIsImdldEFsbERhdGEiLCJyZXNwb25zZSIsInByaW50VXNlckRhdGEiLCJpbml0VGVtcGxhdGUiLCJpZCIsIm1haW5JbmZvIiwiZGFzaGJvYXJkUG9zdHMiLCJyZXBsYWNlIiwiZmlyc3RuYW1lIiwibGFzdG5hbWUiLCJjaGVja0RhdGEiLCJhdmF0YXIiLCJ3YWxscGFwZXIiLCJmcmllbmRzIiwic3RhdHVzIiwiY29udGFjdHMiLCJjaXR5Iiwiam9iIiwicG9zdHNEaXZJZCIsInNob3dWaWV3IiwiaW1nIiwidGl0bGUiLCJnZXRGcmllbmRzSW5mbyIsInJlcXVlc3RBbGxVc2VySW5mbyIsImxhbmdUZW1wIiwibGFuZ3VhZ2VzVGVtcGxhdGUiLCJvdGhlckluZm8iLCJsYW5ndWFnZXMiLCJpbnRlcmVzdHNUZW1wIiwiaW50ZXJlc3RzVGVtcGxhdGUiLCJpbnRlcmVzdHMiLCJyZXF1ZXN0RnJpZW5kcyIsInVzZXJUZW1wbGF0ZSIsInByaW50RnJpZW5kc0FmdGVyTG9hZCIsImludGVyZXN0VGVtcGxhdGUiLCJhZ2UiLCJob3dUaW1lUGFzc2VkIiwiYmlydGhkYXkiLCJtb2RpZnlEYXRlIiwiZ2VuZGVyIiwiZWR1Y2F0aW9uIiwiZW1haWwiLCJ0ZWxlZ3JhbSIsInNreXBlIiwiYWJvdXQiLCJmcmllbmRzRGl2SWQiLCJ0ZW1wIiwiaWNvIiwibG9nb3V0Iiwicm91dGUiLCJpbml0aWVkIiwidXBkYXRlUm91dGUiXSwibWFwcGluZ3MiOiJ5QkFBQSxJQUFJQSxFQUFTQyxFQUFFLGdHQUNmQSxFQUFFQyxVQUFVQyxHQUFHLFFBQVMsZUFBZ0IsYUFDbEMsNEJBQTRCQyxTQUFTLFVBQVdILEVBQUUsb0JBQW9CSSxZQUFZLFVBQVdKLEVBQUUsZ0JBQWdCSyxLQUFLLDRDQUE2Q04sRUFBT08sYUFBYSxtQkFDdkxOLEVBQUUsb0JBQ09PLFdBQ0VQLEVBQUUsMkJBQTJCUSxPQUFTUixFQUFFUyxRQUFRQyxTQUFXVixFQUFFLDJCQUEyQlcsU0FBU0MsS0FBT1osRUFBRSwyQkFBMkJhLGNBQWdCLElBRTlKSixRQUFRUCxHQUFHLFNBQVUsZUFDZlksRUFBSWQsRUFBRSwyQkFBMkJlLEtBQUssa0JBQ3BDRCxFQUFFRSxPQUFPQyxTQUFTQyxRQUFVWCxPQUNsQ1AsRUFBRSwyQkFBMkJtQixrQkFDbkIsaUlBQ0gsU0FD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aXYgY2xhc3M9XCJtb2RhbC1ib2R5XCI+PGlucHV0IHR5cGU9XCJ0ZXh0XCIgY2xhc3M9XCJmb3JtLWNvbnRyb2xcIiBwbGFjZWhvbGRlcj1cIk1lc3NhZ2VcIj48L2Rpdj4nKTtcclxuJChkb2N1bWVudCkub24oXCJjbGlja1wiLCBcIi5qcy1tc2dHcm91cFwiLCBmdW5jdGlvbigpIHtcclxuICAgICQoXCIuanMtbXNnR3JvdXAsIC5qcy1uZXdNc2dcIikuYWRkQ2xhc3MoXCJkLW5vbmVcIiksICQoXCIuanMtY29udmVyc2F0aW9uXCIpLnJlbW92ZUNsYXNzKFwiZC1ub25lXCIpLCAkKFwiLm1vZGFsLXRpdGxlXCIpLmh0bWwoJzxhIGhyZWY9XCIjXCIgY2xhc3M9XCJqcy1nb3RvTXNnc1wiPkJhY2s8L2E+JyksICRpbnB1dC5pbnNlcnRCZWZvcmUoXCIuanMtbW9kYWxCb2R5XCIpXHJcbn0pLCAkKGZ1bmN0aW9uKCkge1xyXG4gICAgZnVuY3Rpb24gbygpIHtcclxuICAgICAgICByZXR1cm4gJCgnW2RhdGEtdG9nZ2xlPVwicG9wb3ZlclwiXScpLmxlbmd0aCA/ICQod2luZG93KS53aWR0aCgpIC0gKCQoJ1tkYXRhLXRvZ2dsZT1cInBvcG92ZXJcIl0nKS5vZmZzZXQoKS5sZWZ0ICsgJCgnW2RhdGEtdG9nZ2xlPVwicG9wb3ZlclwiXScpLm91dGVyV2lkdGgoKSkgOiAwXHJcbiAgICB9XHJcbiAgICAkKHdpbmRvdykub24oXCJyZXNpemVcIiwgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgdmFyIHQgPSAkKCdbZGF0YS10b2dnbGU9XCJwb3BvdmVyXCJdJykuZGF0YShcImJzLnBvcG92ZXJcIik7XHJcbiAgICAgICAgdCAmJiAodC5jb25maWcudmlld3BvcnQucGFkZGluZyA9IG8oKSlcclxuICAgIH0pLCAkKCdbZGF0YS10b2dnbGU9XCJwb3BvdmVyXCJdJykucG9wb3Zlcih7XHJcbiAgICAgICAgdGVtcGxhdGU6ICc8ZGl2IGNsYXNzPVwicG9wb3ZlclwiIHJvbGU9XCJ0b29sdGlwXCI+PGRpdiBjbGFzcz1cImFycm93XCI+PC9kaXY+PGRpdiBjbGFzcz1cInBvcG92ZXItYm9keSBwb3BvdmVyLWNvbnRlbnQgcHgtMFwiPjwvZGl2PjwvZGl2PicsXHJcbiAgICAgICAgdGl0bGU6IFwiXCIsXHJcbiAgICAgICAgaHRtbDogITAsXHJcbiAgICAgICAgdHJpZ2dlcjogXCJtYW51YWxcIixcclxuICAgICAgICBwbGFjZW1lbnQ6IFwiYm90dG9tXCIsXHJcbiAgICAgICAgdmlld3BvcnQ6IHtcclxuICAgICAgICAgICAgc2VsZWN0b3I6IFwiYm9keVwiLFxyXG4gICAgICAgICAgICBwYWRkaW5nOiBvKClcclxuICAgICAgICB9LFxyXG4gICAgICAgIGNvbnRlbnQ6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICB2YXIgbyA9ICQoXCIjanMtcG9wb3ZlckNvbnRlbnRcIikuY2xvbmUoKTtcclxuICAgICAgICAgICAgcmV0dXJuICc8dWwgY2xhc3M9XCJuYXYgbmF2LXBpbGxzIG5hdi1zdGFja2VkIGZsZXgtY29sdW1uXCIgc3R5bGU9XCJ3aWR0aDogMTIwcHhcIj4nICsgby5odG1sKCkgKyBcIjwvdWw+XCJcclxuICAgICAgICB9XHJcbiAgICB9KSwgJCgnW2RhdGEtdG9nZ2xlPVwicG9wb3ZlclwiXScpLm9uKFwiY2xpY2tcIiwgZnVuY3Rpb24obykge1xyXG4gICAgICAgIG8uc3RvcFByb3BhZ2F0aW9uKCksICQoJCgnW2RhdGEtdG9nZ2xlPVwicG9wb3ZlclwiXScpLmRhdGEoXCJicy5wb3BvdmVyXCIpLmdldFRpcEVsZW1lbnQoKSkuaGFzQ2xhc3MoXCJpblwiKSA/ICgkKCdbZGF0YS10b2dnbGU9XCJwb3BvdmVyXCJdJykucG9wb3ZlcihcImhpZGVcIiksICQoZG9jdW1lbnQpLm9mZihcImNsaWNrLmFwcC5wb3BvdmVyXCIpKSA6ICgkKCdbZGF0YS10b2dnbGU9XCJwb3BvdmVyXCJdJykucG9wb3ZlcihcInNob3dcIiksIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICQoZG9jdW1lbnQpLm9uZShcImNsaWNrLmFwcC5wb3BvdmVyXCIsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgJCgnW2RhdGEtdG9nZ2xlPVwicG9wb3ZlclwiXScpLnBvcG92ZXIoXCJoaWRlXCIpXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfSwgMSkpXHJcbiAgICB9KVxyXG59KSwgJChkb2N1bWVudCkub24oXCJjbGlja1wiLCBcIi5qcy1nb3RvTXNnc1wiLCBmdW5jdGlvbigpIHtcclxuICAgICRpbnB1dC5yZW1vdmUoKSwgJChcIi5qcy1jb252ZXJzYXRpb25cIikuYWRkQ2xhc3MoXCJkLW5vbmVcIiksICQoXCIuanMtbXNnR3JvdXAsIC5qcy1uZXdNc2dcIikucmVtb3ZlQ2xhc3MoXCJkLW5vbmVcIiksICQoXCIubW9kYWwtdGl0bGVcIikuaHRtbChcIk1lc3NhZ2VzXCIpXHJcbn0pLCAkKGRvY3VtZW50KS5vbihcImNsaWNrXCIsIFwiW2RhdGEtYWN0aW9uPWdyb3dsXVwiLCBmdW5jdGlvbihvKSB7XHJcbiAgICBvLnByZXZlbnREZWZhdWx0KCksICQoXCIjYXBwLWdyb3dsXCIpLmFwcGVuZCgnPGRpdiBjbGFzcz1cImFsZXJ0IGFsZXJ0LWRhcmsgYWxlcnQtZGlzbWlzc2libGUgZmFkZSBzaG93XCIgcm9sZT1cImFsZXJ0XCI+PGJ1dHRvbiB0eXBlPVwiYnV0dG9uXCIgY2xhc3M9XCJjbG9zZVwiIGRhdGEtZGlzbWlzcz1cImFsZXJ0XCIgYXJpYS1sYWJlbD1cIkNsb3NlXCI+PHNwYW4gYXJpYS1oaWRkZW49XCJ0cnVlXCI+w5c8L3NwYW4+PC9idXR0b24+Q2xpY2sgdGhlIHggb24gdGhlIHVwcGVyIHJpZ2h0IHRvIGRpc21pc3MgdGhpcyBsaXR0bGUgdGhpbmcuIE9yIGNsaWNrIGdyb3dsIGFnYWluIHRvIHNob3cgbW9yZSBncm93bHM8L2Rpdj4nKVxyXG59KSwgJChkb2N1bWVudCkub24oXCJmb2N1c1wiLCAnW2RhdGEtYWN0aW9uPVwiZ3Jvd1wiXScsIGZ1bmN0aW9uKCkge1xyXG4gICAgJCh3aW5kb3cpLndpZHRoKCkgPiAxZTMgJiYgJCh0aGlzKS5hbmltYXRlKHtcclxuICAgICAgICB3aWR0aDogMzAwXHJcbiAgICB9KVxyXG59KSwgJChkb2N1bWVudCkub24oXCJibHVyXCIsICdbZGF0YS1hY3Rpb249XCJncm93XCJdJywgZnVuY3Rpb24oKSB7XHJcbiAgICBpZiAoJCh3aW5kb3cpLndpZHRoKCkgPiAxZTMpIHtcclxuICAgICAgICAkKHRoaXMpLmFuaW1hdGUoe1xyXG4gICAgICAgICAgICB3aWR0aDogMTgwXHJcbiAgICAgICAgfSlcclxuICAgIH1cclxufSksICQoZnVuY3Rpb24oKSB7XHJcbiAgICBmdW5jdGlvbiBvKCkge1xyXG4gICAgICAgICQod2luZG93KS5zY3JvbGxUb3AoKSA+ICQod2luZG93KS5oZWlnaHQoKSA/ICQoXCIuZG9jcy10b3BcIikuZmFkZUluKCkgOiAkKFwiLmRvY3MtdG9wXCIpLmZhZGVPdXQoKVxyXG4gICAgfVxyXG4gICAgJChcIi5kb2NzLXRvcFwiKS5sZW5ndGggJiYgKG8oKSwgJCh3aW5kb3cpLm9uKFwic2Nyb2xsXCIsIG8pKVxyXG59KSwgJChmdW5jdGlvbigpIHtcclxuICAgIGZ1bmN0aW9uIG8oKSB7XHJcbiAgICAgICAgYS53aWR0aCgpID4gNzY4ID8gZSgpIDogdCgpXHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gdCgpIHtcclxuICAgICAgICBhLm9mZihcInJlc2l6ZS50aGVtZS5uYXZcIiksIGEub2ZmKFwic2Nyb2xsLnRoZW1lLm5hdlwiKSwgbi5jc3Moe1xyXG4gICAgICAgICAgICBwb3NpdGlvbjogXCJcIixcclxuICAgICAgICAgICAgbGVmdDogXCJcIixcclxuICAgICAgICAgICAgdG9wOiBcIlwiXHJcbiAgICAgICAgfSlcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBlKCkge1xyXG4gICAgICAgIGZ1bmN0aW9uIG8oKSB7XHJcbiAgICAgICAgICAgIGUuY29udGFpbmVyVG9wID0gJChcIi5kb2NzLWNvbnRlbnRcIikub2Zmc2V0KCkudG9wIC0gNDAsIGUuY29udGFpbmVyUmlnaHQgPSAkKFwiLmRvY3MtY29udGVudFwiKS5vZmZzZXQoKS5sZWZ0ICsgJChcIi5kb2NzLWNvbnRlbnRcIikud2lkdGgoKSArIDQ1LCB0KClcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIHQoKSB7XHJcbiAgICAgICAgICAgIHZhciBvID0gYS5zY3JvbGxUb3AoKSxcclxuICAgICAgICAgICAgICAgIHQgPSBNYXRoLm1heChvIC0gZS5jb250YWluZXJUb3AsIDApO1xyXG4gICAgICAgICAgICByZXR1cm4gdCA/IHZvaWQgbi5jc3Moe1xyXG4gICAgICAgICAgICAgICAgcG9zaXRpb246IFwiZml4ZWRcIixcclxuICAgICAgICAgICAgICAgIGxlZnQ6IGUuY29udGFpbmVyUmlnaHQsXHJcbiAgICAgICAgICAgICAgICB0b3A6IDQwXHJcbiAgICAgICAgICAgIH0pIDogKCQobi5maW5kKFwibGkgYVwiKVsxXSkuYWRkQ2xhc3MoXCJhY3RpdmVcIiksIG4uY3NzKHtcclxuICAgICAgICAgICAgICAgIHBvc2l0aW9uOiBcIlwiLFxyXG4gICAgICAgICAgICAgICAgbGVmdDogXCJcIixcclxuICAgICAgICAgICAgICAgIHRvcDogXCJcIlxyXG4gICAgICAgICAgICB9KSlcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIGUgPSB7fTtcclxuICAgICAgICBvKCksICQod2luZG93KS5vbihcInJlc2l6ZS50aGVtZS5uYXZcIiwgbykub24oXCJzY3JvbGwudGhlbWUubmF2XCIsIHQpLCAkKFwiYm9keVwiKS5zY3JvbGxzcHkoe1xyXG4gICAgICAgICAgICB0YXJnZXQ6IFwiI21hcmtkb3duLXRvY1wiXHJcbiAgICAgICAgfSksIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICQoXCJib2R5XCIpLnNjcm9sbHNweShcInJlZnJlc2hcIilcclxuICAgICAgICB9LCAxZTMpXHJcbiAgICB9XHJcbiAgICB2YXIgbiA9ICQoXCIjbWFya2Rvd24tdG9jXCIpO1xyXG4gICAgJChcIiNtYXJrZG93bi10b2MgbGlcIikuYWRkQ2xhc3MoXCJuYXYtaXRlbVwiKSwgJChcIiNtYXJrZG93bi10b2MgbGkgPiBhXCIpLmFkZENsYXNzKFwibmF2LWxpbmtcIiksICQoXCIjbWFya2Rvd24tdG9jIGxpID4gdWxcIikuYWRkQ2xhc3MoXCJuYXZcIik7XHJcbiAgICB2YXIgYSA9ICQod2luZG93KTtcclxuICAgIG5bMF0gJiYgKG8oKSwgYS5vbihcInJlc2l6ZVwiLCBvKSlcclxufSk7IiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgVXRpbHN7XHJcbiAgICBjb25zdHJ1Y3Rvcigpe1xyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyBzaG93VmlldyhlbGVtKXtcclxuICAgICAgICBlbGVtLmZvckVhY2goaXRlbSA9PiB7XHJcbiAgICAgICAgICAgIGl0ZW0uY2xhc3NMaXN0LnJlbW92ZSgnZC1ub25lJyk7XHJcbiAgICAgICAgfSlcclxuICAgIH1cclxuXHJcbiAgICBzdGF0aWMgaGlkZVZpZXcoZWxlbSl7XHJcbiAgICAgICAgZWxlbS5mb3JFYWNoKGZ1bmN0aW9uKGl0ZW0pe1xyXG4gICAgICAgICAgICBpdGVtLmNsYXNzTGlzdC5hZGQoJ2Qtbm9uZScpO1xyXG4gICAgICAgIH0pXHJcbiAgICB9XHJcbiAgICBzdGF0aWMgbmF2aWdhdGVUbyhyb3V0ZU5hbWUpe1xyXG4gICAgICAgIHdpbmRvdy5sb2NhdGlvbi5oYXNoID0gJyMnICsgcm91dGVOYW1lO1xyXG4gICAgfVxyXG4gICAgc3RhdGljIGluaXRUZW1wbGF0ZSh3cmFwcGVyRGl2LCB0ZW1wbGF0ZUlkKXtcclxuICAgICAgICBsZXQgdGVtcGxhdGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAjJHt0ZW1wbGF0ZUlkfWApO1xyXG4gICAgICAgIGxldCB0ZW1wQ2xvbmUgPSB0ZW1wbGF0ZS5jb250ZW50LmNsb25lTm9kZSh0cnVlKTtcclxuICAgICAgICB3cmFwcGVyRGl2LmlubmVySFRNTCA9ICcnO1xyXG4gICAgICAgIHdyYXBwZXJEaXYuYXBwZW5kQ2hpbGQodGVtcENsb25lKTtcclxuXHJcbiAgICB9XHJcbiAgICBzdGF0aWMgbW9kaWZ5RGF0ZShzZWNvbmRzKXtcclxuICAgICAgICBsZXQgZGF0ZSA9IG5ldyBEYXRlKHBhcnNlSW50KHNlY29uZHMpKTtcclxuICAgICAgICByZXR1cm4gZGF0ZS50b0xvY2FsZURhdGVTdHJpbmcoKTtcclxuICAgIH1cclxuXHJcbiAgICBzdGF0aWMgbW9kaWZ5RGF0ZWFuZFRpbWUoc2Vjb25kcyl7XHJcbiAgICAgICAgbGV0IGRhdGUgPSBuZXcgRGF0ZShwYXJzZUludChzZWNvbmRzKSk7XHJcbiAgICAgICAgcmV0dXJuIGRhdGUudG9Mb2NhbGVEYXRlU3RyaW5nKCkgKycgfCAnKyBkYXRlLnRvTG9jYWxlVGltZVN0cmluZygncnUtUlUnKVxyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyBob3dUaW1lUGFzc2VkKHNlY29uZHMpe1xyXG4gICAgICAgIGxldCBkYXRlID0gbmV3IERhdGUocGFyc2VJbnQoc2Vjb25kcykpO1xyXG4gICAgICAgIGxldCBub3cgPSBuZXcgRGF0ZTtcclxuICAgICAgICByZXR1cm4gbm93LmdldEZ1bGxZZWFyKCkgLSBkYXRlLmdldEZ1bGxZZWFyKCk7XHJcbiAgICB9IFxyXG5cclxuICAgIHN0YXRpYyBjaGVja0RhdGEoZGF0YSl7XHJcbiAgICByZXR1cm4gZGF0YSA/IGRhdGEgOiAnJztcclxuICAgIH1cclxufSIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFZhbGlkYXRvcntcclxuICAgIGNvbnN0cnVjdG9yKCl7XHJcbiAgICB0aGlzLnJlZyA9ICAvXlthLXpdKyhbLV9dP1thLXowLTldKyl7MCwyfSQvaTtcclxuICAgIHRoaXMuZXJyb3IgPSBudWxsO1xyXG5cdH1cclxuXHJcbiAgICBpc1ZhbGlkKGxvZ2luLCBwYXNzKXtcclxuICAgICAgICBpZihsb2dpbi52YWx1ZSA9PScnIHx8IHBhc3MudmFsdWUgPT0gJycpe1xyXG4gICAgICAgICAgICB0aGlzLmVycm9yID0gJ9CX0LDQv9C+0LvQvdC40YLQtSDQv9GD0YHRgtGL0LUg0L/QvtC70Y8hJztcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1lbHNlIGlmKCFsb2dpbi52YWx1ZS5tYXRjaCh0aGlzLnJlZykpe1xyXG4gICAgICAgICAgICB0aGlzLmVycm9yID0gJ9Cb0L7Qs9C40L0g0LjQvNC10LXRgiDQvdC10LrQvtGA0LXQutGC0L3Ri9C5INGE0L7RgNC80LDRgiEnO1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfWVsc2UgaWYocGFzcy52YWx1ZS5sZW5ndGggPCA4KXtcclxuICAgICAgICAgICAgdGhpcy5lcnJvciA9ICfQn9Cw0YDQvtC70Ywg0LTQvtC70LbQtdC9INCx0YvRgtGMINC+0YIgOCDRgdC40LzQstC+0LvQvtCyISc7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0QWxlcnRNc2coKXtcclxuICAgICAgICByZXR1cm4gdGhpcy5lcnJvcjtcclxuICAgIH0gIFxyXG5cclxufSIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIExvZ2luTW9kZWx7XHJcbiAgICBjb25zdHJ1Y3Rvcigpe1xyXG4gICAgICAgIHRoaXMudXJsID0gJ2h0dHA6Ly9sb2NhbGhvc3Q6MzAwMC91c2Vycy8nO1xyXG4gICAgfSAgXHJcbiAgICByZXF1ZXN0VXNlckxvZ2luRGF0YShsb2dpbiwgcGFzcyl7XHJcbiAgICAgICAgcmV0dXJuIGZldGNoKHRoaXMudXJsKS50aGVuKHJlc3BvbmNlID0+IHJlc3BvbmNlLmpzb24oKSkudGhlbih1c2VycyA9PiB7XHJcbiAgICAgICAgICAgIGZvcihsZXQgaSA9IDA7IGkgPCB1c2Vycy5sZW5ndGg7IGkrKyl7XHJcbiAgICAgICAgICAgICAgICBpZigodXNlcnNbaV0ubG9naW5EYXRhLmxvZ2luID09IGxvZ2luKSAmJiAodXNlcnNbaV0ubG9naW5EYXRhLnBhc3N3b3JkID09IHBhc3MpKXtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdXNlcnNbaV07XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWtcclxuICAgICAgICAgICAgICAgIH0gXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIHVzZXJzLmxvZ2luRGF0YTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBnZXRMb2dpbk9wdGlvbnMobG9naW4sIHBhc3Mpe1xyXG4gICAgICAgIGxldCBib2R5ID0ge1xyXG5cdFx0XHRsb2dpbiA6IGxvZ2luLFxyXG5cdFx0XHRwYXNzIDogcGFzc1xyXG5cdFx0fTtcclxuICAgICAgICBsZXQgb3B0aW9ucyA9IHtcclxuXHRcdFx0bWV0aG9kIDogJ3Bvc3QnLFxyXG5cdFx0XHRoZWFkZXJzOiB7XHJcblx0XHRcdFx0J0NvbnRlbnQtdHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uOyBjaGFyc2V0PXV0Zi04J1xyXG5cdFx0XHR9LFxyXG5cdFx0XHRib2R5IDogSlNPTi5zdHJpbmdpZnkoYm9keSlcclxuICAgICAgICB9O1xyXG4gICAgICAgIHJldHVybiBvcHRpb25zOyAgXHJcbiAgICB9O1xyXG4gICAgZ2V0VXNlckluZm8oKXtcclxuICAgICAgICByZXR1cm4gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3VzZXJJbmZvJyk7XHJcbiAgICB9XHJcblxyXG4gICAgc2F2ZVVzZXJEYXRhKGxvZ2dlZFN0YXR1cywgdXNlcklkLCl7XHJcblx0XHRsZXQgZGF0YSAgPSB7XHJcblx0XHRcdHVzZXJJZCA6IHVzZXJJZCxcclxuXHRcdFx0aXNMb2dnZWQ6bG9nZ2VkU3RhdHVzXHJcblx0XHR9XHJcblx0XHR0aGlzLnNldFVzZXJJbmZvKGRhdGEpO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICBzZXRVc2VySW5mbyhkYXRhKXtcclxuICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgndXNlckluZm8nLCBKU09OLnN0cmluZ2lmeShkYXRhKSk7XHJcbiAgICB9XHJcbn0iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBMb2dpbkNvbnRyb2xsZXJ7XHJcblx0Y29uc3RydWN0b3IobW9kZWwsIHZpZXcsIHV0aWxzLCB2YWxpZGF0b3Ipe1xyXG5cdFx0dGhpcy52aWV3ID0gdmlldztcclxuXHRcdHRoaXMubW9kZWwgPSBtb2RlbDtcclxuXHRcdHRoaXMudmFsaWRhdG9yID0gdmFsaWRhdG9yO1xyXG5cdFx0dGhpcy51dGlscyA9IHV0aWxzO1xyXG5cdFx0dGhpcy5jdXJyZW50TG9naW4gPSBudWxsO1xyXG5cdFx0dGhpcy5jdXJyZW50cGFzcyA9IG51bGw7XHJcblx0XHR0aGlzLnVzZXJNZW51U2VsZWN0b3IgPSAnI3VzZXJNZW51J1xyXG5cdH1cclxuXHRcclxuXHRpbml0KCl7XHJcblx0XHR0aGlzLnZpZXcuaW5pdCgpO1xyXG5cdFx0dGhpcy5pbml0TGlzdGVuZXJzKCk7XHJcblx0XHR0aGlzLmlzTG9nZ2VkKCkgJiYgdGhpcy5sb2dnZWQoKTtcclxuXHRcdFxyXG5cdH1cclxuXHRcclxuXHRpbml0TGlzdGVuZXJzKCl7XHJcblx0XHR0aGlzLnZpZXcuZ29Mb2dpbkJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuZ29Mb2dpbi5iaW5kKHRoaXMpKTtcclxuXHRcdC8vdGhpcy52aWV3LmxvZ291dEJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMubG9nb3V0LmJpbmQodGhpcykpO1xyXG5cdH1cclxuXHJcblx0dmFsaWRhdGVVc2VyRGF0YSgpe1xyXG5cdFx0dGhpcy52YWxpZGF0b3IuaXNWYWxpZCh0aGlzLnZpZXcuaW5wdXRMb2dpbiwgdGhpcy52aWV3LmlucHV0UGFzcykgPyB0aGlzLmNoZWNrTG9naW5EYXRhKCkgOiB0aGlzLnZpZXcuc2hvd0Vycm9yTXNnKHRoaXMudmFsaWRhdG9yLmdldEFsZXJ0TXNnKCkpO1xyXG5cdFx0XHJcblx0fVxyXG5cclxuXHRjaGVja0xvZ2luRGF0YSgpe1xyXG5cdFx0bGV0IGxvZ2luID0gdGhpcy52aWV3LmlucHV0TG9naW4udmFsdWU7XHJcblx0XHRsZXQgcGFzcyA9IHRoaXMudmlldy5pbnB1dFBhc3MudmFsdWU7XHJcblxyXG5cdFx0dGhpcy5tb2RlbC5yZXF1ZXN0VXNlckxvZ2luRGF0YShsb2dpbiwgcGFzcykudGhlbih1c2VyID0+IHtcclxuXHRcdFx0aWYodXNlcil7XHJcblx0XHRcdFx0dGhpcy5tb2RlbC5zYXZlVXNlckRhdGEodHJ1ZSwgdXNlci51c2VySWQpO1xyXG5cdFx0XHRcdHRoaXMubG9nZ2VkKCk7XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0dGhpcy52aWV3LnNob3dFcnJvck1zZygn0JLRiyDQstCy0LXQu9C4INC90LXRgdGD0YnQtdGB0YLQstGD0Y7RidC40Lkg0LvQvtCz0LjQvSDQuNC70Lgg0L3QtdCy0LXRgNC90YvQuSDQv9Cw0YDQvtC70YwhJyk7XHJcblx0XHRcdH1cclxuXHRcdH0pO1xyXG5cdH1cclxuXHJcblx0Z29Mb2dpbihlKXtcclxuXHRcdGUucHJldmVudERlZmF1bHQoKTtcclxuXHRcdHRoaXMudmlldy5oaWRlRXJyb3JzTXNnKCk7XHJcblx0XHR0aGlzLnZhbGlkYXRlVXNlckRhdGEoKTtcclxuXHR9XHJcblxyXG5cdGxvZ2dlZCgpe1xyXG5cdFx0ZG9jdW1lbnQubG9jYXRpb24uaHJlZiA9ICcnO1xyXG5cdFx0dGhpcy51dGlscy5oaWRlVmlldyhbdGhpcy51c2VyTWVudV0pO1xyXG5cdFx0XHJcblx0fVxyXG5cdFxyXG5cdGxvZ291dCgpe1xyXG5cdFx0dGhpcy5tb2RlbC5zYXZlVXNlckRhdGEoZmFsc2UpO1xyXG5cdFx0ZG9jdW1lbnQubG9jYXRpb24uaHJlZiA9ICcjbG9naW4nO1xyXG5cdFx0XHJcblx0fVxyXG5cclxuXHRpc0xvZ2dlZCgpe1xyXG5cdFx0bGV0IGRhdGEgPSB0aGlzLm1vZGVsLmdldFVzZXJJbmZvKCk7XHJcblx0XHRyZXR1cm4gZGF0YSAmJiBKU09OLnBhcnNlKGRhdGEpLmlzTG9nZ2VkO1xyXG5cdH1cclxuXHRcdFxyXG59IiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgTG9naW5WaWV3e1xyXG4gICAgY29uc3RydWN0b3IodXRpbHMpe1xyXG4gICAgICAgIHRoaXMudXRpbHMgPSB1dGlscztcclxuICAgICAgICB0aGlzLnRlbXBsYXRlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2xvZ2luJyk7XHJcbiAgICAgICAgdGhpcy53cmFwcGVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3dyYXBwZXInKTtcclxuICAgICAgICB0aGlzLmlucHV0TG9naW4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuaW5wdXQtbG9naW4nKTtcclxuICAgICAgICB0aGlzLmlucHV0UGFzcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5pbnB1dC1wYXNzJyk7XHJcbiAgICAgICAgdGhpcy5lcnJvckRpdiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5hbGVydCcpOyBcclxuICAgICAgICB0aGlzLmdvTG9naW5CdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZ29Mb2dpbicpO1xyXG4gICAgICAgIHRoaXMubG9nb3V0QnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmxvZ291dCcpO1xyXG4gICAgICAgIHRoaXMudXNlck1lbnUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjdXNlck1lbnUnKTtcclxuICAgIH1cclxuXHJcbiAgICBpbml0KCl7XHJcbiAgICAgICAgdGhpcy51dGlscy5oaWRlVmlldyhbdGhpcy51c2VyTWVudV0pO1xyXG4gICAgfVxyXG5cclxuICAgIHNob3dFcnJvck1zZyhtc2cpe1xyXG4gICAgICAgIHRoaXMuZXJyb3JEaXYuaW5uZXJIVE1MID0gbXNnO1xyXG4gICAgfVxyXG5cclxuICAgIGhpZGVFcnJvcnNNc2coKXtcclxuICAgICAgICB0aGlzLmVycm9yRGl2LmlubmVySFRNTCA9ICcnO1xyXG4gICAgfVxyXG5cclxufSIsIu+7v2ltcG9ydCBVdGlscyBmcm9tICcuLi9nZW5lcmFsL3V0aWxzLmpzJztcclxuaW1wb3J0IFZhbGlkYXRvciBmcm9tICcuLi9nZW5lcmFsL3ZhbGlkYXRvci5qcyc7XHJcblxyXG5pbXBvcnQgRGFzaGJvYXJkTW9kZWwgZnJvbSAnLi4vZGFzaGJvYXJkL2Rhc2hib2FyZC5tb2RlbC5qcyc7XHJcbmltcG9ydCBEYXNoYm9hcmRDb250cm9sbGVyIGZyb20gJy4uL2Rhc2hib2FyZC9kYXNoYm9hcmQuY29udHJvbGxlci5qcyc7XHJcbmltcG9ydCBEYXNoYm9hcmRWaWV3IGZyb20gJy4uL2Rhc2hib2FyZC9kYXNoYm9hcmQudmlldy5qcyc7XHJcblxyXG5pbXBvcnQgTG9naW5Nb2RlbCBmcm9tICcuLi9sb2dpbi9sb2dpbi5tb2RlbC5qcyc7XHJcbmltcG9ydCBMb2dpbkNvbnRyb2xsZXIgZnJvbSAnLi4vbG9naW4vbG9naW4uY29udHJvbGxlci5qcyc7XHJcbmltcG9ydCBMb2dpblZpZXcgZnJvbSAnLi4vbG9naW4vbG9naW4udmlldy5qcyc7XHJcblxyXG5pbXBvcnQgUHJvZmlsZU1vZGVsIGZyb20gJy4uL3Byb2ZpbGUvcHJvZmlsZS5tb2RlbC5qcyc7XHJcbmltcG9ydCBQcm9maWxlQ29udHJvbGxlciBmcm9tICcuLi9wcm9maWxlL3Byb2ZpbGUuY29udHJvbGxlci5qcyc7XHJcbmltcG9ydCBQcm9maWxlVmlldyBmcm9tICcuLi9wcm9maWxlL3Byb2ZpbGUudmlldy5qcyc7XHJcblxyXG5sZXQgd3JhcHBlciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyN3cmFwcGVyJyk7XHJcbmxldCBpc0xvZ2dlZCA9ICgpID0+IHtcclxuICAgIGxldCBkYXRhID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3VzZXJJbmZvJyk7XHJcbiAgICByZXR1cm4gZGF0YSAmJiBKU09OLnBhcnNlKGRhdGEpLmlzTG9nZ2VkO1xyXG59XHJcblxyXG5sZXQgcm91dGVDb25maWcgPSB7XHJcbiAgICBcIlwiIDoge1xyXG4gICAgICAgIGluaXQgOiAoKSA9PiB7XHJcbiAgICAgICAgICAgIGxldCBtb2RlbCA9IG5ldyBEYXNoYm9hcmRNb2RlbChVdGlscyk7XHJcbiAgICAgICAgICAgIGxldCB2aWV3ID0gbmV3IERhc2hib2FyZFZpZXcoVXRpbHMpO1xyXG4gICAgICAgICAgICBsZXQgY29udHJvbGxlciA9IG5ldyBEYXNoYm9hcmRDb250cm9sbGVyKG1vZGVsLCB2aWV3LCBVdGlscyk7XHJcbiAgICAgICAgICAgIGNvbnRyb2xsZXIuaW5pdCgpO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgaW5pdGllZCA6IGZhbHNlXHJcbiAgICB9LFxyXG5cclxuICAgIFwicHJvZmlsZVwiIDoge1xyXG4gICAgICAgIGluaXQgOiAoKSA9PiB7XHJcblxyXG4gICAgICAgICAgICBsZXQgbW9kZWwgPSBuZXcgUHJvZmlsZU1vZGVsKFV0aWxzKTtcclxuICAgICAgICAgICAgbGV0IHZpZXcgPSBuZXcgUHJvZmlsZVZpZXcoVXRpbHMpO1xyXG4gICAgICAgICAgICBsZXQgY29udHJvbGxlciA9IG5ldyBQcm9maWxlQ29udHJvbGxlcihtb2RlbCwgdmlldywgVXRpbHMpO1xyXG4gICAgICAgICAgICBjb250cm9sbGVyLmluaXQoKTtcclxuXHJcbiAgICAgICAgfSxcclxuICAgICAgICBpbml0aWVkIDogZmFsc2VcclxuICAgIH0sXHJcblxyXG4gICAgXCJsb2dpblwiIDoge1xyXG4gICAgICAgIGluaXQgOiAoKSA9PiB7XHJcbiAgICAgICAgICAgIFV0aWxzLmluaXRUZW1wbGF0ZSh3cmFwcGVyLCAnbG9naW4nKTtcclxuICAgICAgICAgICAgbGV0IG1vZGVsID0gbmV3IExvZ2luTW9kZWwoVXRpbHMpO1xyXG4gICAgICAgICAgICBsZXQgdmlldyA9IG5ldyBMb2dpblZpZXcoVXRpbHMpO1xyXG4gICAgICAgICAgICBsZXQgdmFsaWRhdG9yID0gbmV3IFZhbGlkYXRvcjtcclxuICAgICAgICAgICAgbGV0IGNvbnRyb2xsZXIgPSBuZXcgTG9naW5Db250cm9sbGVyKG1vZGVsLCB2aWV3LCBVdGlscywgdmFsaWRhdG9yKTtcclxuICAgICAgICAgICAgY29udHJvbGxlci5pbml0KCk7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBpbml0aWVkIDogZmFsc2VcclxuICAgIH0sXHJcblxyXG4gICAgXCJsb2dvdXRcIiA6IHtcclxuICAgICAgICBpbml0IDogKCkgPT4ge1xyXG4gICAgICAgICAgICBVdGlscy5pbml0VGVtcGxhdGUod3JhcHBlciwgJ2xvZ2luJyk7XHJcbiAgICAgICAgICAgIGxldCBtb2RlbCA9IG5ldyBMb2dpbk1vZGVsKFV0aWxzKTtcclxuICAgICAgICAgICAgbGV0IHZpZXcgPSBuZXcgTG9naW5WaWV3KFV0aWxzKTtcclxuICAgICAgICAgICAgbGV0IHZhbGlkYXRvciA9IG5ldyBWYWxpZGF0b3I7XHJcbiAgICAgICAgICAgIGxldCBjb250cm9sbGVyID0gbmV3IExvZ2luQ29udHJvbGxlcihtb2RlbCwgdmlldywgVXRpbHMsIHZhbGlkYXRvcik7XHJcbiAgICAgICAgICAgIGNvbnRyb2xsZXIubG9nb3V0KCk7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBpbml0aWVkIDogZmFsc2VcclxuICAgIH1cclxufTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIHVwZGF0ZVJvdXRlKCl7XHJcbiAgICBsZXQgcm91dGUgPSBkb2N1bWVudC5sb2NhdGlvbi5oYXNoLnJlcGxhY2UoJyMnLCAnJyk7XHJcbiAgICAgICAgaWYoaXNMb2dnZWQoKSl7XHJcbiAgICAgICAgICAgIGlmKHJvdXRlQ29uZmlnW3JvdXRlXSl7XHJcbiAgICAgICAgICAgICAgICByb3V0ZUNvbmZpZ1tyb3V0ZV0uaW5pdCgpO1xyXG4gICAgICAgICAgICAgICAgcm91dGVDb25maWdbcm91dGVdLmluaXRpZWQgPSB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgcm91dGVDb25maWdbJ2xvZ2luJ10uaW5pdCgpO1xyXG4gICAgfVxyXG59OyIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIERhc2hib2FyZENvbnRyb2xsZXJ7XHJcbiAgICBjb25zdHJ1Y3Rvcihtb2RlbCwgdmlldywgdXRpbHMpe1xyXG4gICAgICAgIHRoaXMubW9kZWwgPSBtb2RlbDtcclxuICAgICAgICB0aGlzLnZpZXcgPSB2aWV3O1xyXG4gICAgICAgIHRoaXMudXRpbHMgPSB1dGlscztcclxuICAgICAgICB0aGlzLnVzZXIgPSBudWxsOyBcclxuICAgICAgICB0aGlzLnRlbXBsYXRlID0gdGhpcy52aWV3LnRlbXBsYXRlLmlubmVySFRNTDtcclxuICAgIH0gXHJcbiAgICBcclxuICAgIGFzeW5jIGdldEFsbERhdGEoKXtcclxuICAgICAgICBhd2FpdCB0aGlzLmdldE1haW5Vc2VySW5mbyh0aGlzLnVzZXIpO1xyXG4gICAgICAgIGF3YWl0IHRoaXMuZ2V0UG9zdHModGhpcy51c2VyKTtcclxuICAgIH1cclxuICAgIGdldE1haW5Vc2VySW5mbyh1c2VySWQpe1xyXG4gICAgICAgIHJldHVybiB0aGlzLm1vZGVsLnJlcXVlc3RVc2VySW5mbyh1c2VySWQpLnRoZW4oZGF0YSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMubWFrZVVzZXJEYXRhVGVtcGxhdGUoZGF0YSk7XHJcbiAgICAgICAgfSlcclxuICAgIH1cclxuXHJcbiAgICBtYWtlVXNlckRhdGFUZW1wbGF0ZSh1c2VyRGF0YSl7XHJcbiAgICAgICAgbGV0IHBob3Rvc1RlbXAgPSB0aGlzLnZpZXcucGhvdG9zVGVtcGxhdGUodXNlckRhdGEucGhvdG9zKTtcclxuICAgICAgICB0aGlzLnRlbXBsYXRlID0gdGhpcy5tb2RlbC5tYWtlVXNlckRhdGEodGhpcy50ZW1wbGF0ZSwgcGhvdG9zVGVtcCwgIHVzZXJEYXRhKTtcclxuICAgIH1cclxuXHJcbiAgICAvL9C/0YvRgtCw0Y7RgdGMINC40LzQuNGC0LjRgNC+0LLQsNGC0Ywg0LHQtdC60LXQvdC0IFxyXG4gICAgZ2V0UG9zdHModXNlcklkKXtcclxuICAgICAgICBsZXQgcG9zdHNUZW1wID0gJyc7XHJcbiAgICAgICAgIHRoaXMubW9kZWwucmVxdWVzdERhc2hib2FyZFBvc3RzKHVzZXJJZCkudGhlbihkYXRhID0+IHsvL9C/0L7Qu9GD0YfQsNGOINC/0L7RgdGC0Ysg0L3QsCDRgdGC0LXQvdC1INGO0LfQtdGA0LBcclxuICAgICAgICAgICAgZGF0YS5mb3JFYWNoKHBvc3QgPT4gey8v0LjRgtC10YDQuNGA0YPRjiDQv9C+0YHRgtGLIFxyXG4gICAgICAgICAgICAgICAgdGhpcy5tb2RlbC5yZXF1ZXN0VXNlckluZm8ocG9zdC51c2VySWQpLnRoZW4odXNlciA9PnsgLy8g0LTQsNC90L3Ri9C1INCw0LLRgtC+0YDQsCDQtNC70Y8g0LrQsNC20LTQvtCz0L4g0L/QvtGB0YLQsFxyXG4gICAgICAgICAgICAgICAgICAgIHBvc3RzVGVtcCArPSB0aGlzLnZpZXcucG9zdHNUZW1wbGF0ZSh1c2VyLnVzZXJJbmZvLCB0aGlzLnV0aWxzLm1vZGlmeURhdGVhbmRUaW1lKHBvc3QuZGF0ZSksIHBvc3QudGV4dCk7Ly/Qs9C10L3QtdGA0LjRgNGD0Y4g0LrQvtC0INC/0L7RgdGC0L7QslxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMudmlldy5wcmludFBvc3RzQWZ0ZXJMb2FkKHBvc3RzVGVtcCk7Ly/Rg9C20LDRgdC90L7QtSDQvdC+INGA0LDQsdC+0YfQtdC1INGA0LXRiNC10L3QuNC1IDwtLVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLy/QutCw0Log0L/QvtC70YPRh9C40YLRjCBwb3N0c1RlbXAg0LLQvdC1IGZvcmVhY2gg0L/QvtGB0LvQtSDQstGB0LXRhSDQt9Cw0L/RgNC+0YHQvtCyID9cclxuXHJcbn1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICBpbml0KCl7XHJcbiAgICAgICAgdGhpcy51c2VyID0gdGhpcy5tb2RlbC5nZXRDdXJyZW50VXNlcigpO1xyXG4gICAgICAgIHRoaXMuZ2V0QWxsRGF0YSgpLnRoZW4oKHJlc3BvbnNlID0+IHtcclxuICAgICAgICAgICAgdGhpcy52aWV3LnByaW50VXNlckRhdGEodGhpcy50ZW1wbGF0ZSk7XHJcbiAgICAgICAgICAgIHRoaXMudXRpbHMuaW5pdFRlbXBsYXRlKHRoaXMudmlldy53cmFwcGVyLCAnZGFzaGJvYXJkJyk7XHJcbiAgICAgICAgICAgIHRoaXMudmlldy5pbml0KCk7XHJcbiAgICAgICAgfSkpOyAgICAgIFxyXG4gICAgfVxyXG59IiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgRGFzaGJvYXJkTW9kZWx7XHJcbiAgICBjb25zdHJ1Y3Rvcih1dGlscyl7XHJcbiAgICAgICAgdGhpcy51cmwgPSAnaHR0cDovL2xvY2FsaG9zdDozMDAwL3VzZXJzLyc7XHJcbiAgICAgICAgdGhpcy51dGlscyA9IHV0aWxzO1xyXG4gICAgfVxyXG5cclxuICAgIHJlcXVlc3RVc2VySW5mbyhpZCl7XHJcbiAgICAgICAgcmV0dXJuIGZldGNoKHRoaXMudXJsICsgaWQpLnRoZW4ocmVzcG9uY2UgPT4gcmVzcG9uY2UuanNvbigpKS50aGVuKGRhdGEgPT4ge1xyXG4gICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgdXNlckluZm8gOiBkYXRhLm1haW5JbmZvLFxyXG4gICAgICAgICAgICAgICAgcGhvdG9zIDogZGF0YS5waG90b3NcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgcmVxdWVzdERhc2hib2FyZFBvc3RzKGlkKXtcclxuICAgICAgICByZXR1cm4gZmV0Y2godGhpcy51cmwgKyBpZCkudGhlbihyZXNwb25jZSA9PiByZXNwb25jZS5qc29uKCkpLnRoZW4oZGF0YSA9PiB7ICBcclxuICAgICAgICAgICAgcmV0dXJuIGRhdGEuZGFzaGJvYXJkUG9zdHM7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIG1ha2VVc2VyRGF0YSh0ZW1wbGF0ZSwgcGhvdG9zVGVtcGxhdGUsIHVzZXIpey8vINC90LUg0LIg0LzQvtC00LXQu9C4XHJcbiAgICAgICAgcmV0dXJuIHRlbXBsYXRlLnJlcGxhY2UoJ3tuYW1lfScsIHVzZXIudXNlckluZm8uZmlyc3RuYW1lICsnICcrIHVzZXIudXNlckluZm8ubGFzdG5hbWUpXHJcbiAgICAgICAgICAgICAgICAgICAgLnJlcGxhY2UoJ3thdmF0YXJ9JywgdGhpcy51dGlscy5jaGVja0RhdGEodXNlci51c2VySW5mby5hdmF0YXIpKVxyXG4gICAgICAgICAgICAgICAgICAgIC5yZXBsYWNlKCd7d2FsbHBhcGVyfScsIHRoaXMudXRpbHMuY2hlY2tEYXRhKHVzZXIudXNlckluZm8ud2FsbHBhcGVyKSlcclxuICAgICAgICAgICAgICAgICAgICAucmVwbGFjZSgne2ZyaWVuZHN9JywgdGhpcy51dGlscy5jaGVja0RhdGEodXNlci51c2VySW5mby5mcmllbmRzLmxlbmd0aCkpXHJcbiAgICAgICAgICAgICAgICAgICAgLnJlcGxhY2UoJ3tzdGF0dXN9JywgdGhpcy51dGlscy5jaGVja0RhdGEodXNlci51c2VySW5mby5zdGF0dXMpKVxyXG4gICAgICAgICAgICAgICAgICAgIC5yZXBsYWNlKCd7Y2l0eX0nLCB0aGlzLnV0aWxzLmNoZWNrRGF0YSh1c2VyLnVzZXJJbmZvLmNvbnRhY3RzLmNpdHkpKVxyXG4gICAgICAgICAgICAgICAgICAgIC5yZXBsYWNlKCd7am9ifScsIHRoaXMudXRpbHMuY2hlY2tEYXRhKHVzZXIudXNlckluZm8uam9iKSlcclxuICAgICAgICAgICAgICAgICAgICAucmVwbGFjZSgne3Bob3Rvc30nLCB0aGlzLnV0aWxzLmNoZWNrRGF0YShwaG90b3NUZW1wbGF0ZSkpO1xyXG4gICAgICAgICAgICAgICAgICBcclxuICAgIH1cclxuXHJcbiAgICBnZXRDdXJyZW50VXNlcigpe1xyXG4gICAgICAgIHJldHVybiAgSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgndXNlckluZm8nKSkudXNlcklkO1xyXG4gICAgfVxyXG5cclxufSIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIERhc2hib2FyZFZpZXd7XHJcbiAgICBjb25zdHJ1Y3Rvcih1dGlscyl7XHJcbiAgICAgICAgdGhpcy51dGlscyA9IHV0aWxzO1xyXG4gICAgICAgIHRoaXMud3JhcHBlciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyN3cmFwcGVyJyk7XHJcbiAgICAgICAgdGhpcy50ZW1wbGF0ZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNkYXNoYm9hcmQnKTtcclxuICAgICAgICB0aGlzLnBvc3RzRGl2SWQgPSAncG9zdHMnO1xyXG4gICAgICAgIHRoaXMudXNlck1lbnUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjdXNlck1lbnUnKTtcclxuICAgIH1cclxuXHJcbiAgICBpbml0KCl7XHJcbiAgICAgICB0aGlzLnV0aWxzLnNob3dWaWV3KFt0aGlzLnVzZXJNZW51XSlcclxuICAgIH1cclxuICAgIHByaW50VXNlckRhdGEoZGF0YSl7XHJcbiAgICAgICAgdGhpcy50ZW1wbGF0ZS5pbm5lckhUTUwgPSBkYXRhO1xyXG4gICAgfVxyXG5cclxuICAgIHByaW50UG9zdHNBZnRlckxvYWQoZGF0YSl7XHJcbiAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNcIisgdGhpcy5wb3N0c0RpdklkKS5pbm5lckhUTUwgPSBkYXRhO1xyXG4gICAgfVxyXG5cclxuICAgIHBvc3RzVGVtcGxhdGUodXNlciwgZGF0ZSwgdGV4dCl7XHJcbiAgICAgICAgcmV0dXJuIGBcclxuICAgICAgICA8bGkgY2xhc3M9XCJydiBiIGFnelwiPlxyXG4gICAgICAgICAgICA8aW1nIGNsYXNzPVwiYm9zIHZiIHliIGFmZlwiIHNyYz1cIiR7dXNlci5hdmF0YXJ9XCI+XHJcbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJyd1wiPlxyXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImJwYlwiPlxyXG4gICAgICAgICAgICAgICAgICAgIDxzbWFsbCBjbGFzcz1cImFjeCBheGNcIj4ke2RhdGV9PC9zbWFsbD5cclxuICAgICAgICAgICAgICAgICAgICA8aDY+JHt1c2VyLmZpcnN0bmFtZX0gJHt1c2VyLmxhc3RuYW1lfTwvaDY+XHJcbiAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgIDxwPiR7dGV4dH08L3A+XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICAgIDwvbGk+YFxyXG4gICAgfVxyXG5cclxuICAgIGltYWdlc1RlbXBsYXRlKGltZyl7XHJcbiAgICAgICAgcmV0dXJuIGA8ZGl2PiR7aW1nfTwvZGl2PmBcclxuICAgIH1cclxuXHJcbiAgICBwaG90b3NUZW1wbGF0ZShwaG90b3Mpe1xyXG4gICAgICAgIGxldCBwaG90b3NUZW1wbGF0ZSA9ICcnO1xyXG4gICAgICAgIGZvcihsZXQgaSA9IDA7IGk8MjsgaSsrICl7XHJcbiAgICAgICAgICAgIHBob3Rvc1RlbXBsYXRlICs9IGBcclxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cImZtXCI+XHJcbiAgICAgICAgICAgICAgICA8c21hbGw+JHtwaG90b3NbaV0udGl0bGV9PC9zbWFsbD5cclxuICAgICAgICAgICAgICAgIDxpbWcgc3JjID0gJHtwaG90b3NbaV0udXJsfSBkYXRhLXdpZHRoPVwiNjQwXCIgZGF0YS1oZWlnaHQ9XCI2NDBcIiBkYXRhLWFjdGlvbj1cInpvb21cIj5cclxuICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgIGA7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBwaG90b3NUZW1wbGF0ZTtcclxuICAgIH1cclxufSIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFByb2ZpbGVDb250cm9sbGVye1xyXG4gICAgY29uc3RydWN0b3IobW9kZWwsIHZpZXcsIHV0aWxzKXtcclxuICAgICAgICB0aGlzLm1vZGVsID0gbW9kZWw7XHJcbiAgICAgICAgdGhpcy52aWV3ID0gdmlldztcclxuICAgICAgICB0aGlzLnV0aWxzID0gdXRpbHM7XHJcbiAgICAgICAgdGhpcy51c2VyID0gbnVsbDtcclxuICAgICAgICB0aGlzLnRlbXBsYXRlID0gdGhpcy52aWV3LnRlbXBsYXRlLmlubmVySFRNTDtcclxuICAgIH1cclxuXHJcbiAgICBhc3luYyBnZXRBbGxEYXRhKCl7XHJcbiAgICAgICAgYXdhaXQgdGhpcy5nZXRNYWluVXNlckluZm8odGhpcy51c2VyKTtcclxuICAgICAgICBhd2FpdCB0aGlzLmdldEZyaWVuZHNJbmZvKHRoaXMudXNlcik7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0TWFpblVzZXJJbmZvKHVzZXJJZCl7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMubW9kZWwucmVxdWVzdEFsbFVzZXJJbmZvKHVzZXJJZCkudGhlbihkYXRhID0+IHtcclxuICAgICAgICAgICAgdGhpcy5tYWtlVXNlckRhdGFUZW1wbGF0ZShkYXRhKTtcclxuICAgICAgICB9KVxyXG4gICAgfVxyXG5cclxuICAgIG1ha2VVc2VyRGF0YVRlbXBsYXRlKHVzZXJEYXRhKXtcclxuICAgICAgICBsZXQgbGFuZ1RlbXAgPSB0aGlzLnZpZXcubGFuZ3VhZ2VzVGVtcGxhdGUodXNlckRhdGEub3RoZXJJbmZvLmxhbmd1YWdlcyk7XHJcbiAgICAgICAgbGV0IGludGVyZXN0c1RlbXAgPSB0aGlzLnZpZXcuaW50ZXJlc3RzVGVtcGxhdGUodXNlckRhdGEub3RoZXJJbmZvLmludGVyZXN0cyk7XHJcbiAgICAgICAgbGV0IHBob3Rvc1RlbXAgPSB0aGlzLnZpZXcucGhvdG9zVGVtcGxhdGUodXNlckRhdGEucGhvdG9zKTtcclxuICAgICAgICB0aGlzLnRlbXBsYXRlID0gdGhpcy5tb2RlbC5tYWtlVXNlckRhdGEodGhpcy50ZW1wbGF0ZSwgdXNlckRhdGEsIGludGVyZXN0c1RlbXAsIGxhbmdUZW1wLCBwaG90b3NUZW1wKTtcclxuICAgIH1cclxuICAgIC8v0L/Ri9GC0LDRjtGB0Ywg0LjQvNC40YLQuNGA0L7QstCw0YLRjCDQsdC10LrQtdC90LQgXHJcbiAgICBnZXRGcmllbmRzSW5mbyh1c2VySWQpe1xyXG4gICAgICAgbGV0IHRlbXBsYXRlID0gJyc7XHJcbiAgICAgICAgIHRoaXMubW9kZWwucmVxdWVzdEZyaWVuZHModXNlcklkKS50aGVuKGZyaWVuZHMgID0+IHsvL9C/0L7Qu9GD0YfQsNC10LwgaWQg0LLRgdC10YUg0LTRgNGD0LfQtdC5INC/0L7Qu9GM0LfQvtCy0LDRgtC10LvRj1xyXG4gICAgICAgICAgIGZyaWVuZHMuZm9yRWFjaChpZCA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm1vZGVsLnJlcXVlc3RBbGxVc2VySW5mbyhpZCkudGhlbih1c2VyID0+IHsvL9C/0L7Qu9GD0YfQsNC10Lwg0LjQvdGE0L7RgNC80LDRhtC40Y8g0L4g0LrQsNC20LTQvtC8INC00YDRg9Cz0LVcclxuICAgICAgICAgICAgICAgICAgICB0ZW1wbGF0ZSAgKz0gdGhpcy52aWV3LnVzZXJUZW1wbGF0ZSh1c2VyLm1haW5JbmZvKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnZpZXcucHJpbnRGcmllbmRzQWZ0ZXJMb2FkKHRlbXBsYXRlKTsvL9GD0LbQsNGB0L3QvtC1INC90L4g0YDQsNCx0L7Rh9C10LUg0YDQtdGI0LXQvdC40LUgPC0tXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAvL9C60LDQuiDQtNC+0YHRgtCw0YLRjCB0ZW1wbGF0ZSDQstC90LUgZm9yZWFjaCDQv9C+0YHQu9C1INCy0YHQtdGFIGZldGNoP1xyXG4gICAgICAgICAgIFxyXG4gICAgICAgIH0pXHJcbiAgICB9XHJcbiAgICBpbml0KCl7XHJcbiAgICAgICAgdGhpcy51c2VyID0gdGhpcy5tb2RlbC5nZXRDdXJyZW50VXNlcigpO1xyXG4gICAgICAgIHRoaXMuZ2V0QWxsRGF0YSgpLnRoZW4oKHJlc3BvbnNlID0+IHtcclxuICAgICAgICAgICAgdGhpcy52aWV3LnByaW50VXNlckRhdGEodGhpcy50ZW1wbGF0ZSk7XHJcbiAgICAgICAgICAgIHRoaXMudXRpbHMuaW5pdFRlbXBsYXRlKHRoaXMudmlldy53cmFwcGVyLCAncHJvZmlsZScpO1xyXG4gICAgICAgICAgICB0aGlzLnZpZXcuaW5pdCgpO1xyXG4gICAgICAgIH0pKTsgICAgICBcclxuICAgIH1cclxufSIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFByb2ZpbGVNb2RlbHtcclxuICAgIGNvbnN0cnVjdG9yKHV0aWxzKXtcclxuICAgICAgICB0aGlzLnV0aWxzID0gdXRpbHM7XHJcbiAgICAgICAgdGhpcy51cmwgPSAnaHR0cDovL2xvY2FsaG9zdDozMDAwL3VzZXJzLyc7XHJcbiAgICB9XHJcblxyXG4gICAgcmVxdWVzdEFsbFVzZXJJbmZvKGlkKXtcclxuICAgICAgICByZXR1cm4gZmV0Y2godGhpcy51cmwraWQpLnRoZW4ocmVzcG9uY2UgPT4gcmVzcG9uY2UuanNvbigpKVxyXG4gICAgfVxyXG4gICAgXHJcbiAgICByZXF1ZXN0RnJpZW5kcyhpZCl7XHJcbiAgICAgICAgcmV0dXJuIGZldGNoKHRoaXMudXJsK2lkKS50aGVuKHJlc3BvbmNlID0+IHJlc3BvbmNlLmpzb24oKSkudGhlbihkYXRhID0+IHsgIFxyXG4gICAgICAgICAgICByZXR1cm4gZGF0YS5tYWluSW5mby5mcmllbmRzXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgbWFrZVVzZXJEYXRhKHRlbXBsYXRlLCB1c2VyLCBpbnRlcmVzdFRlbXBsYXRlLCBsYW5ndWFnZXNUZW1wbGF0ZSwgcGhvdG9zVGVtcGxhdGUpe1xyXG4gICAgICAgIGxldCBhZ2UgPSBgICgke3RoaXMudXRpbHMuaG93VGltZVBhc3NlZCh1c2VyLm1haW5JbmZvLmJpcnRoZGF5KX0pYDtcclxuICAgICAgICByZXR1cm4gdGVtcGxhdGUucmVwbGFjZSgne25hbWV9JywgdXNlci5tYWluSW5mby5maXJzdG5hbWUgKycgJysgdXNlci5tYWluSW5mby5sYXN0bmFtZSlcclxuICAgICAgICAgICAgICAgICAgICAucmVwbGFjZSgne2F2YXRhcn0nLCB0aGlzLnV0aWxzLmNoZWNrRGF0YSh1c2VyLm1haW5JbmZvLmF2YXRhcikpXHJcbiAgICAgICAgICAgICAgICAgICAgLnJlcGxhY2UoJ3t3YWxscGFwZXJ9JywgdGhpcy51dGlscy5jaGVja0RhdGEodXNlci5tYWluSW5mby53YWxscGFwZXIpKVxyXG4gICAgICAgICAgICAgICAgICAgIC5yZXBsYWNlKCd7c3RhdHVzfScsIHRoaXMudXRpbHMuY2hlY2tEYXRhKHVzZXIubWFpbkluZm8uc3RhdHVzKSlcclxuICAgICAgICAgICAgICAgICAgICAucmVwbGFjZSgne2JpcnRoZGF5fScsIHRoaXMudXRpbHMubW9kaWZ5RGF0ZSh1c2VyLm1haW5JbmZvLmJpcnRoZGF5KSArIGFnZSlcclxuICAgICAgICAgICAgICAgICAgICAucmVwbGFjZSgne2dlbmRlcn0nLCB0aGlzLnV0aWxzLmNoZWNrRGF0YSh1c2VyLm1haW5JbmZvLmdlbmRlcikpXHJcbiAgICAgICAgICAgICAgICAgICAgLnJlcGxhY2UoJ3tqb2J9JywgdGhpcy51dGlscy5jaGVja0RhdGEodXNlci5tYWluSW5mby5qb2IpKVxyXG4gICAgICAgICAgICAgICAgICAgIC5yZXBsYWNlKCd7ZWR1Y2F0aW9ufScsIHRoaXMudXRpbHMuY2hlY2tEYXRhKHVzZXIub3RoZXJJbmZvLmVkdWNhdGlvbikpXHJcbiAgICAgICAgICAgICAgICAgICAgLnJlcGxhY2UoJ3tlbWFpbH0nLCB0aGlzLnV0aWxzLmNoZWNrRGF0YSh1c2VyLm1haW5JbmZvLmNvbnRhY3RzLmVtYWlsKSlcclxuICAgICAgICAgICAgICAgICAgICAucmVwbGFjZSgne2NpdHl9JywgdGhpcy51dGlscy5jaGVja0RhdGEodXNlci5tYWluSW5mby5jb250YWN0cy5jaXR5KSlcclxuICAgICAgICAgICAgICAgICAgICAucmVwbGFjZSgne3RlbGVncmFtfScsIHRoaXMudXRpbHMuY2hlY2tEYXRhKHVzZXIubWFpbkluZm8uY29udGFjdHMudGVsZWdyYW0pKVxyXG4gICAgICAgICAgICAgICAgICAgIC5yZXBsYWNlKCd7c2t5cGV9JywgdGhpcy51dGlscy5jaGVja0RhdGEodXNlci5tYWluSW5mby5jb250YWN0cy5za3lwZSkpXHJcbiAgICAgICAgICAgICAgICAgICAgLnJlcGxhY2UoJ3thYm91dH0nLCB0aGlzLnV0aWxzLmNoZWNrRGF0YSh1c2VyLm90aGVySW5mby5hYm91dCkpXHJcbiAgICAgICAgICAgICAgICAgICAgLnJlcGxhY2UoJ3tpbnRlcmVzdHN9JywgdGhpcy51dGlscy5jaGVja0RhdGEoaW50ZXJlc3RUZW1wbGF0ZSkpXHJcbiAgICAgICAgICAgICAgICAgICAgLnJlcGxhY2UoJ3tsYW5ndWFnZXN9JywgdGhpcy51dGlscy5jaGVja0RhdGEobGFuZ3VhZ2VzVGVtcGxhdGUpKVxyXG4gICAgICAgICAgICAgICAgICAgIC5yZXBsYWNlKCd7cGhvdG9zfScsIHRoaXMudXRpbHMuY2hlY2tEYXRhKHBob3Rvc1RlbXBsYXRlKSk7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0Q3VycmVudFVzZXIoKXtcclxuICAgICAgICByZXR1cm4gIEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3VzZXJJbmZvJykpLnVzZXJJZDtcclxuICAgIH1cclxuXHJcbn0iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBQcm9maWxlVmlld3tcclxuICAgIGNvbnN0cnVjdG9yKHV0aWxzKXtcclxuICAgICAgICB0aGlzLnV0aWxzID0gdXRpbHM7XHJcbiAgICAgICAgdGhpcy53cmFwcGVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3dyYXBwZXInKTtcclxuICAgICAgICB0aGlzLnRlbXBsYXRlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3Byb2ZpbGUnKTtcclxuICAgICAgICB0aGlzLmZyaWVuZHNEaXZJZCA9ICdmcmllbmRzJztcclxuICAgICAgICB0aGlzLnVzZXJNZW51ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3VzZXJNZW51Jyk7XHJcbiAgICB9XHJcblxyXG4gICAgaW5pdCgpe1xyXG4gICAgICAgdGhpcy51dGlscy5zaG93VmlldyhbdGhpcy51c2VyTWVudV0pO1xyXG4gICAgfVxyXG4gICAgcGhvdG9zVGVtcGxhdGUocGhvdG9zKXtcclxuICAgICAgICBsZXQgdGVtcCA9ICcnO1xyXG4gICAgICAgIGZvcihsZXQgaSA9IDA7IGkgPCBwaG90b3MubGVuZ3RoOyBpKysgKXtcclxuICAgICAgICAgICAgcGhvdG9zVGVtcGxhdGUgKz0gYFxyXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZm1cIj5cclxuICAgICAgICAgICAgICAgIDxzbWFsbD4ke3Bob3Rvc1tpXS50aXRsZX08L3NtYWxsPlxyXG4gICAgICAgICAgICAgICAgPGltZyBzcmMgPSAke3Bob3Rvc1tpXS51cmx9IGRhdGEtd2lkdGg9XCI2NDBcIiBkYXRhLWhlaWdodD1cIjY0MFwiIGRhdGEtYWN0aW9uPVwiem9vbVwiPlxyXG4gICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgYDtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRlbXA7XHJcbiAgICB9XHJcblxyXG4gICAgdXNlclRlbXBsYXRlKHVzZXIpe1xyXG4gICAgcmV0dXJuIGA8bGkgY2xhc3M9XCJiXCI+XHJcbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJydiBhZHlcIj5cclxuICAgICAgICAgICAgICAgIDxpbWcgY2xhc3M9XCJib3MgdXMgYWZmXCIgc3JjPVwiJHt1c2VyLmF2YXRhcn1cIj5cclxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJydyB5ZFwiPlxyXG4gICAgICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9XCJjZyBueiBvayBhY3hcIj5cclxuICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cImggYmp1XCI+PC9zcGFuPiBVbmZvbGxvd1xyXG4gICAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxyXG4gICAgICAgICAgICAgICAgICAgIDxzdHJvbmc+JHt1c2VyLmZpcnN0bmFtZX0gJHt1c2VyLmxhc3RuYW1lfTwvc3Ryb25nPiB8XHJcbiAgICAgICAgICAgICAgICAgICAgPHNtYWxsPiR7dXNlci5jb250YWN0cy5jaXR5fTwvc21hbGw+XHJcbiAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgIDwvbGk+YFxyXG4gICAgfVxyXG4gICBcclxuICAgIHByaW50RnJpZW5kc0FmdGVyTG9hZChkYXRhKXtcclxuICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI1wiKyB0aGlzLmZyaWVuZHNEaXZJZCkuaW5uZXJIVE1MID0gZGF0YTtcclxuICAgIH1cclxuXHJcbiAgICBsYW5ndWFnZXNUZW1wbGF0ZShkYXRhKXtcclxuICAgICAgICBsZXQgdGVtcCA9ICcnO1xyXG4gICAgICAgIGZvcihsZXQgaSA9IDA7IGkgPCBkYXRhLmxlbmd0aDsgaSsrICl7XHJcbiAgICAgICAgICAgIHRlbXAgKz0gYDxsaSBjbGFzcz1cImNnXCI+PGltZyB3aWR0aCA9IFwiMThcIiB0aXRsZT1cIiAke2RhdGFbaV0udGl0bGV9XCIgc3JjID1cIiR7ZGF0YVtpXS5pY299XCI+PC9saT5gXHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0ZW1wO1xyXG4gICAgfVxyXG5cclxuICAgIGludGVyZXN0c1RlbXBsYXRlKGRhdGEpe1xyXG4gICAgICAgIGxldCB0ZW1wID0gJyc7XHJcbiAgICAgICAgZm9yKGxldCBpID0gMDsgaSA8IGRhdGEubGVuZ3RoOyBpKysgKXtcclxuICAgICAgICAgICAgdGVtcCArPSBgPGxpIGNsYXNzPVwiY2dcIj48aW1nIHdpZHRoID0gXCIxOFwiIHNyYyA9XCIke2RhdGFbaV0uaWNvfVwiPiAke2RhdGFbaV0udGl0bGV9PC9saT5gXHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0ZW1wO1xyXG4gICAgfVxyXG5cclxuICAgIHBob3Rvc1RlbXBsYXRlKHBob3Rvcyl7XHJcbiAgICAgICAgbGV0IHRlbXAgPSAnJztcclxuICAgICAgICBmb3IobGV0IGkgPSAwOyBpIDwgcGhvdG9zLmxlbmd0aDsgaSsrICl7XHJcbiAgICAgICAgICAgIHRlbXAgKz0gYFxyXG4gICAgICAgICAgICA8ZGl2IHN0eWxlPVwid2lkdGg6IDQ5JTttYXJnaW4tYm90dG9tOiAxMHB4OyAgZGlzcGxheTogaW5saW5lLWJsb2NrOyB2ZXJ0aWNhbC1hbGlnbjogYm90dG9tO1wiPlxyXG4gICAgICAgICAgICA8aDU+JHtwaG90b3NbaV0udGl0bGV9PC9oNT5cclxuICAgICAgICAgICAgPGltZyBkYXRhLXdpZHRoPVwiNjQwXCIgZGF0YS1oZWlnaHQ9XCI0MDBcIiBkYXRhLWFjdGlvbj1cInpvb21cIiBzcmM9XCIke3Bob3Rvc1tpXS51cmx9XCIgc3R5bGU9XCJ3aWR0aDogNDA1cHg7IGhlaWdodDogMjU0cHg7XCI+XHJcbiAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgYDtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRlbXA7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpbnRVc2VyRGF0YShkYXRhKXtcclxuICAgICAgICB0aGlzLnRlbXBsYXRlLmlubmVySFRNTCA9IGRhdGE7XHJcbiAgICB9XHJcbn0iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBEYXNoYm9hcmRDb250cm9sbGVye1xyXG4gICAgY29uc3RydWN0b3IobW9kZWwsIHZpZXcsIHV0aWxzKXtcclxuICAgICAgICB0aGlzLm1vZGVsID0gbW9kZWw7XHJcbiAgICAgICAgdGhpcy52aWV3ID0gdmlldztcclxuICAgICAgICB0aGlzLnV0aWxzID0gdXRpbHM7XHJcbiAgICAgICAgdGhpcy51c2VyID0gbnVsbDsgXHJcbiAgICAgICAgdGhpcy50ZW1wbGF0ZSA9IHRoaXMudmlldy50ZW1wbGF0ZS5pbm5lckhUTUw7XHJcbiAgICB9IFxyXG4gICAgXHJcbiAgICBhc3luYyBnZXRBbGxEYXRhKCl7XHJcbiAgICAgICAgYXdhaXQgdGhpcy5nZXRNYWluVXNlckluZm8odGhpcy51c2VyKTtcclxuICAgICAgICBhd2FpdCB0aGlzLmdldFBvc3RzKHRoaXMudXNlcik7XHJcbiAgICB9XHJcbiAgICBnZXRNYWluVXNlckluZm8odXNlcklkKXtcclxuICAgICAgICByZXR1cm4gdGhpcy5tb2RlbC5yZXF1ZXN0VXNlckluZm8odXNlcklkKS50aGVuKGRhdGEgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLm1ha2VVc2VyRGF0YVRlbXBsYXRlKGRhdGEpO1xyXG4gICAgICAgIH0pXHJcbiAgICB9XHJcblxyXG4gICAgbWFrZVVzZXJEYXRhVGVtcGxhdGUodXNlckRhdGEpe1xyXG4gICAgICAgIGxldCBwaG90b3NUZW1wID0gdGhpcy52aWV3LnBob3Rvc1RlbXBsYXRlKHVzZXJEYXRhLnBob3Rvcyk7XHJcbiAgICAgICAgdGhpcy50ZW1wbGF0ZSA9IHRoaXMubW9kZWwubWFrZVVzZXJEYXRhKHRoaXMudGVtcGxhdGUsIHBob3Rvc1RlbXAsICB1c2VyRGF0YSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy/Qv9GL0YLQsNGO0YHRjCDQuNC80LjRgtC40YDQvtCy0LDRgtGMINCx0LXQutC10L3QtCBcclxuICAgIGdldFBvc3RzKHVzZXJJZCl7XHJcbiAgICAgICAgbGV0IHBvc3RzVGVtcCA9ICcnO1xyXG4gICAgICAgICB0aGlzLm1vZGVsLnJlcXVlc3REYXNoYm9hcmRQb3N0cyh1c2VySWQpLnRoZW4oZGF0YSA9PiB7Ly/Qv9C+0LvRg9GH0LDRjiDQv9C+0YHRgtGLINC90LAg0YHRgtC10L3QtSDRjtC30LXRgNCwXHJcbiAgICAgICAgICAgIGRhdGEuZm9yRWFjaChwb3N0ID0+IHsvL9C40YLQtdGA0LjRgNGD0Y4g0L/QvtGB0YLRiyBcclxuICAgICAgICAgICAgICAgIHRoaXMubW9kZWwucmVxdWVzdFVzZXJJbmZvKHBvc3QudXNlcklkKS50aGVuKHVzZXIgPT57IC8vINC00LDQvdC90YvQtSDQsNCy0YLQvtGA0LAg0LTQu9GPINC60LDQttC00L7Qs9C+INC/0L7RgdGC0LBcclxuICAgICAgICAgICAgICAgICAgICBwb3N0c1RlbXAgKz0gdGhpcy52aWV3LnBvc3RzVGVtcGxhdGUodXNlci51c2VySW5mbywgdGhpcy51dGlscy5tb2RpZnlEYXRlYW5kVGltZShwb3N0LmRhdGUpLCBwb3N0LnRleHQpOy8v0LPQtdC90LXRgNC40YDRg9GOINC60L7QtCDQv9C+0YHRgtC+0LJcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnZpZXcucHJpbnRQb3N0c0FmdGVyTG9hZChwb3N0c1RlbXApOy8v0YPQttCw0YHQvdC+0LUg0L3QviDRgNCw0LHQvtGH0LXQtSDRgNC10YjQtdC90LjQtSA8LS1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KVxyXG4gICAgICAgIC8v0LrQsNC6INC/0L7Qu9GD0YfQuNGC0YwgcG9zdHNUZW1wINCy0L3QtSBmb3JlYWNoINC/0L7RgdC70LUg0LLRgdC10YUg0LfQsNC/0YDQvtGB0L7QsiA/XHJcblxyXG59XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgaW5pdCgpe1xyXG4gICAgICAgIHRoaXMudXNlciA9IHRoaXMubW9kZWwuZ2V0Q3VycmVudFVzZXIoKTtcclxuICAgICAgICB0aGlzLmdldEFsbERhdGEoKS50aGVuKChyZXNwb25zZSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMudmlldy5wcmludFVzZXJEYXRhKHRoaXMudGVtcGxhdGUpO1xyXG4gICAgICAgICAgICB0aGlzLnV0aWxzLmluaXRUZW1wbGF0ZSh0aGlzLnZpZXcud3JhcHBlciwgJ2Rhc2hib2FyZCcpO1xyXG4gICAgICAgICAgICB0aGlzLnZpZXcuaW5pdCgpO1xyXG4gICAgICAgIH0pKTsgICAgICBcclxuICAgIH1cclxufSIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIERhc2hib2FyZE1vZGVse1xyXG4gICAgY29uc3RydWN0b3IodXRpbHMpe1xyXG4gICAgICAgIHRoaXMudXJsID0gJ2h0dHA6Ly9sb2NhbGhvc3Q6MzAwMC91c2Vycy8nO1xyXG4gICAgICAgIHRoaXMudXRpbHMgPSB1dGlscztcclxuICAgIH1cclxuXHJcbiAgICByZXF1ZXN0VXNlckluZm8oaWQpe1xyXG4gICAgICAgIHJldHVybiBmZXRjaCh0aGlzLnVybCArIGlkKS50aGVuKHJlc3BvbmNlID0+IHJlc3BvbmNlLmpzb24oKSkudGhlbihkYXRhID0+IHtcclxuICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgIHVzZXJJbmZvIDogZGF0YS5tYWluSW5mbyxcclxuICAgICAgICAgICAgICAgIHBob3RvcyA6IGRhdGEucGhvdG9zXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIHJlcXVlc3REYXNoYm9hcmRQb3N0cyhpZCl7XHJcbiAgICAgICAgcmV0dXJuIGZldGNoKHRoaXMudXJsICsgaWQpLnRoZW4ocmVzcG9uY2UgPT4gcmVzcG9uY2UuanNvbigpKS50aGVuKGRhdGEgPT4geyAgXHJcbiAgICAgICAgICAgIHJldHVybiBkYXRhLmRhc2hib2FyZFBvc3RzO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICBtYWtlVXNlckRhdGEodGVtcGxhdGUsIHBob3Rvc1RlbXBsYXRlLCB1c2VyKXsvLyDQvdC1INCyINC80L7QtNC10LvQuFxyXG4gICAgICAgIHJldHVybiB0ZW1wbGF0ZS5yZXBsYWNlKCd7bmFtZX0nLCB1c2VyLnVzZXJJbmZvLmZpcnN0bmFtZSArJyAnKyB1c2VyLnVzZXJJbmZvLmxhc3RuYW1lKVxyXG4gICAgICAgICAgICAgICAgICAgIC5yZXBsYWNlKCd7YXZhdGFyfScsIHRoaXMudXRpbHMuY2hlY2tEYXRhKHVzZXIudXNlckluZm8uYXZhdGFyKSlcclxuICAgICAgICAgICAgICAgICAgICAucmVwbGFjZSgne3dhbGxwYXBlcn0nLCB0aGlzLnV0aWxzLmNoZWNrRGF0YSh1c2VyLnVzZXJJbmZvLndhbGxwYXBlcikpXHJcbiAgICAgICAgICAgICAgICAgICAgLnJlcGxhY2UoJ3tmcmllbmRzfScsIHRoaXMudXRpbHMuY2hlY2tEYXRhKHVzZXIudXNlckluZm8uZnJpZW5kcy5sZW5ndGgpKVxyXG4gICAgICAgICAgICAgICAgICAgIC5yZXBsYWNlKCd7c3RhdHVzfScsIHRoaXMudXRpbHMuY2hlY2tEYXRhKHVzZXIudXNlckluZm8uc3RhdHVzKSlcclxuICAgICAgICAgICAgICAgICAgICAucmVwbGFjZSgne2NpdHl9JywgdGhpcy51dGlscy5jaGVja0RhdGEodXNlci51c2VySW5mby5jb250YWN0cy5jaXR5KSlcclxuICAgICAgICAgICAgICAgICAgICAucmVwbGFjZSgne2pvYn0nLCB0aGlzLnV0aWxzLmNoZWNrRGF0YSh1c2VyLnVzZXJJbmZvLmpvYikpXHJcbiAgICAgICAgICAgICAgICAgICAgLnJlcGxhY2UoJ3twaG90b3N9JywgdGhpcy51dGlscy5jaGVja0RhdGEocGhvdG9zVGVtcGxhdGUpKTtcclxuICAgICAgICAgICAgICAgICAgXHJcbiAgICB9XHJcblxyXG4gICAgZ2V0Q3VycmVudFVzZXIoKXtcclxuICAgICAgICByZXR1cm4gIEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3VzZXJJbmZvJykpLnVzZXJJZDtcclxuICAgIH1cclxuXHJcbn0iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBEYXNoYm9hcmRWaWV3e1xyXG4gICAgY29uc3RydWN0b3IodXRpbHMpe1xyXG4gICAgICAgIHRoaXMudXRpbHMgPSB1dGlscztcclxuICAgICAgICB0aGlzLndyYXBwZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjd3JhcHBlcicpO1xyXG4gICAgICAgIHRoaXMudGVtcGxhdGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjZGFzaGJvYXJkJyk7XHJcbiAgICAgICAgdGhpcy5wb3N0c0RpdklkID0gJ3Bvc3RzJztcclxuICAgICAgICB0aGlzLnVzZXJNZW51ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3VzZXJNZW51Jyk7XHJcbiAgICB9XHJcblxyXG4gICAgaW5pdCgpe1xyXG4gICAgICAgdGhpcy51dGlscy5zaG93VmlldyhbdGhpcy51c2VyTWVudV0pXHJcbiAgICB9XHJcbiAgICBwcmludFVzZXJEYXRhKGRhdGEpe1xyXG4gICAgICAgIHRoaXMudGVtcGxhdGUuaW5uZXJIVE1MID0gZGF0YTtcclxuICAgIH1cclxuXHJcbiAgICBwcmludFBvc3RzQWZ0ZXJMb2FkKGRhdGEpe1xyXG4gICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjXCIrIHRoaXMucG9zdHNEaXZJZCkuaW5uZXJIVE1MID0gZGF0YTtcclxuICAgIH1cclxuXHJcbiAgICBwb3N0c1RlbXBsYXRlKHVzZXIsIGRhdGUsIHRleHQpe1xyXG4gICAgICAgIHJldHVybiBgXHJcbiAgICAgICAgPGxpIGNsYXNzPVwicnYgYiBhZ3pcIj5cclxuICAgICAgICAgICAgPGltZyBjbGFzcz1cImJvcyB2YiB5YiBhZmZcIiBzcmM9XCIke3VzZXIuYXZhdGFyfVwiPlxyXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwicndcIj5cclxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJicGJcIj5cclxuICAgICAgICAgICAgICAgICAgICA8c21hbGwgY2xhc3M9XCJhY3ggYXhjXCI+JHtkYXRlfTwvc21hbGw+XHJcbiAgICAgICAgICAgICAgICAgICAgPGg2PiR7dXNlci5maXJzdG5hbWV9ICR7dXNlci5sYXN0bmFtZX08L2g2PlxyXG4gICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICA8cD4ke3RleHR9PC9wPlxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgICA8L2xpPmBcclxuICAgIH1cclxuXHJcbiAgICBpbWFnZXNUZW1wbGF0ZShpbWcpe1xyXG4gICAgICAgIHJldHVybiBgPGRpdj4ke2ltZ308L2Rpdj5gXHJcbiAgICB9XHJcblxyXG4gICAgcGhvdG9zVGVtcGxhdGUocGhvdG9zKXtcclxuICAgICAgICBsZXQgcGhvdG9zVGVtcGxhdGUgPSAnJztcclxuICAgICAgICBmb3IobGV0IGkgPSAwOyBpPDI7IGkrKyApe1xyXG4gICAgICAgICAgICBwaG90b3NUZW1wbGF0ZSArPSBgXHJcbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJmbVwiPlxyXG4gICAgICAgICAgICAgICAgPHNtYWxsPiR7cGhvdG9zW2ldLnRpdGxlfTwvc21hbGw+XHJcbiAgICAgICAgICAgICAgICA8aW1nIHNyYyA9ICR7cGhvdG9zW2ldLnVybH0gZGF0YS13aWR0aD1cIjY0MFwiIGRhdGEtaGVpZ2h0PVwiNjQwXCIgZGF0YS1hY3Rpb249XCJ6b29tXCI+XHJcbiAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICBgO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gcGhvdG9zVGVtcGxhdGU7XHJcbiAgICB9XHJcbn0iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBMb2dpbkNvbnRyb2xsZXJ7XHJcblx0Y29uc3RydWN0b3IobW9kZWwsIHZpZXcsIHV0aWxzLCB2YWxpZGF0b3Ipe1xyXG5cdFx0dGhpcy52aWV3ID0gdmlldztcclxuXHRcdHRoaXMubW9kZWwgPSBtb2RlbDtcclxuXHRcdHRoaXMudmFsaWRhdG9yID0gdmFsaWRhdG9yO1xyXG5cdFx0dGhpcy51dGlscyA9IHV0aWxzO1xyXG5cdFx0dGhpcy5jdXJyZW50TG9naW4gPSBudWxsO1xyXG5cdFx0dGhpcy5jdXJyZW50cGFzcyA9IG51bGw7XHJcblx0XHR0aGlzLnVzZXJNZW51U2VsZWN0b3IgPSAnI3VzZXJNZW51J1xyXG5cdH1cclxuXHRcclxuXHRpbml0KCl7XHJcblx0XHR0aGlzLnZpZXcuaW5pdCgpO1xyXG5cdFx0dGhpcy5pbml0TGlzdGVuZXJzKCk7XHJcblx0XHR0aGlzLmlzTG9nZ2VkKCkgJiYgdGhpcy5sb2dnZWQoKTtcclxuXHRcdFxyXG5cdH1cclxuXHRcclxuXHRpbml0TGlzdGVuZXJzKCl7XHJcblx0XHR0aGlzLnZpZXcuZ29Mb2dpbkJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuZ29Mb2dpbi5iaW5kKHRoaXMpKTtcclxuXHRcdC8vdGhpcy52aWV3LmxvZ291dEJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMubG9nb3V0LmJpbmQodGhpcykpO1xyXG5cdH1cclxuXHJcblx0dmFsaWRhdGVVc2VyRGF0YSgpe1xyXG5cdFx0dGhpcy52YWxpZGF0b3IuaXNWYWxpZCh0aGlzLnZpZXcuaW5wdXRMb2dpbiwgdGhpcy52aWV3LmlucHV0UGFzcykgPyB0aGlzLmNoZWNrTG9naW5EYXRhKCkgOiB0aGlzLnZpZXcuc2hvd0Vycm9yTXNnKHRoaXMudmFsaWRhdG9yLmdldEFsZXJ0TXNnKCkpO1xyXG5cdFx0XHJcblx0fVxyXG5cclxuXHRjaGVja0xvZ2luRGF0YSgpe1xyXG5cdFx0bGV0IGxvZ2luID0gdGhpcy52aWV3LmlucHV0TG9naW4udmFsdWU7XHJcblx0XHRsZXQgcGFzcyA9IHRoaXMudmlldy5pbnB1dFBhc3MudmFsdWU7XHJcblxyXG5cdFx0dGhpcy5tb2RlbC5yZXF1ZXN0VXNlckxvZ2luRGF0YShsb2dpbiwgcGFzcykudGhlbih1c2VyID0+IHtcclxuXHRcdFx0aWYodXNlcil7XHJcblx0XHRcdFx0dGhpcy5tb2RlbC5zYXZlVXNlckRhdGEodHJ1ZSwgdXNlci51c2VySWQpO1xyXG5cdFx0XHRcdHRoaXMubG9nZ2VkKCk7XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0dGhpcy52aWV3LnNob3dFcnJvck1zZygn0JLRiyDQstCy0LXQu9C4INC90LXRgdGD0YnQtdGB0YLQstGD0Y7RidC40Lkg0LvQvtCz0LjQvSDQuNC70Lgg0L3QtdCy0LXRgNC90YvQuSDQv9Cw0YDQvtC70YwhJyk7XHJcblx0XHRcdH1cclxuXHRcdH0pO1xyXG5cdH1cclxuXHJcblx0Z29Mb2dpbihlKXtcclxuXHRcdGUucHJldmVudERlZmF1bHQoKTtcclxuXHRcdHRoaXMudmlldy5oaWRlRXJyb3JzTXNnKCk7XHJcblx0XHR0aGlzLnZhbGlkYXRlVXNlckRhdGEoKTtcclxuXHR9XHJcblxyXG5cdGxvZ2dlZCgpe1xyXG5cdFx0ZG9jdW1lbnQubG9jYXRpb24uaHJlZiA9ICcnO1xyXG5cdFx0dGhpcy51dGlscy5oaWRlVmlldyhbdGhpcy51c2VyTWVudV0pO1xyXG5cdFx0XHJcblx0fVxyXG5cdFxyXG5cdGxvZ291dCgpe1xyXG5cdFx0dGhpcy5tb2RlbC5zYXZlVXNlckRhdGEoZmFsc2UpO1xyXG5cdFx0ZG9jdW1lbnQubG9jYXRpb24uaHJlZiA9ICcjbG9naW4nO1xyXG5cdFx0XHJcblx0fVxyXG5cclxuXHRpc0xvZ2dlZCgpe1xyXG5cdFx0bGV0IGRhdGEgPSB0aGlzLm1vZGVsLmdldFVzZXJJbmZvKCk7XHJcblx0XHRyZXR1cm4gZGF0YSAmJiBKU09OLnBhcnNlKGRhdGEpLmlzTG9nZ2VkO1xyXG5cdH1cclxuXHRcdFxyXG59IiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgTG9naW5Nb2RlbHtcclxuICAgIGNvbnN0cnVjdG9yKCl7XHJcbiAgICAgICAgdGhpcy51cmwgPSAnaHR0cDovL2xvY2FsaG9zdDozMDAwL3VzZXJzLyc7XHJcbiAgICB9ICBcclxuICAgIHJlcXVlc3RVc2VyTG9naW5EYXRhKGxvZ2luLCBwYXNzKXtcclxuICAgICAgICByZXR1cm4gZmV0Y2godGhpcy51cmwpLnRoZW4ocmVzcG9uY2UgPT4gcmVzcG9uY2UuanNvbigpKS50aGVuKHVzZXJzID0+IHtcclxuICAgICAgICAgICAgZm9yKGxldCBpID0gMDsgaSA8IHVzZXJzLmxlbmd0aDsgaSsrKXtcclxuICAgICAgICAgICAgICAgIGlmKCh1c2Vyc1tpXS5sb2dpbkRhdGEubG9naW4gPT0gbG9naW4pICYmICh1c2Vyc1tpXS5sb2dpbkRhdGEucGFzc3dvcmQgPT0gcGFzcykpe1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB1c2Vyc1tpXTtcclxuICAgICAgICAgICAgICAgICAgICBicmVha1xyXG4gICAgICAgICAgICAgICAgfSBcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gdXNlcnMubG9naW5EYXRhO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGdldExvZ2luT3B0aW9ucyhsb2dpbiwgcGFzcyl7XHJcbiAgICAgICAgbGV0IGJvZHkgPSB7XHJcblx0XHRcdGxvZ2luIDogbG9naW4sXHJcblx0XHRcdHBhc3MgOiBwYXNzXHJcblx0XHR9O1xyXG4gICAgICAgIGxldCBvcHRpb25zID0ge1xyXG5cdFx0XHRtZXRob2QgOiAncG9zdCcsXHJcblx0XHRcdGhlYWRlcnM6IHtcclxuXHRcdFx0XHQnQ29udGVudC10eXBlJzogJ2FwcGxpY2F0aW9uL2pzb247IGNoYXJzZXQ9dXRmLTgnXHJcblx0XHRcdH0sXHJcblx0XHRcdGJvZHkgOiBKU09OLnN0cmluZ2lmeShib2R5KVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgcmV0dXJuIG9wdGlvbnM7ICBcclxuICAgIH07XHJcbiAgICBnZXRVc2VySW5mbygpe1xyXG4gICAgICAgIHJldHVybiBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgndXNlckluZm8nKTtcclxuICAgIH1cclxuXHJcbiAgICBzYXZlVXNlckRhdGEobG9nZ2VkU3RhdHVzLCB1c2VySWQsKXtcclxuXHRcdGxldCBkYXRhICA9IHtcclxuXHRcdFx0dXNlcklkIDogdXNlcklkLFxyXG5cdFx0XHRpc0xvZ2dlZDpsb2dnZWRTdGF0dXNcclxuXHRcdH1cclxuXHRcdHRoaXMuc2V0VXNlckluZm8oZGF0YSk7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIHNldFVzZXJJbmZvKGRhdGEpe1xyXG4gICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCd1c2VySW5mbycsIEpTT04uc3RyaW5naWZ5KGRhdGEpKTtcclxuICAgIH1cclxufSIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIExvZ2luVmlld3tcclxuICAgIGNvbnN0cnVjdG9yKHV0aWxzKXtcclxuICAgICAgICB0aGlzLnV0aWxzID0gdXRpbHM7XHJcbiAgICAgICAgdGhpcy50ZW1wbGF0ZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNsb2dpbicpO1xyXG4gICAgICAgIHRoaXMud3JhcHBlciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyN3cmFwcGVyJyk7XHJcbiAgICAgICAgdGhpcy5pbnB1dExvZ2luID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmlucHV0LWxvZ2luJyk7XHJcbiAgICAgICAgdGhpcy5pbnB1dFBhc3MgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuaW5wdXQtcGFzcycpO1xyXG4gICAgICAgIHRoaXMuZXJyb3JEaXYgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYWxlcnQnKTsgXHJcbiAgICAgICAgdGhpcy5nb0xvZ2luQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmdvTG9naW4nKTtcclxuICAgICAgICB0aGlzLmxvZ291dEJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5sb2dvdXQnKTtcclxuICAgICAgICB0aGlzLnVzZXJNZW51ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3VzZXJNZW51Jyk7XHJcbiAgICB9XHJcblxyXG4gICAgaW5pdCgpe1xyXG4gICAgICAgIHRoaXMudXRpbHMuaGlkZVZpZXcoW3RoaXMudXNlck1lbnVdKTtcclxuICAgIH1cclxuXHJcbiAgICBzaG93RXJyb3JNc2cobXNnKXtcclxuICAgICAgICB0aGlzLmVycm9yRGl2LmlubmVySFRNTCA9IG1zZztcclxuICAgIH1cclxuXHJcbiAgICBoaWRlRXJyb3JzTXNnKCl7XHJcbiAgICAgICAgdGhpcy5lcnJvckRpdi5pbm5lckhUTUwgPSAnJztcclxuICAgIH1cclxuXHJcbn0iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBQcm9maWxlQ29udHJvbGxlcntcclxuICAgIGNvbnN0cnVjdG9yKG1vZGVsLCB2aWV3LCB1dGlscyl7XHJcbiAgICAgICAgdGhpcy5tb2RlbCA9IG1vZGVsO1xyXG4gICAgICAgIHRoaXMudmlldyA9IHZpZXc7XHJcbiAgICAgICAgdGhpcy51dGlscyA9IHV0aWxzO1xyXG4gICAgICAgIHRoaXMudXNlciA9IG51bGw7XHJcbiAgICAgICAgdGhpcy50ZW1wbGF0ZSA9IHRoaXMudmlldy50ZW1wbGF0ZS5pbm5lckhUTUw7XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgZ2V0QWxsRGF0YSgpe1xyXG4gICAgICAgIGF3YWl0IHRoaXMuZ2V0TWFpblVzZXJJbmZvKHRoaXMudXNlcik7XHJcbiAgICAgICAgYXdhaXQgdGhpcy5nZXRGcmllbmRzSW5mbyh0aGlzLnVzZXIpO1xyXG4gICAgfVxyXG5cclxuICAgIGdldE1haW5Vc2VySW5mbyh1c2VySWQpe1xyXG4gICAgICAgIHJldHVybiB0aGlzLm1vZGVsLnJlcXVlc3RBbGxVc2VySW5mbyh1c2VySWQpLnRoZW4oZGF0YSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMubWFrZVVzZXJEYXRhVGVtcGxhdGUoZGF0YSk7XHJcbiAgICAgICAgfSlcclxuICAgIH1cclxuXHJcbiAgICBtYWtlVXNlckRhdGFUZW1wbGF0ZSh1c2VyRGF0YSl7XHJcbiAgICAgICAgbGV0IGxhbmdUZW1wID0gdGhpcy52aWV3Lmxhbmd1YWdlc1RlbXBsYXRlKHVzZXJEYXRhLm90aGVySW5mby5sYW5ndWFnZXMpO1xyXG4gICAgICAgIGxldCBpbnRlcmVzdHNUZW1wID0gdGhpcy52aWV3LmludGVyZXN0c1RlbXBsYXRlKHVzZXJEYXRhLm90aGVySW5mby5pbnRlcmVzdHMpO1xyXG4gICAgICAgIGxldCBwaG90b3NUZW1wID0gdGhpcy52aWV3LnBob3Rvc1RlbXBsYXRlKHVzZXJEYXRhLnBob3Rvcyk7XHJcbiAgICAgICAgdGhpcy50ZW1wbGF0ZSA9IHRoaXMubW9kZWwubWFrZVVzZXJEYXRhKHRoaXMudGVtcGxhdGUsIHVzZXJEYXRhLCBpbnRlcmVzdHNUZW1wLCBsYW5nVGVtcCwgcGhvdG9zVGVtcCk7XHJcbiAgICB9XHJcbiAgICAvL9C/0YvRgtCw0Y7RgdGMINC40LzQuNGC0LjRgNC+0LLQsNGC0Ywg0LHQtdC60LXQvdC0IFxyXG4gICAgZ2V0RnJpZW5kc0luZm8odXNlcklkKXtcclxuICAgICAgIGxldCB0ZW1wbGF0ZSA9ICcnO1xyXG4gICAgICAgICB0aGlzLm1vZGVsLnJlcXVlc3RGcmllbmRzKHVzZXJJZCkudGhlbihmcmllbmRzICA9PiB7Ly/Qv9C+0LvRg9GH0LDQtdC8IGlkINCy0YHQtdGFINC00YDRg9C30LXQuSDQv9C+0LvRjNC30L7QstCw0YLQtdC70Y9cclxuICAgICAgICAgICBmcmllbmRzLmZvckVhY2goaWQgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5tb2RlbC5yZXF1ZXN0QWxsVXNlckluZm8oaWQpLnRoZW4odXNlciA9PiB7Ly/Qv9C+0LvRg9GH0LDQtdC8INC40L3RhNC+0YDQvNCw0YbQuNGPINC+INC60LDQttC00L7QvCDQtNGA0YPQs9C1XHJcbiAgICAgICAgICAgICAgICAgICAgdGVtcGxhdGUgICs9IHRoaXMudmlldy51c2VyVGVtcGxhdGUodXNlci5tYWluSW5mbyk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy52aWV3LnByaW50RnJpZW5kc0FmdGVyTG9hZCh0ZW1wbGF0ZSk7Ly/Rg9C20LDRgdC90L7QtSDQvdC+INGA0LDQsdC+0YfQtdC1INGA0LXRiNC10L3QuNC1IDwtLVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgLy/QutCw0Log0LTQvtGB0YLQsNGC0YwgdGVtcGxhdGUg0LLQvdC1IGZvcmVhY2gg0L/QvtGB0LvQtSDQstGB0LXRhSBmZXRjaD9cclxuICAgICAgICAgICBcclxuICAgICAgICB9KVxyXG4gICAgfVxyXG4gICAgaW5pdCgpe1xyXG4gICAgICAgIHRoaXMudXNlciA9IHRoaXMubW9kZWwuZ2V0Q3VycmVudFVzZXIoKTtcclxuICAgICAgICB0aGlzLmdldEFsbERhdGEoKS50aGVuKChyZXNwb25zZSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMudmlldy5wcmludFVzZXJEYXRhKHRoaXMudGVtcGxhdGUpO1xyXG4gICAgICAgICAgICB0aGlzLnV0aWxzLmluaXRUZW1wbGF0ZSh0aGlzLnZpZXcud3JhcHBlciwgJ3Byb2ZpbGUnKTtcclxuICAgICAgICAgICAgdGhpcy52aWV3LmluaXQoKTtcclxuICAgICAgICB9KSk7ICAgICAgXHJcbiAgICB9XHJcbn0iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBQcm9maWxlTW9kZWx7XHJcbiAgICBjb25zdHJ1Y3Rvcih1dGlscyl7XHJcbiAgICAgICAgdGhpcy51dGlscyA9IHV0aWxzO1xyXG4gICAgICAgIHRoaXMudXJsID0gJ2h0dHA6Ly9sb2NhbGhvc3Q6MzAwMC91c2Vycy8nO1xyXG4gICAgfVxyXG5cclxuICAgIHJlcXVlc3RBbGxVc2VySW5mbyhpZCl7XHJcbiAgICAgICAgcmV0dXJuIGZldGNoKHRoaXMudXJsK2lkKS50aGVuKHJlc3BvbmNlID0+IHJlc3BvbmNlLmpzb24oKSlcclxuICAgIH1cclxuICAgIFxyXG4gICAgcmVxdWVzdEZyaWVuZHMoaWQpe1xyXG4gICAgICAgIHJldHVybiBmZXRjaCh0aGlzLnVybCtpZCkudGhlbihyZXNwb25jZSA9PiByZXNwb25jZS5qc29uKCkpLnRoZW4oZGF0YSA9PiB7ICBcclxuICAgICAgICAgICAgcmV0dXJuIGRhdGEubWFpbkluZm8uZnJpZW5kc1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIG1ha2VVc2VyRGF0YSh0ZW1wbGF0ZSwgdXNlciwgaW50ZXJlc3RUZW1wbGF0ZSwgbGFuZ3VhZ2VzVGVtcGxhdGUsIHBob3Rvc1RlbXBsYXRlKXtcclxuICAgICAgICBsZXQgYWdlID0gYCAoJHt0aGlzLnV0aWxzLmhvd1RpbWVQYXNzZWQodXNlci5tYWluSW5mby5iaXJ0aGRheSl9KWA7XHJcbiAgICAgICAgcmV0dXJuIHRlbXBsYXRlLnJlcGxhY2UoJ3tuYW1lfScsIHVzZXIubWFpbkluZm8uZmlyc3RuYW1lICsnICcrIHVzZXIubWFpbkluZm8ubGFzdG5hbWUpXHJcbiAgICAgICAgICAgICAgICAgICAgLnJlcGxhY2UoJ3thdmF0YXJ9JywgdGhpcy51dGlscy5jaGVja0RhdGEodXNlci5tYWluSW5mby5hdmF0YXIpKVxyXG4gICAgICAgICAgICAgICAgICAgIC5yZXBsYWNlKCd7d2FsbHBhcGVyfScsIHRoaXMudXRpbHMuY2hlY2tEYXRhKHVzZXIubWFpbkluZm8ud2FsbHBhcGVyKSlcclxuICAgICAgICAgICAgICAgICAgICAucmVwbGFjZSgne3N0YXR1c30nLCB0aGlzLnV0aWxzLmNoZWNrRGF0YSh1c2VyLm1haW5JbmZvLnN0YXR1cykpXHJcbiAgICAgICAgICAgICAgICAgICAgLnJlcGxhY2UoJ3tiaXJ0aGRheX0nLCB0aGlzLnV0aWxzLm1vZGlmeURhdGUodXNlci5tYWluSW5mby5iaXJ0aGRheSkgKyBhZ2UpXHJcbiAgICAgICAgICAgICAgICAgICAgLnJlcGxhY2UoJ3tnZW5kZXJ9JywgdGhpcy51dGlscy5jaGVja0RhdGEodXNlci5tYWluSW5mby5nZW5kZXIpKVxyXG4gICAgICAgICAgICAgICAgICAgIC5yZXBsYWNlKCd7am9ifScsIHRoaXMudXRpbHMuY2hlY2tEYXRhKHVzZXIubWFpbkluZm8uam9iKSlcclxuICAgICAgICAgICAgICAgICAgICAucmVwbGFjZSgne2VkdWNhdGlvbn0nLCB0aGlzLnV0aWxzLmNoZWNrRGF0YSh1c2VyLm90aGVySW5mby5lZHVjYXRpb24pKVxyXG4gICAgICAgICAgICAgICAgICAgIC5yZXBsYWNlKCd7ZW1haWx9JywgdGhpcy51dGlscy5jaGVja0RhdGEodXNlci5tYWluSW5mby5jb250YWN0cy5lbWFpbCkpXHJcbiAgICAgICAgICAgICAgICAgICAgLnJlcGxhY2UoJ3tjaXR5fScsIHRoaXMudXRpbHMuY2hlY2tEYXRhKHVzZXIubWFpbkluZm8uY29udGFjdHMuY2l0eSkpXHJcbiAgICAgICAgICAgICAgICAgICAgLnJlcGxhY2UoJ3t0ZWxlZ3JhbX0nLCB0aGlzLnV0aWxzLmNoZWNrRGF0YSh1c2VyLm1haW5JbmZvLmNvbnRhY3RzLnRlbGVncmFtKSlcclxuICAgICAgICAgICAgICAgICAgICAucmVwbGFjZSgne3NreXBlfScsIHRoaXMudXRpbHMuY2hlY2tEYXRhKHVzZXIubWFpbkluZm8uY29udGFjdHMuc2t5cGUpKVxyXG4gICAgICAgICAgICAgICAgICAgIC5yZXBsYWNlKCd7YWJvdXR9JywgdGhpcy51dGlscy5jaGVja0RhdGEodXNlci5vdGhlckluZm8uYWJvdXQpKVxyXG4gICAgICAgICAgICAgICAgICAgIC5yZXBsYWNlKCd7aW50ZXJlc3RzfScsIHRoaXMudXRpbHMuY2hlY2tEYXRhKGludGVyZXN0VGVtcGxhdGUpKVxyXG4gICAgICAgICAgICAgICAgICAgIC5yZXBsYWNlKCd7bGFuZ3VhZ2VzfScsIHRoaXMudXRpbHMuY2hlY2tEYXRhKGxhbmd1YWdlc1RlbXBsYXRlKSlcclxuICAgICAgICAgICAgICAgICAgICAucmVwbGFjZSgne3Bob3Rvc30nLCB0aGlzLnV0aWxzLmNoZWNrRGF0YShwaG90b3NUZW1wbGF0ZSkpO1xyXG4gICAgfVxyXG5cclxuICAgIGdldEN1cnJlbnRVc2VyKCl7XHJcbiAgICAgICAgcmV0dXJuICBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCd1c2VySW5mbycpKS51c2VySWQ7XHJcbiAgICB9XHJcblxyXG59IiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgUHJvZmlsZVZpZXd7XHJcbiAgICBjb25zdHJ1Y3Rvcih1dGlscyl7XHJcbiAgICAgICAgdGhpcy51dGlscyA9IHV0aWxzO1xyXG4gICAgICAgIHRoaXMud3JhcHBlciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyN3cmFwcGVyJyk7XHJcbiAgICAgICAgdGhpcy50ZW1wbGF0ZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNwcm9maWxlJyk7XHJcbiAgICAgICAgdGhpcy5mcmllbmRzRGl2SWQgPSAnZnJpZW5kcyc7XHJcbiAgICAgICAgdGhpcy51c2VyTWVudSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyN1c2VyTWVudScpO1xyXG4gICAgfVxyXG5cclxuICAgIGluaXQoKXtcclxuICAgICAgIHRoaXMudXRpbHMuc2hvd1ZpZXcoW3RoaXMudXNlck1lbnVdKTtcclxuICAgIH1cclxuICAgIHBob3Rvc1RlbXBsYXRlKHBob3Rvcyl7XHJcbiAgICAgICAgbGV0IHRlbXAgPSAnJztcclxuICAgICAgICBmb3IobGV0IGkgPSAwOyBpIDwgcGhvdG9zLmxlbmd0aDsgaSsrICl7XHJcbiAgICAgICAgICAgIHBob3Rvc1RlbXBsYXRlICs9IGBcclxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cImZtXCI+XHJcbiAgICAgICAgICAgICAgICA8c21hbGw+JHtwaG90b3NbaV0udGl0bGV9PC9zbWFsbD5cclxuICAgICAgICAgICAgICAgIDxpbWcgc3JjID0gJHtwaG90b3NbaV0udXJsfSBkYXRhLXdpZHRoPVwiNjQwXCIgZGF0YS1oZWlnaHQ9XCI2NDBcIiBkYXRhLWFjdGlvbj1cInpvb21cIj5cclxuICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgIGA7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0ZW1wO1xyXG4gICAgfVxyXG5cclxuICAgIHVzZXJUZW1wbGF0ZSh1c2VyKXtcclxuICAgIHJldHVybiBgPGxpIGNsYXNzPVwiYlwiPlxyXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwicnYgYWR5XCI+XHJcbiAgICAgICAgICAgICAgICA8aW1nIGNsYXNzPVwiYm9zIHVzIGFmZlwiIHNyYz1cIiR7dXNlci5hdmF0YXJ9XCI+XHJcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwicncgeWRcIj5cclxuICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzPVwiY2cgbnogb2sgYWN4XCI+XHJcbiAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJoIGJqdVwiPjwvc3Bhbj4gVW5mb2xsb3dcclxuICAgICAgICAgICAgICAgICAgICA8L2J1dHRvbj5cclxuICAgICAgICAgICAgICAgICAgICA8c3Ryb25nPiR7dXNlci5maXJzdG5hbWV9ICR7dXNlci5sYXN0bmFtZX08L3N0cm9uZz4gfFxyXG4gICAgICAgICAgICAgICAgICAgIDxzbWFsbD4ke3VzZXIuY29udGFjdHMuY2l0eX08L3NtYWxsPlxyXG4gICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICA8L2xpPmBcclxuICAgIH1cclxuICAgXHJcbiAgICBwcmludEZyaWVuZHNBZnRlckxvYWQoZGF0YSl7XHJcbiAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNcIisgdGhpcy5mcmllbmRzRGl2SWQpLmlubmVySFRNTCA9IGRhdGE7XHJcbiAgICB9XHJcblxyXG4gICAgbGFuZ3VhZ2VzVGVtcGxhdGUoZGF0YSl7XHJcbiAgICAgICAgbGV0IHRlbXAgPSAnJztcclxuICAgICAgICBmb3IobGV0IGkgPSAwOyBpIDwgZGF0YS5sZW5ndGg7IGkrKyApe1xyXG4gICAgICAgICAgICB0ZW1wICs9IGA8bGkgY2xhc3M9XCJjZ1wiPjxpbWcgd2lkdGggPSBcIjE4XCIgdGl0bGU9XCIgJHtkYXRhW2ldLnRpdGxlfVwiIHNyYyA9XCIke2RhdGFbaV0uaWNvfVwiPjwvbGk+YFxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdGVtcDtcclxuICAgIH1cclxuXHJcbiAgICBpbnRlcmVzdHNUZW1wbGF0ZShkYXRhKXtcclxuICAgICAgICBsZXQgdGVtcCA9ICcnO1xyXG4gICAgICAgIGZvcihsZXQgaSA9IDA7IGkgPCBkYXRhLmxlbmd0aDsgaSsrICl7XHJcbiAgICAgICAgICAgIHRlbXAgKz0gYDxsaSBjbGFzcz1cImNnXCI+PGltZyB3aWR0aCA9IFwiMThcIiBzcmMgPVwiJHtkYXRhW2ldLmljb31cIj4gJHtkYXRhW2ldLnRpdGxlfTwvbGk+YFxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdGVtcDtcclxuICAgIH1cclxuXHJcbiAgICBwaG90b3NUZW1wbGF0ZShwaG90b3Mpe1xyXG4gICAgICAgIGxldCB0ZW1wID0gJyc7XHJcbiAgICAgICAgZm9yKGxldCBpID0gMDsgaSA8IHBob3Rvcy5sZW5ndGg7IGkrKyApe1xyXG4gICAgICAgICAgICB0ZW1wICs9IGBcclxuICAgICAgICAgICAgPGRpdiBzdHlsZT1cIndpZHRoOiA0OSU7bWFyZ2luLWJvdHRvbTogMTBweDsgIGRpc3BsYXk6IGlubGluZS1ibG9jazsgdmVydGljYWwtYWxpZ246IGJvdHRvbTtcIj5cclxuICAgICAgICAgICAgPGg1PiR7cGhvdG9zW2ldLnRpdGxlfTwvaDU+XHJcbiAgICAgICAgICAgIDxpbWcgZGF0YS13aWR0aD1cIjY0MFwiIGRhdGEtaGVpZ2h0PVwiNDAwXCIgZGF0YS1hY3Rpb249XCJ6b29tXCIgc3JjPVwiJHtwaG90b3NbaV0udXJsfVwiIHN0eWxlPVwid2lkdGg6IDQwNXB4OyBoZWlnaHQ6IDI1NHB4O1wiPlxyXG4gICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgIGA7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0ZW1wO1xyXG4gICAgfVxyXG5cclxuICAgIHByaW50VXNlckRhdGEoZGF0YSl7XHJcbiAgICAgICAgdGhpcy50ZW1wbGF0ZS5pbm5lckhUTUwgPSBkYXRhO1xyXG4gICAgfVxyXG59IiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgVXRpbHN7XHJcbiAgICBjb25zdHJ1Y3Rvcigpe1xyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyBzaG93VmlldyhlbGVtKXtcclxuICAgICAgICBlbGVtLmZvckVhY2goaXRlbSA9PiB7XHJcbiAgICAgICAgICAgIGl0ZW0uY2xhc3NMaXN0LnJlbW92ZSgnZC1ub25lJyk7XHJcbiAgICAgICAgfSlcclxuICAgIH1cclxuXHJcbiAgICBzdGF0aWMgaGlkZVZpZXcoZWxlbSl7XHJcbiAgICAgICAgZWxlbS5mb3JFYWNoKGZ1bmN0aW9uKGl0ZW0pe1xyXG4gICAgICAgICAgICBpdGVtLmNsYXNzTGlzdC5hZGQoJ2Qtbm9uZScpO1xyXG4gICAgICAgIH0pXHJcbiAgICB9XHJcbiAgICBzdGF0aWMgbmF2aWdhdGVUbyhyb3V0ZU5hbWUpe1xyXG4gICAgICAgIHdpbmRvdy5sb2NhdGlvbi5oYXNoID0gJyMnICsgcm91dGVOYW1lO1xyXG4gICAgfVxyXG4gICAgc3RhdGljIGluaXRUZW1wbGF0ZSh3cmFwcGVyRGl2LCB0ZW1wbGF0ZUlkKXtcclxuICAgICAgICBsZXQgdGVtcGxhdGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAjJHt0ZW1wbGF0ZUlkfWApO1xyXG4gICAgICAgIGxldCB0ZW1wQ2xvbmUgPSB0ZW1wbGF0ZS5jb250ZW50LmNsb25lTm9kZSh0cnVlKTtcclxuICAgICAgICB3cmFwcGVyRGl2LmlubmVySFRNTCA9ICcnO1xyXG4gICAgICAgIHdyYXBwZXJEaXYuYXBwZW5kQ2hpbGQodGVtcENsb25lKTtcclxuXHJcbiAgICB9XHJcbiAgICBzdGF0aWMgbW9kaWZ5RGF0ZShzZWNvbmRzKXtcclxuICAgICAgICBsZXQgZGF0ZSA9IG5ldyBEYXRlKHBhcnNlSW50KHNlY29uZHMpKTtcclxuICAgICAgICByZXR1cm4gZGF0ZS50b0xvY2FsZURhdGVTdHJpbmcoKTtcclxuICAgIH1cclxuXHJcbiAgICBzdGF0aWMgbW9kaWZ5RGF0ZWFuZFRpbWUoc2Vjb25kcyl7XHJcbiAgICAgICAgbGV0IGRhdGUgPSBuZXcgRGF0ZShwYXJzZUludChzZWNvbmRzKSk7XHJcbiAgICAgICAgcmV0dXJuIGRhdGUudG9Mb2NhbGVEYXRlU3RyaW5nKCkgKycgfCAnKyBkYXRlLnRvTG9jYWxlVGltZVN0cmluZygncnUtUlUnKVxyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyBob3dUaW1lUGFzc2VkKHNlY29uZHMpe1xyXG4gICAgICAgIGxldCBkYXRlID0gbmV3IERhdGUocGFyc2VJbnQoc2Vjb25kcykpO1xyXG4gICAgICAgIGxldCBub3cgPSBuZXcgRGF0ZTtcclxuICAgICAgICByZXR1cm4gbm93LmdldEZ1bGxZZWFyKCkgLSBkYXRlLmdldEZ1bGxZZWFyKCk7XHJcbiAgICB9IFxyXG5cclxuICAgIHN0YXRpYyBjaGVja0RhdGEoZGF0YSl7XHJcbiAgICByZXR1cm4gZGF0YSA/IGRhdGEgOiAnJztcclxuICAgIH1cclxufSIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFZhbGlkYXRvcntcclxuICAgIGNvbnN0cnVjdG9yKCl7XHJcbiAgICB0aGlzLnJlZyA9ICAvXlthLXpdKyhbLV9dP1thLXowLTldKyl7MCwyfSQvaTtcclxuICAgIHRoaXMuZXJyb3IgPSBudWxsO1xyXG5cdH1cclxuXHJcbiAgICBpc1ZhbGlkKGxvZ2luLCBwYXNzKXtcclxuICAgICAgICBpZihsb2dpbi52YWx1ZSA9PScnIHx8IHBhc3MudmFsdWUgPT0gJycpe1xyXG4gICAgICAgICAgICB0aGlzLmVycm9yID0gJ9CX0LDQv9C+0LvQvdC40YLQtSDQv9GD0YHRgtGL0LUg0L/QvtC70Y8hJztcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1lbHNlIGlmKCFsb2dpbi52YWx1ZS5tYXRjaCh0aGlzLnJlZykpe1xyXG4gICAgICAgICAgICB0aGlzLmVycm9yID0gJ9Cb0L7Qs9C40L0g0LjQvNC10LXRgiDQvdC10LrQvtGA0LXQutGC0L3Ri9C5INGE0L7RgNC80LDRgiEnO1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfWVsc2UgaWYocGFzcy52YWx1ZS5sZW5ndGggPCA4KXtcclxuICAgICAgICAgICAgdGhpcy5lcnJvciA9ICfQn9Cw0YDQvtC70Ywg0LTQvtC70LbQtdC9INCx0YvRgtGMINC+0YIgOCDRgdC40LzQstC+0LvQvtCyISc7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0QWxlcnRNc2coKXtcclxuICAgICAgICByZXR1cm4gdGhpcy5lcnJvcjtcclxuICAgIH0gIFxyXG5cclxufSIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIExvZ2luTW9kZWx7XHJcbiAgICBjb25zdHJ1Y3Rvcigpe1xyXG4gICAgICAgIHRoaXMudXJsID0gJ2h0dHA6Ly9sb2NhbGhvc3Q6MzAwMC91c2Vycy8nO1xyXG4gICAgfSAgXHJcbiAgICByZXF1ZXN0VXNlckxvZ2luRGF0YShsb2dpbiwgcGFzcyl7XHJcbiAgICAgICAgcmV0dXJuIGZldGNoKHRoaXMudXJsKS50aGVuKHJlc3BvbmNlID0+IHJlc3BvbmNlLmpzb24oKSkudGhlbih1c2VycyA9PiB7XHJcbiAgICAgICAgICAgIGZvcihsZXQgaSA9IDA7IGkgPCB1c2Vycy5sZW5ndGg7IGkrKyl7XHJcbiAgICAgICAgICAgICAgICBpZigodXNlcnNbaV0ubG9naW5EYXRhLmxvZ2luID09IGxvZ2luKSAmJiAodXNlcnNbaV0ubG9naW5EYXRhLnBhc3N3b3JkID09IHBhc3MpKXtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdXNlcnNbaV07XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWtcclxuICAgICAgICAgICAgICAgIH0gXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIHVzZXJzLmxvZ2luRGF0YTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBnZXRMb2dpbk9wdGlvbnMobG9naW4sIHBhc3Mpe1xyXG4gICAgICAgIGxldCBib2R5ID0ge1xyXG5cdFx0XHRsb2dpbiA6IGxvZ2luLFxyXG5cdFx0XHRwYXNzIDogcGFzc1xyXG5cdFx0fTtcclxuICAgICAgICBsZXQgb3B0aW9ucyA9IHtcclxuXHRcdFx0bWV0aG9kIDogJ3Bvc3QnLFxyXG5cdFx0XHRoZWFkZXJzOiB7XHJcblx0XHRcdFx0J0NvbnRlbnQtdHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uOyBjaGFyc2V0PXV0Zi04J1xyXG5cdFx0XHR9LFxyXG5cdFx0XHRib2R5IDogSlNPTi5zdHJpbmdpZnkoYm9keSlcclxuICAgICAgICB9O1xyXG4gICAgICAgIHJldHVybiBvcHRpb25zOyAgXHJcbiAgICB9O1xyXG4gICAgZ2V0VXNlckluZm8oKXtcclxuICAgICAgICByZXR1cm4gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3VzZXJJbmZvJyk7XHJcbiAgICB9XHJcblxyXG4gICAgc2F2ZVVzZXJEYXRhKGxvZ2dlZFN0YXR1cywgdXNlcklkLCl7XHJcblx0XHRsZXQgZGF0YSAgPSB7XHJcblx0XHRcdHVzZXJJZCA6IHVzZXJJZCxcclxuXHRcdFx0aXNMb2dnZWQ6bG9nZ2VkU3RhdHVzXHJcblx0XHR9XHJcblx0XHR0aGlzLnNldFVzZXJJbmZvKGRhdGEpO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICBzZXRVc2VySW5mbyhkYXRhKXtcclxuICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgndXNlckluZm8nLCBKU09OLnN0cmluZ2lmeShkYXRhKSk7XHJcbiAgICB9XHJcbn0iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBMb2dpbkNvbnRyb2xsZXJ7XHJcblx0Y29uc3RydWN0b3IobW9kZWwsIHZpZXcsIHV0aWxzLCB2YWxpZGF0b3Ipe1xyXG5cdFx0dGhpcy52aWV3ID0gdmlldztcclxuXHRcdHRoaXMubW9kZWwgPSBtb2RlbDtcclxuXHRcdHRoaXMudmFsaWRhdG9yID0gdmFsaWRhdG9yO1xyXG5cdFx0dGhpcy51dGlscyA9IHV0aWxzO1xyXG5cdFx0dGhpcy5jdXJyZW50TG9naW4gPSBudWxsO1xyXG5cdFx0dGhpcy5jdXJyZW50cGFzcyA9IG51bGw7XHJcblx0XHR0aGlzLnVzZXJNZW51U2VsZWN0b3IgPSAnI3VzZXJNZW51J1xyXG5cdH1cclxuXHRcclxuXHRpbml0KCl7XHJcblx0XHR0aGlzLnZpZXcuaW5pdCgpO1xyXG5cdFx0dGhpcy5pbml0TGlzdGVuZXJzKCk7XHJcblx0XHR0aGlzLmlzTG9nZ2VkKCkgJiYgdGhpcy5sb2dnZWQoKTtcclxuXHRcdFxyXG5cdH1cclxuXHRcclxuXHRpbml0TGlzdGVuZXJzKCl7XHJcblx0XHR0aGlzLnZpZXcuZ29Mb2dpbkJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuZ29Mb2dpbi5iaW5kKHRoaXMpKTtcclxuXHRcdC8vdGhpcy52aWV3LmxvZ291dEJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMubG9nb3V0LmJpbmQodGhpcykpO1xyXG5cdH1cclxuXHJcblx0dmFsaWRhdGVVc2VyRGF0YSgpe1xyXG5cdFx0dGhpcy52YWxpZGF0b3IuaXNWYWxpZCh0aGlzLnZpZXcuaW5wdXRMb2dpbiwgdGhpcy52aWV3LmlucHV0UGFzcykgPyB0aGlzLmNoZWNrTG9naW5EYXRhKCkgOiB0aGlzLnZpZXcuc2hvd0Vycm9yTXNnKHRoaXMudmFsaWRhdG9yLmdldEFsZXJ0TXNnKCkpO1xyXG5cdFx0XHJcblx0fVxyXG5cclxuXHRjaGVja0xvZ2luRGF0YSgpe1xyXG5cdFx0bGV0IGxvZ2luID0gdGhpcy52aWV3LmlucHV0TG9naW4udmFsdWU7XHJcblx0XHRsZXQgcGFzcyA9IHRoaXMudmlldy5pbnB1dFBhc3MudmFsdWU7XHJcblxyXG5cdFx0dGhpcy5tb2RlbC5yZXF1ZXN0VXNlckxvZ2luRGF0YShsb2dpbiwgcGFzcykudGhlbih1c2VyID0+IHtcclxuXHRcdFx0aWYodXNlcil7XHJcblx0XHRcdFx0dGhpcy5tb2RlbC5zYXZlVXNlckRhdGEodHJ1ZSwgdXNlci51c2VySWQpO1xyXG5cdFx0XHRcdHRoaXMubG9nZ2VkKCk7XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0dGhpcy52aWV3LnNob3dFcnJvck1zZygn0JLRiyDQstCy0LXQu9C4INC90LXRgdGD0YnQtdGB0YLQstGD0Y7RidC40Lkg0LvQvtCz0LjQvSDQuNC70Lgg0L3QtdCy0LXRgNC90YvQuSDQv9Cw0YDQvtC70YwhJyk7XHJcblx0XHRcdH1cclxuXHRcdH0pO1xyXG5cdH1cclxuXHJcblx0Z29Mb2dpbihlKXtcclxuXHRcdGUucHJldmVudERlZmF1bHQoKTtcclxuXHRcdHRoaXMudmlldy5oaWRlRXJyb3JzTXNnKCk7XHJcblx0XHR0aGlzLnZhbGlkYXRlVXNlckRhdGEoKTtcclxuXHR9XHJcblxyXG5cdGxvZ2dlZCgpe1xyXG5cdFx0ZG9jdW1lbnQubG9jYXRpb24uaHJlZiA9ICcnO1xyXG5cdFx0dGhpcy51dGlscy5oaWRlVmlldyhbdGhpcy51c2VyTWVudV0pO1xyXG5cdFx0XHJcblx0fVxyXG5cdFxyXG5cdGxvZ291dCgpe1xyXG5cdFx0dGhpcy5tb2RlbC5zYXZlVXNlckRhdGEoZmFsc2UpO1xyXG5cdFx0ZG9jdW1lbnQubG9jYXRpb24uaHJlZiA9ICcjbG9naW4nO1xyXG5cdFx0XHJcblx0fVxyXG5cclxuXHRpc0xvZ2dlZCgpe1xyXG5cdFx0bGV0IGRhdGEgPSB0aGlzLm1vZGVsLmdldFVzZXJJbmZvKCk7XHJcblx0XHRyZXR1cm4gZGF0YSAmJiBKU09OLnBhcnNlKGRhdGEpLmlzTG9nZ2VkO1xyXG5cdH1cclxuXHRcdFxyXG59IiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgTG9naW5WaWV3e1xyXG4gICAgY29uc3RydWN0b3IodXRpbHMpe1xyXG4gICAgICAgIHRoaXMudXRpbHMgPSB1dGlscztcclxuICAgICAgICB0aGlzLnRlbXBsYXRlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2xvZ2luJyk7XHJcbiAgICAgICAgdGhpcy53cmFwcGVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3dyYXBwZXInKTtcclxuICAgICAgICB0aGlzLmlucHV0TG9naW4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuaW5wdXQtbG9naW4nKTtcclxuICAgICAgICB0aGlzLmlucHV0UGFzcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5pbnB1dC1wYXNzJyk7XHJcbiAgICAgICAgdGhpcy5lcnJvckRpdiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5hbGVydCcpOyBcclxuICAgICAgICB0aGlzLmdvTG9naW5CdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZ29Mb2dpbicpO1xyXG4gICAgICAgIHRoaXMubG9nb3V0QnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmxvZ291dCcpO1xyXG4gICAgICAgIHRoaXMudXNlck1lbnUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjdXNlck1lbnUnKTtcclxuICAgIH1cclxuXHJcbiAgICBpbml0KCl7XHJcbiAgICAgICAgdGhpcy51dGlscy5oaWRlVmlldyhbdGhpcy51c2VyTWVudV0pO1xyXG4gICAgfVxyXG5cclxuICAgIHNob3dFcnJvck1zZyhtc2cpe1xyXG4gICAgICAgIHRoaXMuZXJyb3JEaXYuaW5uZXJIVE1MID0gbXNnO1xyXG4gICAgfVxyXG5cclxuICAgIGhpZGVFcnJvcnNNc2coKXtcclxuICAgICAgICB0aGlzLmVycm9yRGl2LmlubmVySFRNTCA9ICcnO1xyXG4gICAgfVxyXG5cclxufSIsIu+7v2ltcG9ydCBVdGlscyBmcm9tICcuLi9nZW5lcmFsL3V0aWxzLmpzJztcclxuaW1wb3J0IFZhbGlkYXRvciBmcm9tICcuLi9nZW5lcmFsL3ZhbGlkYXRvci5qcyc7XHJcblxyXG5pbXBvcnQgRGFzaGJvYXJkTW9kZWwgZnJvbSAnLi4vZGFzaGJvYXJkL2Rhc2hib2FyZC5tb2RlbC5qcyc7XHJcbmltcG9ydCBEYXNoYm9hcmRDb250cm9sbGVyIGZyb20gJy4uL2Rhc2hib2FyZC9kYXNoYm9hcmQuY29udHJvbGxlci5qcyc7XHJcbmltcG9ydCBEYXNoYm9hcmRWaWV3IGZyb20gJy4uL2Rhc2hib2FyZC9kYXNoYm9hcmQudmlldy5qcyc7XHJcblxyXG5pbXBvcnQgTG9naW5Nb2RlbCBmcm9tICcuLi9sb2dpbi9sb2dpbi5tb2RlbC5qcyc7XHJcbmltcG9ydCBMb2dpbkNvbnRyb2xsZXIgZnJvbSAnLi4vbG9naW4vbG9naW4uY29udHJvbGxlci5qcyc7XHJcbmltcG9ydCBMb2dpblZpZXcgZnJvbSAnLi4vbG9naW4vbG9naW4udmlldy5qcyc7XHJcblxyXG5pbXBvcnQgUHJvZmlsZU1vZGVsIGZyb20gJy4uL3Byb2ZpbGUvcHJvZmlsZS5tb2RlbC5qcyc7XHJcbmltcG9ydCBQcm9maWxlQ29udHJvbGxlciBmcm9tICcuLi9wcm9maWxlL3Byb2ZpbGUuY29udHJvbGxlci5qcyc7XHJcbmltcG9ydCBQcm9maWxlVmlldyBmcm9tICcuLi9wcm9maWxlL3Byb2ZpbGUudmlldy5qcyc7XHJcblxyXG5sZXQgd3JhcHBlciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyN3cmFwcGVyJyk7XHJcbmxldCBpc0xvZ2dlZCA9ICgpID0+IHtcclxuICAgIGxldCBkYXRhID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3VzZXJJbmZvJyk7XHJcbiAgICByZXR1cm4gZGF0YSAmJiBKU09OLnBhcnNlKGRhdGEpLmlzTG9nZ2VkO1xyXG59XHJcblxyXG5sZXQgcm91dGVDb25maWcgPSB7XHJcbiAgICBcIlwiIDoge1xyXG4gICAgICAgIGluaXQgOiAoKSA9PiB7XHJcbiAgICAgICAgICAgIGxldCBtb2RlbCA9IG5ldyBEYXNoYm9hcmRNb2RlbChVdGlscyk7XHJcbiAgICAgICAgICAgIGxldCB2aWV3ID0gbmV3IERhc2hib2FyZFZpZXcoVXRpbHMpO1xyXG4gICAgICAgICAgICBsZXQgY29udHJvbGxlciA9IG5ldyBEYXNoYm9hcmRDb250cm9sbGVyKG1vZGVsLCB2aWV3LCBVdGlscyk7XHJcbiAgICAgICAgICAgIGNvbnRyb2xsZXIuaW5pdCgpO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgaW5pdGllZCA6IGZhbHNlXHJcbiAgICB9LFxyXG5cclxuICAgIFwicHJvZmlsZVwiIDoge1xyXG4gICAgICAgIGluaXQgOiAoKSA9PiB7XHJcblxyXG4gICAgICAgICAgICBsZXQgbW9kZWwgPSBuZXcgUHJvZmlsZU1vZGVsKFV0aWxzKTtcclxuICAgICAgICAgICAgbGV0IHZpZXcgPSBuZXcgUHJvZmlsZVZpZXcoVXRpbHMpO1xyXG4gICAgICAgICAgICBsZXQgY29udHJvbGxlciA9IG5ldyBQcm9maWxlQ29udHJvbGxlcihtb2RlbCwgdmlldywgVXRpbHMpO1xyXG4gICAgICAgICAgICBjb250cm9sbGVyLmluaXQoKTtcclxuXHJcbiAgICAgICAgfSxcclxuICAgICAgICBpbml0aWVkIDogZmFsc2VcclxuICAgIH0sXHJcblxyXG4gICAgXCJsb2dpblwiIDoge1xyXG4gICAgICAgIGluaXQgOiAoKSA9PiB7XHJcbiAgICAgICAgICAgIFV0aWxzLmluaXRUZW1wbGF0ZSh3cmFwcGVyLCAnbG9naW4nKTtcclxuICAgICAgICAgICAgbGV0IG1vZGVsID0gbmV3IExvZ2luTW9kZWwoVXRpbHMpO1xyXG4gICAgICAgICAgICBsZXQgdmlldyA9IG5ldyBMb2dpblZpZXcoVXRpbHMpO1xyXG4gICAgICAgICAgICBsZXQgdmFsaWRhdG9yID0gbmV3IFZhbGlkYXRvcjtcclxuICAgICAgICAgICAgbGV0IGNvbnRyb2xsZXIgPSBuZXcgTG9naW5Db250cm9sbGVyKG1vZGVsLCB2aWV3LCBVdGlscywgdmFsaWRhdG9yKTtcclxuICAgICAgICAgICAgY29udHJvbGxlci5pbml0KCk7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBpbml0aWVkIDogZmFsc2VcclxuICAgIH0sXHJcblxyXG4gICAgXCJsb2dvdXRcIiA6IHtcclxuICAgICAgICBpbml0IDogKCkgPT4ge1xyXG4gICAgICAgICAgICBVdGlscy5pbml0VGVtcGxhdGUod3JhcHBlciwgJ2xvZ2luJyk7XHJcbiAgICAgICAgICAgIGxldCBtb2RlbCA9IG5ldyBMb2dpbk1vZGVsKFV0aWxzKTtcclxuICAgICAgICAgICAgbGV0IHZpZXcgPSBuZXcgTG9naW5WaWV3KFV0aWxzKTtcclxuICAgICAgICAgICAgbGV0IHZhbGlkYXRvciA9IG5ldyBWYWxpZGF0b3I7XHJcbiAgICAgICAgICAgIGxldCBjb250cm9sbGVyID0gbmV3IExvZ2luQ29udHJvbGxlcihtb2RlbCwgdmlldywgVXRpbHMsIHZhbGlkYXRvcik7XHJcbiAgICAgICAgICAgIGNvbnRyb2xsZXIubG9nb3V0KCk7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBpbml0aWVkIDogZmFsc2VcclxuICAgIH1cclxufTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIHVwZGF0ZVJvdXRlKCl7XHJcbiAgICBsZXQgcm91dGUgPSBkb2N1bWVudC5sb2NhdGlvbi5oYXNoLnJlcGxhY2UoJyMnLCAnJyk7XHJcbiAgICAgICAgaWYoaXNMb2dnZWQoKSl7XHJcbiAgICAgICAgICAgIGlmKHJvdXRlQ29uZmlnW3JvdXRlXSl7XHJcbiAgICAgICAgICAgICAgICByb3V0ZUNvbmZpZ1tyb3V0ZV0uaW5pdCgpO1xyXG4gICAgICAgICAgICAgICAgcm91dGVDb25maWdbcm91dGVdLmluaXRpZWQgPSB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgcm91dGVDb25maWdbJ2xvZ2luJ10uaW5pdCgpO1xyXG4gICAgfVxyXG59OyIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIERhc2hib2FyZENvbnRyb2xsZXJ7XHJcbiAgICBjb25zdHJ1Y3Rvcihtb2RlbCwgdmlldywgdXRpbHMpe1xyXG4gICAgICAgIHRoaXMubW9kZWwgPSBtb2RlbDtcclxuICAgICAgICB0aGlzLnZpZXcgPSB2aWV3O1xyXG4gICAgICAgIHRoaXMudXRpbHMgPSB1dGlscztcclxuICAgICAgICB0aGlzLnVzZXIgPSBudWxsOyBcclxuICAgICAgICB0aGlzLnRlbXBsYXRlID0gdGhpcy52aWV3LnRlbXBsYXRlLmlubmVySFRNTDtcclxuICAgIH0gXHJcbiAgICBcclxuICAgIGFzeW5jIGdldEFsbERhdGEoKXtcclxuICAgICAgICBhd2FpdCB0aGlzLmdldE1haW5Vc2VySW5mbyh0aGlzLnVzZXIpO1xyXG4gICAgICAgIGF3YWl0IHRoaXMuZ2V0UG9zdHModGhpcy51c2VyKTtcclxuICAgIH1cclxuICAgIGdldE1haW5Vc2VySW5mbyh1c2VySWQpe1xyXG4gICAgICAgIHJldHVybiB0aGlzLm1vZGVsLnJlcXVlc3RVc2VySW5mbyh1c2VySWQpLnRoZW4oZGF0YSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMubWFrZVVzZXJEYXRhVGVtcGxhdGUoZGF0YSk7XHJcbiAgICAgICAgfSlcclxuICAgIH1cclxuXHJcbiAgICBtYWtlVXNlckRhdGFUZW1wbGF0ZSh1c2VyRGF0YSl7XHJcbiAgICAgICAgbGV0IHBob3Rvc1RlbXAgPSB0aGlzLnZpZXcucGhvdG9zVGVtcGxhdGUodXNlckRhdGEucGhvdG9zKTtcclxuICAgICAgICB0aGlzLnRlbXBsYXRlID0gdGhpcy5tb2RlbC5tYWtlVXNlckRhdGEodGhpcy50ZW1wbGF0ZSwgcGhvdG9zVGVtcCwgIHVzZXJEYXRhKTtcclxuICAgIH1cclxuXHJcbiAgICAvL9C/0YvRgtCw0Y7RgdGMINC40LzQuNGC0LjRgNC+0LLQsNGC0Ywg0LHQtdC60LXQvdC0IFxyXG4gICAgZ2V0UG9zdHModXNlcklkKXtcclxuICAgICAgICBsZXQgcG9zdHNUZW1wID0gJyc7XHJcbiAgICAgICAgIHRoaXMubW9kZWwucmVxdWVzdERhc2hib2FyZFBvc3RzKHVzZXJJZCkudGhlbihkYXRhID0+IHsvL9C/0L7Qu9GD0YfQsNGOINC/0L7RgdGC0Ysg0L3QsCDRgdGC0LXQvdC1INGO0LfQtdGA0LBcclxuICAgICAgICAgICAgZGF0YS5mb3JFYWNoKHBvc3QgPT4gey8v0LjRgtC10YDQuNGA0YPRjiDQv9C+0YHRgtGLIFxyXG4gICAgICAgICAgICAgICAgdGhpcy5tb2RlbC5yZXF1ZXN0VXNlckluZm8ocG9zdC51c2VySWQpLnRoZW4odXNlciA9PnsgLy8g0LTQsNC90L3Ri9C1INCw0LLRgtC+0YDQsCDQtNC70Y8g0LrQsNC20LTQvtCz0L4g0L/QvtGB0YLQsFxyXG4gICAgICAgICAgICAgICAgICAgIHBvc3RzVGVtcCArPSB0aGlzLnZpZXcucG9zdHNUZW1wbGF0ZSh1c2VyLnVzZXJJbmZvLCB0aGlzLnV0aWxzLm1vZGlmeURhdGVhbmRUaW1lKHBvc3QuZGF0ZSksIHBvc3QudGV4dCk7Ly/Qs9C10L3QtdGA0LjRgNGD0Y4g0LrQvtC0INC/0L7RgdGC0L7QslxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMudmlldy5wcmludFBvc3RzQWZ0ZXJMb2FkKHBvc3RzVGVtcCk7Ly/Rg9C20LDRgdC90L7QtSDQvdC+INGA0LDQsdC+0YfQtdC1INGA0LXRiNC10L3QuNC1IDwtLVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLy/QutCw0Log0L/QvtC70YPRh9C40YLRjCBwb3N0c1RlbXAg0LLQvdC1IGZvcmVhY2gg0L/QvtGB0LvQtSDQstGB0LXRhSDQt9Cw0L/RgNC+0YHQvtCyID9cclxuXHJcbn1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICBpbml0KCl7XHJcbiAgICAgICAgdGhpcy51c2VyID0gdGhpcy5tb2RlbC5nZXRDdXJyZW50VXNlcigpO1xyXG4gICAgICAgIHRoaXMuZ2V0QWxsRGF0YSgpLnRoZW4oKHJlc3BvbnNlID0+IHtcclxuICAgICAgICAgICAgdGhpcy52aWV3LnByaW50VXNlckRhdGEodGhpcy50ZW1wbGF0ZSk7XHJcbiAgICAgICAgICAgIHRoaXMudXRpbHMuaW5pdFRlbXBsYXRlKHRoaXMudmlldy53cmFwcGVyLCAnZGFzaGJvYXJkJyk7XHJcbiAgICAgICAgICAgIHRoaXMudmlldy5pbml0KCk7XHJcbiAgICAgICAgfSkpOyAgICAgIFxyXG4gICAgfVxyXG59IiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgRGFzaGJvYXJkTW9kZWx7XHJcbiAgICBjb25zdHJ1Y3Rvcih1dGlscyl7XHJcbiAgICAgICAgdGhpcy51cmwgPSAnaHR0cDovL2xvY2FsaG9zdDozMDAwL3VzZXJzLyc7XHJcbiAgICAgICAgdGhpcy51dGlscyA9IHV0aWxzO1xyXG4gICAgfVxyXG5cclxuICAgIHJlcXVlc3RVc2VySW5mbyhpZCl7XHJcbiAgICAgICAgcmV0dXJuIGZldGNoKHRoaXMudXJsICsgaWQpLnRoZW4ocmVzcG9uY2UgPT4gcmVzcG9uY2UuanNvbigpKS50aGVuKGRhdGEgPT4ge1xyXG4gICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgdXNlckluZm8gOiBkYXRhLm1haW5JbmZvLFxyXG4gICAgICAgICAgICAgICAgcGhvdG9zIDogZGF0YS5waG90b3NcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgcmVxdWVzdERhc2hib2FyZFBvc3RzKGlkKXtcclxuICAgICAgICByZXR1cm4gZmV0Y2godGhpcy51cmwgKyBpZCkudGhlbihyZXNwb25jZSA9PiByZXNwb25jZS5qc29uKCkpLnRoZW4oZGF0YSA9PiB7ICBcclxuICAgICAgICAgICAgcmV0dXJuIGRhdGEuZGFzaGJvYXJkUG9zdHM7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIG1ha2VVc2VyRGF0YSh0ZW1wbGF0ZSwgcGhvdG9zVGVtcGxhdGUsIHVzZXIpey8vINC90LUg0LIg0LzQvtC00LXQu9C4XHJcbiAgICAgICAgcmV0dXJuIHRlbXBsYXRlLnJlcGxhY2UoJ3tuYW1lfScsIHVzZXIudXNlckluZm8uZmlyc3RuYW1lICsnICcrIHVzZXIudXNlckluZm8ubGFzdG5hbWUpXHJcbiAgICAgICAgICAgICAgICAgICAgLnJlcGxhY2UoJ3thdmF0YXJ9JywgdGhpcy51dGlscy5jaGVja0RhdGEodXNlci51c2VySW5mby5hdmF0YXIpKVxyXG4gICAgICAgICAgICAgICAgICAgIC5yZXBsYWNlKCd7d2FsbHBhcGVyfScsIHRoaXMudXRpbHMuY2hlY2tEYXRhKHVzZXIudXNlckluZm8ud2FsbHBhcGVyKSlcclxuICAgICAgICAgICAgICAgICAgICAucmVwbGFjZSgne2ZyaWVuZHN9JywgdGhpcy51dGlscy5jaGVja0RhdGEodXNlci51c2VySW5mby5mcmllbmRzLmxlbmd0aCkpXHJcbiAgICAgICAgICAgICAgICAgICAgLnJlcGxhY2UoJ3tzdGF0dXN9JywgdGhpcy51dGlscy5jaGVja0RhdGEodXNlci51c2VySW5mby5zdGF0dXMpKVxyXG4gICAgICAgICAgICAgICAgICAgIC5yZXBsYWNlKCd7Y2l0eX0nLCB0aGlzLnV0aWxzLmNoZWNrRGF0YSh1c2VyLnVzZXJJbmZvLmNvbnRhY3RzLmNpdHkpKVxyXG4gICAgICAgICAgICAgICAgICAgIC5yZXBsYWNlKCd7am9ifScsIHRoaXMudXRpbHMuY2hlY2tEYXRhKHVzZXIudXNlckluZm8uam9iKSlcclxuICAgICAgICAgICAgICAgICAgICAucmVwbGFjZSgne3Bob3Rvc30nLCB0aGlzLnV0aWxzLmNoZWNrRGF0YShwaG90b3NUZW1wbGF0ZSkpO1xyXG4gICAgICAgICAgICAgICAgICBcclxuICAgIH1cclxuXHJcbiAgICBnZXRDdXJyZW50VXNlcigpe1xyXG4gICAgICAgIHJldHVybiAgSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgndXNlckluZm8nKSkudXNlcklkO1xyXG4gICAgfVxyXG5cclxufSIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIERhc2hib2FyZFZpZXd7XHJcbiAgICBjb25zdHJ1Y3Rvcih1dGlscyl7XHJcbiAgICAgICAgdGhpcy51dGlscyA9IHV0aWxzO1xyXG4gICAgICAgIHRoaXMud3JhcHBlciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyN3cmFwcGVyJyk7XHJcbiAgICAgICAgdGhpcy50ZW1wbGF0ZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNkYXNoYm9hcmQnKTtcclxuICAgICAgICB0aGlzLnBvc3RzRGl2SWQgPSAncG9zdHMnO1xyXG4gICAgICAgIHRoaXMudXNlck1lbnUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjdXNlck1lbnUnKTtcclxuICAgIH1cclxuXHJcbiAgICBpbml0KCl7XHJcbiAgICAgICB0aGlzLnV0aWxzLnNob3dWaWV3KFt0aGlzLnVzZXJNZW51XSlcclxuICAgIH1cclxuICAgIHByaW50VXNlckRhdGEoZGF0YSl7XHJcbiAgICAgICAgdGhpcy50ZW1wbGF0ZS5pbm5lckhUTUwgPSBkYXRhO1xyXG4gICAgfVxyXG5cclxuICAgIHByaW50UG9zdHNBZnRlckxvYWQoZGF0YSl7XHJcbiAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNcIisgdGhpcy5wb3N0c0RpdklkKS5pbm5lckhUTUwgPSBkYXRhO1xyXG4gICAgfVxyXG5cclxuICAgIHBvc3RzVGVtcGxhdGUodXNlciwgZGF0ZSwgdGV4dCl7XHJcbiAgICAgICAgcmV0dXJuIGBcclxuICAgICAgICA8bGkgY2xhc3M9XCJydiBiIGFnelwiPlxyXG4gICAgICAgICAgICA8aW1nIGNsYXNzPVwiYm9zIHZiIHliIGFmZlwiIHNyYz1cIiR7dXNlci5hdmF0YXJ9XCI+XHJcbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJyd1wiPlxyXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImJwYlwiPlxyXG4gICAgICAgICAgICAgICAgICAgIDxzbWFsbCBjbGFzcz1cImFjeCBheGNcIj4ke2RhdGV9PC9zbWFsbD5cclxuICAgICAgICAgICAgICAgICAgICA8aDY+JHt1c2VyLmZpcnN0bmFtZX0gJHt1c2VyLmxhc3RuYW1lfTwvaDY+XHJcbiAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgIDxwPiR7dGV4dH08L3A+XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICAgIDwvbGk+YFxyXG4gICAgfVxyXG5cclxuICAgIGltYWdlc1RlbXBsYXRlKGltZyl7XHJcbiAgICAgICAgcmV0dXJuIGA8ZGl2PiR7aW1nfTwvZGl2PmBcclxuICAgIH1cclxuXHJcbiAgICBwaG90b3NUZW1wbGF0ZShwaG90b3Mpe1xyXG4gICAgICAgIGxldCBwaG90b3NUZW1wbGF0ZSA9ICcnO1xyXG4gICAgICAgIGZvcihsZXQgaSA9IDA7IGk8MjsgaSsrICl7XHJcbiAgICAgICAgICAgIHBob3Rvc1RlbXBsYXRlICs9IGBcclxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cImZtXCI+XHJcbiAgICAgICAgICAgICAgICA8c21hbGw+JHtwaG90b3NbaV0udGl0bGV9PC9zbWFsbD5cclxuICAgICAgICAgICAgICAgIDxpbWcgc3JjID0gJHtwaG90b3NbaV0udXJsfSBkYXRhLXdpZHRoPVwiNjQwXCIgZGF0YS1oZWlnaHQ9XCI2NDBcIiBkYXRhLWFjdGlvbj1cInpvb21cIj5cclxuICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgIGA7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBwaG90b3NUZW1wbGF0ZTtcclxuICAgIH1cclxufSIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFByb2ZpbGVDb250cm9sbGVye1xyXG4gICAgY29uc3RydWN0b3IobW9kZWwsIHZpZXcsIHV0aWxzKXtcclxuICAgICAgICB0aGlzLm1vZGVsID0gbW9kZWw7XHJcbiAgICAgICAgdGhpcy52aWV3ID0gdmlldztcclxuICAgICAgICB0aGlzLnV0aWxzID0gdXRpbHM7XHJcbiAgICAgICAgdGhpcy51c2VyID0gbnVsbDtcclxuICAgICAgICB0aGlzLnRlbXBsYXRlID0gdGhpcy52aWV3LnRlbXBsYXRlLmlubmVySFRNTDtcclxuICAgIH1cclxuXHJcbiAgICBhc3luYyBnZXRBbGxEYXRhKCl7XHJcbiAgICAgICAgYXdhaXQgdGhpcy5nZXRNYWluVXNlckluZm8odGhpcy51c2VyKTtcclxuICAgICAgICBhd2FpdCB0aGlzLmdldEZyaWVuZHNJbmZvKHRoaXMudXNlcik7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0TWFpblVzZXJJbmZvKHVzZXJJZCl7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMubW9kZWwucmVxdWVzdEFsbFVzZXJJbmZvKHVzZXJJZCkudGhlbihkYXRhID0+IHtcclxuICAgICAgICAgICAgdGhpcy5tYWtlVXNlckRhdGFUZW1wbGF0ZShkYXRhKTtcclxuICAgICAgICB9KVxyXG4gICAgfVxyXG5cclxuICAgIG1ha2VVc2VyRGF0YVRlbXBsYXRlKHVzZXJEYXRhKXtcclxuICAgICAgICBsZXQgbGFuZ1RlbXAgPSB0aGlzLnZpZXcubGFuZ3VhZ2VzVGVtcGxhdGUodXNlckRhdGEub3RoZXJJbmZvLmxhbmd1YWdlcyk7XHJcbiAgICAgICAgbGV0IGludGVyZXN0c1RlbXAgPSB0aGlzLnZpZXcuaW50ZXJlc3RzVGVtcGxhdGUodXNlckRhdGEub3RoZXJJbmZvLmludGVyZXN0cyk7XHJcbiAgICAgICAgbGV0IHBob3Rvc1RlbXAgPSB0aGlzLnZpZXcucGhvdG9zVGVtcGxhdGUodXNlckRhdGEucGhvdG9zKTtcclxuICAgICAgICB0aGlzLnRlbXBsYXRlID0gdGhpcy5tb2RlbC5tYWtlVXNlckRhdGEodGhpcy50ZW1wbGF0ZSwgdXNlckRhdGEsIGludGVyZXN0c1RlbXAsIGxhbmdUZW1wLCBwaG90b3NUZW1wKTtcclxuICAgIH1cclxuICAgIC8v0L/Ri9GC0LDRjtGB0Ywg0LjQvNC40YLQuNGA0L7QstCw0YLRjCDQsdC10LrQtdC90LQgXHJcbiAgICBnZXRGcmllbmRzSW5mbyh1c2VySWQpe1xyXG4gICAgICAgbGV0IHRlbXBsYXRlID0gJyc7XHJcbiAgICAgICAgIHRoaXMubW9kZWwucmVxdWVzdEZyaWVuZHModXNlcklkKS50aGVuKGZyaWVuZHMgID0+IHsvL9C/0L7Qu9GD0YfQsNC10LwgaWQg0LLRgdC10YUg0LTRgNGD0LfQtdC5INC/0L7Qu9GM0LfQvtCy0LDRgtC10LvRj1xyXG4gICAgICAgICAgIGZyaWVuZHMuZm9yRWFjaChpZCA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm1vZGVsLnJlcXVlc3RBbGxVc2VySW5mbyhpZCkudGhlbih1c2VyID0+IHsvL9C/0L7Qu9GD0YfQsNC10Lwg0LjQvdGE0L7RgNC80LDRhtC40Y8g0L4g0LrQsNC20LTQvtC8INC00YDRg9Cz0LVcclxuICAgICAgICAgICAgICAgICAgICB0ZW1wbGF0ZSAgKz0gdGhpcy52aWV3LnVzZXJUZW1wbGF0ZSh1c2VyLm1haW5JbmZvKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnZpZXcucHJpbnRGcmllbmRzQWZ0ZXJMb2FkKHRlbXBsYXRlKTsvL9GD0LbQsNGB0L3QvtC1INC90L4g0YDQsNCx0L7Rh9C10LUg0YDQtdGI0LXQvdC40LUgPC0tXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAvL9C60LDQuiDQtNC+0YHRgtCw0YLRjCB0ZW1wbGF0ZSDQstC90LUgZm9yZWFjaCDQv9C+0YHQu9C1INCy0YHQtdGFIGZldGNoP1xyXG4gICAgICAgICAgIFxyXG4gICAgICAgIH0pXHJcbiAgICB9XHJcbiAgICBpbml0KCl7XHJcbiAgICAgICAgdGhpcy51c2VyID0gdGhpcy5tb2RlbC5nZXRDdXJyZW50VXNlcigpO1xyXG4gICAgICAgIHRoaXMuZ2V0QWxsRGF0YSgpLnRoZW4oKHJlc3BvbnNlID0+IHtcclxuICAgICAgICAgICAgdGhpcy52aWV3LnByaW50VXNlckRhdGEodGhpcy50ZW1wbGF0ZSk7XHJcbiAgICAgICAgICAgIHRoaXMudXRpbHMuaW5pdFRlbXBsYXRlKHRoaXMudmlldy53cmFwcGVyLCAncHJvZmlsZScpO1xyXG4gICAgICAgICAgICB0aGlzLnZpZXcuaW5pdCgpO1xyXG4gICAgICAgIH0pKTsgICAgICBcclxuICAgIH1cclxufSIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFByb2ZpbGVNb2RlbHtcclxuICAgIGNvbnN0cnVjdG9yKHV0aWxzKXtcclxuICAgICAgICB0aGlzLnV0aWxzID0gdXRpbHM7XHJcbiAgICAgICAgdGhpcy51cmwgPSAnaHR0cDovL2xvY2FsaG9zdDozMDAwL3VzZXJzLyc7XHJcbiAgICB9XHJcblxyXG4gICAgcmVxdWVzdEFsbFVzZXJJbmZvKGlkKXtcclxuICAgICAgICByZXR1cm4gZmV0Y2godGhpcy51cmwraWQpLnRoZW4ocmVzcG9uY2UgPT4gcmVzcG9uY2UuanNvbigpKVxyXG4gICAgfVxyXG4gICAgXHJcbiAgICByZXF1ZXN0RnJpZW5kcyhpZCl7XHJcbiAgICAgICAgcmV0dXJuIGZldGNoKHRoaXMudXJsK2lkKS50aGVuKHJlc3BvbmNlID0+IHJlc3BvbmNlLmpzb24oKSkudGhlbihkYXRhID0+IHsgIFxyXG4gICAgICAgICAgICByZXR1cm4gZGF0YS5tYWluSW5mby5mcmllbmRzXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgbWFrZVVzZXJEYXRhKHRlbXBsYXRlLCB1c2VyLCBpbnRlcmVzdFRlbXBsYXRlLCBsYW5ndWFnZXNUZW1wbGF0ZSwgcGhvdG9zVGVtcGxhdGUpe1xyXG4gICAgICAgIGxldCBhZ2UgPSBgICgke3RoaXMudXRpbHMuaG93VGltZVBhc3NlZCh1c2VyLm1haW5JbmZvLmJpcnRoZGF5KX0pYDtcclxuICAgICAgICByZXR1cm4gdGVtcGxhdGUucmVwbGFjZSgne25hbWV9JywgdXNlci5tYWluSW5mby5maXJzdG5hbWUgKycgJysgdXNlci5tYWluSW5mby5sYXN0bmFtZSlcclxuICAgICAgICAgICAgICAgICAgICAucmVwbGFjZSgne2F2YXRhcn0nLCB0aGlzLnV0aWxzLmNoZWNrRGF0YSh1c2VyLm1haW5JbmZvLmF2YXRhcikpXHJcbiAgICAgICAgICAgICAgICAgICAgLnJlcGxhY2UoJ3t3YWxscGFwZXJ9JywgdGhpcy51dGlscy5jaGVja0RhdGEodXNlci5tYWluSW5mby53YWxscGFwZXIpKVxyXG4gICAgICAgICAgICAgICAgICAgIC5yZXBsYWNlKCd7c3RhdHVzfScsIHRoaXMudXRpbHMuY2hlY2tEYXRhKHVzZXIubWFpbkluZm8uc3RhdHVzKSlcclxuICAgICAgICAgICAgICAgICAgICAucmVwbGFjZSgne2JpcnRoZGF5fScsIHRoaXMudXRpbHMubW9kaWZ5RGF0ZSh1c2VyLm1haW5JbmZvLmJpcnRoZGF5KSArIGFnZSlcclxuICAgICAgICAgICAgICAgICAgICAucmVwbGFjZSgne2dlbmRlcn0nLCB0aGlzLnV0aWxzLmNoZWNrRGF0YSh1c2VyLm1haW5JbmZvLmdlbmRlcikpXHJcbiAgICAgICAgICAgICAgICAgICAgLnJlcGxhY2UoJ3tqb2J9JywgdGhpcy51dGlscy5jaGVja0RhdGEodXNlci5tYWluSW5mby5qb2IpKVxyXG4gICAgICAgICAgICAgICAgICAgIC5yZXBsYWNlKCd7ZWR1Y2F0aW9ufScsIHRoaXMudXRpbHMuY2hlY2tEYXRhKHVzZXIub3RoZXJJbmZvLmVkdWNhdGlvbikpXHJcbiAgICAgICAgICAgICAgICAgICAgLnJlcGxhY2UoJ3tlbWFpbH0nLCB0aGlzLnV0aWxzLmNoZWNrRGF0YSh1c2VyLm1haW5JbmZvLmNvbnRhY3RzLmVtYWlsKSlcclxuICAgICAgICAgICAgICAgICAgICAucmVwbGFjZSgne2NpdHl9JywgdGhpcy51dGlscy5jaGVja0RhdGEodXNlci5tYWluSW5mby5jb250YWN0cy5jaXR5KSlcclxuICAgICAgICAgICAgICAgICAgICAucmVwbGFjZSgne3RlbGVncmFtfScsIHRoaXMudXRpbHMuY2hlY2tEYXRhKHVzZXIubWFpbkluZm8uY29udGFjdHMudGVsZWdyYW0pKVxyXG4gICAgICAgICAgICAgICAgICAgIC5yZXBsYWNlKCd7c2t5cGV9JywgdGhpcy51dGlscy5jaGVja0RhdGEodXNlci5tYWluSW5mby5jb250YWN0cy5za3lwZSkpXHJcbiAgICAgICAgICAgICAgICAgICAgLnJlcGxhY2UoJ3thYm91dH0nLCB0aGlzLnV0aWxzLmNoZWNrRGF0YSh1c2VyLm90aGVySW5mby5hYm91dCkpXHJcbiAgICAgICAgICAgICAgICAgICAgLnJlcGxhY2UoJ3tpbnRlcmVzdHN9JywgdGhpcy51dGlscy5jaGVja0RhdGEoaW50ZXJlc3RUZW1wbGF0ZSkpXHJcbiAgICAgICAgICAgICAgICAgICAgLnJlcGxhY2UoJ3tsYW5ndWFnZXN9JywgdGhpcy51dGlscy5jaGVja0RhdGEobGFuZ3VhZ2VzVGVtcGxhdGUpKVxyXG4gICAgICAgICAgICAgICAgICAgIC5yZXBsYWNlKCd7cGhvdG9zfScsIHRoaXMudXRpbHMuY2hlY2tEYXRhKHBob3Rvc1RlbXBsYXRlKSk7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0Q3VycmVudFVzZXIoKXtcclxuICAgICAgICByZXR1cm4gIEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3VzZXJJbmZvJykpLnVzZXJJZDtcclxuICAgIH1cclxuXHJcbn0iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBQcm9maWxlVmlld3tcclxuICAgIGNvbnN0cnVjdG9yKHV0aWxzKXtcclxuICAgICAgICB0aGlzLnV0aWxzID0gdXRpbHM7XHJcbiAgICAgICAgdGhpcy53cmFwcGVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3dyYXBwZXInKTtcclxuICAgICAgICB0aGlzLnRlbXBsYXRlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3Byb2ZpbGUnKTtcclxuICAgICAgICB0aGlzLmZyaWVuZHNEaXZJZCA9ICdmcmllbmRzJztcclxuICAgICAgICB0aGlzLnVzZXJNZW51ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3VzZXJNZW51Jyk7XHJcbiAgICB9XHJcblxyXG4gICAgaW5pdCgpe1xyXG4gICAgICAgdGhpcy51dGlscy5zaG93VmlldyhbdGhpcy51c2VyTWVudV0pO1xyXG4gICAgfVxyXG4gICAgcGhvdG9zVGVtcGxhdGUocGhvdG9zKXtcclxuICAgICAgICBsZXQgdGVtcCA9ICcnO1xyXG4gICAgICAgIGZvcihsZXQgaSA9IDA7IGkgPCBwaG90b3MubGVuZ3RoOyBpKysgKXtcclxuICAgICAgICAgICAgcGhvdG9zVGVtcGxhdGUgKz0gYFxyXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZm1cIj5cclxuICAgICAgICAgICAgICAgIDxzbWFsbD4ke3Bob3Rvc1tpXS50aXRsZX08L3NtYWxsPlxyXG4gICAgICAgICAgICAgICAgPGltZyBzcmMgPSAke3Bob3Rvc1tpXS51cmx9IGRhdGEtd2lkdGg9XCI2NDBcIiBkYXRhLWhlaWdodD1cIjY0MFwiIGRhdGEtYWN0aW9uPVwiem9vbVwiPlxyXG4gICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgYDtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRlbXA7XHJcbiAgICB9XHJcblxyXG4gICAgdXNlclRlbXBsYXRlKHVzZXIpe1xyXG4gICAgcmV0dXJuIGA8bGkgY2xhc3M9XCJiXCI+XHJcbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJydiBhZHlcIj5cclxuICAgICAgICAgICAgICAgIDxpbWcgY2xhc3M9XCJib3MgdXMgYWZmXCIgc3JjPVwiJHt1c2VyLmF2YXRhcn1cIj5cclxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJydyB5ZFwiPlxyXG4gICAgICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9XCJjZyBueiBvayBhY3hcIj5cclxuICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cImggYmp1XCI+PC9zcGFuPiBVbmZvbGxvd1xyXG4gICAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxyXG4gICAgICAgICAgICAgICAgICAgIDxzdHJvbmc+JHt1c2VyLmZpcnN0bmFtZX0gJHt1c2VyLmxhc3RuYW1lfTwvc3Ryb25nPiB8XHJcbiAgICAgICAgICAgICAgICAgICAgPHNtYWxsPiR7dXNlci5jb250YWN0cy5jaXR5fTwvc21hbGw+XHJcbiAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgIDwvbGk+YFxyXG4gICAgfVxyXG4gICBcclxuICAgIHByaW50RnJpZW5kc0FmdGVyTG9hZChkYXRhKXtcclxuICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI1wiKyB0aGlzLmZyaWVuZHNEaXZJZCkuaW5uZXJIVE1MID0gZGF0YTtcclxuICAgIH1cclxuXHJcbiAgICBsYW5ndWFnZXNUZW1wbGF0ZShkYXRhKXtcclxuICAgICAgICBsZXQgdGVtcCA9ICcnO1xyXG4gICAgICAgIGZvcihsZXQgaSA9IDA7IGkgPCBkYXRhLmxlbmd0aDsgaSsrICl7XHJcbiAgICAgICAgICAgIHRlbXAgKz0gYDxsaSBjbGFzcz1cImNnXCI+PGltZyB3aWR0aCA9IFwiMThcIiB0aXRsZT1cIiAke2RhdGFbaV0udGl0bGV9XCIgc3JjID1cIiR7ZGF0YVtpXS5pY299XCI+PC9saT5gXHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0ZW1wO1xyXG4gICAgfVxyXG5cclxuICAgIGludGVyZXN0c1RlbXBsYXRlKGRhdGEpe1xyXG4gICAgICAgIGxldCB0ZW1wID0gJyc7XHJcbiAgICAgICAgZm9yKGxldCBpID0gMDsgaSA8IGRhdGEubGVuZ3RoOyBpKysgKXtcclxuICAgICAgICAgICAgdGVtcCArPSBgPGxpIGNsYXNzPVwiY2dcIj48aW1nIHdpZHRoID0gXCIxOFwiIHNyYyA9XCIke2RhdGFbaV0uaWNvfVwiPiAke2RhdGFbaV0udGl0bGV9PC9saT5gXHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0ZW1wO1xyXG4gICAgfVxyXG5cclxuICAgIHBob3Rvc1RlbXBsYXRlKHBob3Rvcyl7XHJcbiAgICAgICAgbGV0IHRlbXAgPSAnJztcclxuICAgICAgICBmb3IobGV0IGkgPSAwOyBpIDwgcGhvdG9zLmxlbmd0aDsgaSsrICl7XHJcbiAgICAgICAgICAgIHRlbXAgKz0gYFxyXG4gICAgICAgICAgICA8ZGl2IHN0eWxlPVwid2lkdGg6IDQ5JTttYXJnaW4tYm90dG9tOiAxMHB4OyAgZGlzcGxheTogaW5saW5lLWJsb2NrOyB2ZXJ0aWNhbC1hbGlnbjogYm90dG9tO1wiPlxyXG4gICAgICAgICAgICA8aDU+JHtwaG90b3NbaV0udGl0bGV9PC9oNT5cclxuICAgICAgICAgICAgPGltZyBkYXRhLXdpZHRoPVwiNjQwXCIgZGF0YS1oZWlnaHQ9XCI0MDBcIiBkYXRhLWFjdGlvbj1cInpvb21cIiBzcmM9XCIke3Bob3Rvc1tpXS51cmx9XCIgc3R5bGU9XCJ3aWR0aDogNDA1cHg7IGhlaWdodDogMjU0cHg7XCI+XHJcbiAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgYDtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRlbXA7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpbnRVc2VyRGF0YShkYXRhKXtcclxuICAgICAgICB0aGlzLnRlbXBsYXRlLmlubmVySFRNTCA9IGRhdGE7XHJcbiAgICB9XHJcbn0iLCJpbXBvcnQgdXBkYXRlUm91dGUgZnJvbSAnLi9nZW5lcmFsL3JvdXRlci5qcyc7XHJcblxyXG53aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignbG9hZCcsIHVwZGF0ZVJvdXRlKTtcclxud2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2hhc2hjaGFuZ2UnLCB1cGRhdGVSb3V0ZSk7Il19
